(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{jSq3:function(t,e,n){"use strict";n.r(e),n.d(e,"SecurityModule",(function(){return G}));var i=n("ofXK"),a=n("onrN"),o=n("tyNb"),r=n("5K0A"),c=n("Vt10"),s=n("fXoL"),b=n("H+bZ"),l=n("zVt+"),d=n("Wp6s"),u=n("kmnG"),m=n("qFsG"),g=n("3Pt+"),f=n("bTqV"),h=n("+0xr"),p=n("Dh3D"),C=n("M9IT"),U=n("NFeN");function T(t,e){if(1&t&&(s.Ub(0,"mat-card-header"),s.Ub(1,"mat-card-title"),s.Ub(2,"div",0),s.Ub(3,"div",15),s.zc(4),s.Tb(),s.Tb(),s.Tb(),s.Ub(5,"mat-card-subtitle"),s.Ub(6,"div",0),s.Ub(7,"div",15),s.zc(8),s.Tb(),s.Tb(),s.Tb(),s.Tb()),2&t){const t=s.gc();s.Cb(4),s.Bc(" ",t.title," "),s.Cb(4),s.Bc(" ",t.subtitle," ")}}function y(t,e){1&t&&(s.Ub(0,"th",16),s.zc(1," Id "),s.Tb())}function v(t,e){if(1&t&&(s.Ub(0,"td",17),s.zc(1),s.Tb()),2&t){const t=e.$implicit;s.Cb(1),s.Bc(" ",t.id," ")}}function w(t,e){if(1&t&&(s.Ub(0,"th",16),s.zc(1),s.Tb()),2&t){const t=s.gc().$implicit;s.Cb(1),s.Bc(" ",t," ")}}function x(t,e){if(1&t){const t=s.Vb();s.Ub(0,"button",21),s.cc("click",(function(){s.sc(t);const e=s.gc().$implicit;return s.gc(2).onEdit(e)})),s.Ub(1,"mat-icon"),s.zc(2,"launch"),s.Tb(),s.Tb()}}function M(t,e){if(1&t){const t=s.Vb();s.Ub(0,"button",22),s.cc("click",(function(){s.sc(t);const e=s.gc().$implicit;return s.gc(2).onDelete(e)})),s.Ub(1,"mat-icon"),s.zc(2,"delete_outline"),s.Tb(),s.Tb()}}function F(t,e){if(1&t&&(s.Ub(0,"td",17),s.Ub(1,"span"),s.zc(2),s.Tb(),s.yc(3,x,3,0,"button",19),s.yc(4,M,3,0,"button",20),s.Tb()),2&t){const t=e.$implicit,n=s.gc().$implicit;s.Cb(2),s.Ac(t[n]),s.Cb(1),s.lc("ngIf","actions"===n),s.Cb(1),s.lc("ngIf","actions"===n)}}function z(t,e){1&t&&(s.Sb(0,18),s.yc(1,w,2,1,"th",9),s.yc(2,F,5,3,"td",10),s.Rb()),2&t&&s.lc("matColumnDef",e.$implicit)}function S(t,e){1&t&&s.Pb(0,"tr",23)}function I(t,e){1&t&&s.Pb(0,"tr",24)}let O=(()=>{class t extends c.a{constructor(t,e,n){super(),this.service=t,this.authService=e,this.router=n,this.showCardHeader=!0,this.entityApi="users",this.settings={options:{where:{}}},this.displayedColumns=["name","isActive","actions"],this.filtersColumns=["name"],this.createdDate=new Date}ngOnInit(){this.title="Usuarios",this.subtitle="Seguriada",super.init(this),super.onPageChange()}ngOnChanges(t){this.loadChange&&super.onPageChange()}onEdit(t){this.router.navigate(["/user",{userId:t.id}])}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(b.a),s.Ob(l.a),s.Ob(o.f))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-users"]],inputs:{loadChange:"loadChange",showCardHeader:"showCardHeader"},features:[s.zb,s.Ab],decls:21,vars:9,consts:[["fxLayout","row","fxLayoutWrap","wrap"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],[4,"ngIf"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100",2,"overflow","hidden"],[2,"float","left","width","30%","margin-right","10px"],["matInput","","placeholder","Filtrar",3,"ngModel","keyup.enter","ngModelChange"],["mat-fab","","color","basic",2,"float","left",3,"click"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100"],["mat-header-cell",""],["mat-cell",""],[3,"matColumnDef"],["mat-button","",3,"click",4,"ngIf"],["mat-button","","color","warn",3,"click",4,"ngIf"],["mat-button","",3,"click"],["mat-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(s.Ub(0,"div",0),s.Ub(1,"div",1),s.Ub(2,"mat-card"),s.yc(3,T,9,2,"mat-card-header",2),s.Ub(4,"mat-card-content"),s.Ub(5,"div",0),s.Ub(6,"div",3),s.Ub(7,"mat-form-field",4),s.Ub(8,"input",5),s.cc("keyup.enter",(function(){return e.onPageChange()}))("ngModelChange",(function(t){return e.filter=t})),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(9,"div",0),s.Ub(10,"div",3),s.Ub(11,"button",6),s.cc("click",(function(){return e.onPageChange()})),s.zc(12,"Refrescar"),s.Tb(),s.Tb(),s.Tb(),s.Ub(13,"table",7),s.cc("matSortChange",(function(t){return e.onSortChange(t)})),s.Sb(14,8),s.yc(15,y,2,0,"th",9),s.yc(16,v,2,1,"td",10),s.Rb(),s.yc(17,z,3,1,"ng-container",11),s.yc(18,S,1,0,"tr",12),s.yc(19,I,1,0,"tr",13),s.Tb(),s.Ub(20,"mat-paginator",14),s.cc("page",(function(t){return e.onPaginatorChange(t)})),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb()),2&t&&(s.Cb(3),s.lc("ngIf",e.showCardHeader),s.Cb(5),s.lc("ngModel",e.filter),s.Cb(5),s.lc("dataSource",e.dataSource),s.Cb(4),s.lc("ngForOf",e.displayedColumns),s.Cb(1),s.lc("matHeaderRowDef",e.displayedColumns),s.Cb(1),s.lc("matRowDefColumns",e.displayedColumns),s.Cb(1),s.lc("length",e.length)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions))},directives:[d.a,i.k,d.c,u.c,m.b,g.b,g.l,g.o,f.a,h.n,p.a,h.c,h.i,h.b,i.j,h.k,h.m,C.a,d.e,d.h,d.g,h.h,h.a,U.a,h.j,h.l],encapsulation:2}),t})();var k=n("+tBq"),A=n("dNgK"),D=n("bSwM"),E=n("d3UM"),P=n("FKr1");function B(t,e){if(1&t&&(s.Ub(0,"mat-error"),s.zc(1),s.Tb()),2&t){const t=s.gc();s.Cb(1),s.Ac(t.getErrorMessage("name"))}}function L(t,e){if(1&t&&(s.Ub(0,"mat-error"),s.zc(1),s.Tb()),2&t){const t=s.gc();s.Cb(1),s.Ac(t.getErrorMessage("password"))}}function N(t,e){if(1&t&&(s.Ub(0,"mat-error"),s.zc(1),s.Tb()),2&t){const t=s.gc();s.Cb(1),s.Ac(t.getErrorMessage("email"))}}function q(t,e){if(1&t&&(s.Ub(0,"mat-option",14),s.zc(1),s.Tb()),2&t){const t=e.$implicit;s.lc("value",t.value),s.Cb(1),s.Bc(" ",t.text," ")}}const R=function(){return{standalone:!0}},$=[{path:"users",canActivate:[r.a],component:O},{path:"user",canActivate:[r.a],component:(()=>{class t extends k.a{constructor(t,e,n,i,a,o,r){super(),this.service=t,this.authService=e,this.route=n,this.fb=i,this.router=a,this.changeDetectorRef=o,this._snackBar=r,this.entityApi="users",this.entityApiMenus="menus",this.passChanged=!1,this.configFormGroup=t=>{let e={field:"name"};t&&(e.options={where:{id:{$ne:t}}}),this.entityForm=new g.f({name:new g.d("",[g.s.required],[this.service.takenValidator(this.entityApi,e)]),password:new g.d("",[g.s.required]),email:new g.d("",[g.s.email])})}}ngOnInit(){this.title="User",this.subtitle="Seguridad",this.iniEntity(),super.init(this),this.service.getSelect(this.entityApiMenus,{value:"id",text:"name",options:{order:[["name","asc"]]}}).subscribe(t=>{this.menus=t}),this.route.params.subscribe(t=>{t&&t.userId?(this.configFormGroup(t.userId),super.getEntity(t.userId,{options:{include:[{association:"menus"}]}}).subscribe(()=>{})):this.configFormGroup()})}iniEntity(){this.entity={employeeId:null,defaultMenuId:null,name:null,password:null,email:null,isActive:!0,isSuperAdmin:!1}}new(){this.iniEntity(),this.router.navigate(["/user"])}beforeSaved(){return this.entity.id&&(this.passChanged||(this.currPass=this.entity.password,delete this.entity.password)),!0}afterSaved(){this.passChanged||(this.entity.password=this.currPass)}passChange(){this.passChanged=!0}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(b.a),s.Ob(l.a),s.Ob(o.a),s.Ob(g.c),s.Ob(o.f),s.Ob(s.h),s.Ob(A.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-user"]],features:[s.zb],decls:50,vars:20,consts:[["fxLayout","row","fxLayoutWrap","wrap"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100"],[3,"formGroup"],["matInput","","placeholder","Entre usuario","formControlName","name","required","",3,"ngModel","ngModelChange"],[4,"ngIf"],["type","password","matInput","","placeholder","Entre password","formControlName","password","required","",3,"ngModel","ngModelChange","change"],["matInput","","placeholder","Enter email","formControlName","email",3,"ngModel","ngModelChange"],["fxLayout","row","fxLayoutWrap","wrap",2,"margin-text-outline","10px","margin-top","10px"],[2,"margin-right","10px",3,"ngModel","ngModelOptions","ngModelChange"],["matNativeControl","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["mat-fab","","color","accent",3,"disabled","click"],["mat-fab","","color","primary",3,"click"],[3,"value"]],template:function(t,e){1&t&&(s.Ub(0,"div",0),s.Ub(1,"div",1),s.Ub(2,"mat-card"),s.Ub(3,"mat-card-header"),s.Ub(4,"mat-card-title"),s.Ub(5,"div",0),s.Ub(6,"div",2),s.zc(7),s.Tb(),s.Tb(),s.Tb(),s.Ub(8,"mat-card-subtitle"),s.Ub(9,"div",0),s.Ub(10,"div",2),s.zc(11),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(12,"mat-card-content"),s.Ub(13,"form",3),s.Ub(14,"div",0),s.Ub(15,"div",2),s.Ub(16,"mat-form-field"),s.Ub(17,"input",4),s.cc("ngModelChange",(function(t){return e.entity.name=t})),s.Tb(),s.yc(18,B,2,1,"mat-error",5),s.Tb(),s.Tb(),s.Tb(),s.Ub(19,"div",0),s.Ub(20,"div",2),s.Ub(21,"mat-form-field"),s.Ub(22,"input",6),s.cc("ngModelChange",(function(t){return e.entity.password=t}))("change",(function(){return e.passChange()})),s.Tb(),s.yc(23,L,2,1,"mat-error",5),s.Tb(),s.Tb(),s.Tb(),s.Ub(24,"div",0),s.Ub(25,"div",2),s.Ub(26,"mat-form-field"),s.Ub(27,"input",7),s.cc("ngModelChange",(function(t){return e.entity.email=t})),s.Tb(),s.yc(28,N,2,1,"mat-error",5),s.Tb(),s.Tb(),s.Tb(),s.Ub(29,"div",8),s.Ub(30,"div",2),s.Ub(31,"mat-checkbox",9),s.cc("ngModelChange",(function(t){return e.entity.isActive=t})),s.zc(32,"Esta Activo"),s.Tb(),s.Tb(),s.Tb(),s.Ub(33,"div",8),s.Ub(34,"div",2),s.Ub(35,"mat-checkbox",9),s.cc("ngModelChange",(function(t){return e.entity.isSuperAdmin=t})),s.zc(36,"Es super administrador"),s.Tb(),s.Tb(),s.Tb(),s.Ub(37,"div",8),s.Ub(38,"div",2),s.Ub(39,"mat-form-field"),s.Ub(40,"mat-label"),s.zc(41,"Seleccione men\xfa"),s.Tb(),s.Ub(42,"mat-select",10),s.cc("ngModelChange",(function(t){return e.entity.defaultMenuId=t})),s.yc(43,q,2,2,"mat-option",11),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(44,"mat-card-actions"),s.Ub(45,"button",12),s.cc("click",(function(){return e.save()})),s.zc(46,"Salvar"),s.Tb(),s.Ub(47,"button",13),s.cc("click",(function(){return e.new()})),s.zc(48,"Nuevo"),s.Tb(),s.Tb(),s.Pb(49,"mat-card-footer"),s.Tb(),s.Tb(),s.Tb()),2&t&&(s.Cb(7),s.Bc(" ",e.title," "),s.Cb(4),s.Bc(" ",e.subtitle," "),s.Cb(2),s.lc("formGroup",e.entityForm),s.Cb(4),s.lc("ngModel",e.entity.name),s.Cb(1),s.lc("ngIf",e.entityForm.invalid),s.Cb(4),s.lc("ngModel",e.entity.password),s.Cb(1),s.lc("ngIf",e.entityForm.invalid),s.Cb(4),s.lc("ngModel",e.entity.email),s.Cb(1),s.lc("ngIf",e.entityForm.invalid),s.Cb(3),s.lc("ngModel",e.entity.isActive)("ngModelOptions",s.mc(17,R)),s.Cb(4),s.lc("ngModel",e.entity.isSuperAdmin)("ngModelOptions",s.mc(18,R)),s.Cb(7),s.lc("ngModel",e.entity.defaultMenuId)("ngModelOptions",s.mc(19,R)),s.Cb(1),s.lc("ngForOf",e.menus),s.Cb(2),s.lc("disabled",!e.entityForm.valid))},directives:[d.a,d.e,d.h,d.g,d.c,g.t,g.m,g.g,u.c,m.b,g.b,g.l,g.e,g.r,i.k,D.a,g.o,u.f,E.a,i.j,d.b,f.a,d.d,u.b,P.n],encapsulation:2}),t})()}];let H=(()=>{class t{}return t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({factory:function(e){return new(e||t)},imports:[[o.h.forChild($)],o.h]}),t})(),G=(()=>{class t{}return t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({factory:function(e){return new(e||t)},imports:[[i.c,H,a.a,g.q,g.h]]}),t})()}}]);