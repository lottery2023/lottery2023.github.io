(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{ZlVc:function(e,t,i){"use strict";i.r(t),i.d(t,"BetModule",(function(){return Gt}));var n=i("ofXK"),r=i("3Pt+"),c=i("onrN"),o=i("tyNb"),a=i("5K0A"),s=i("+tBq"),l=i("fXoL"),u=i("H+bZ"),h=i("zVt+"),b=i("dNgK"),d=i("Wp6s"),g=i("kmnG"),m=i("qFsG"),f=i("d3UM"),y=i("bSwM"),p=i("bTqV"),T=i("wZkO"),C=i("FKr1"),F=i("NFeN"),v=i("Vt10"),k=i("+0xr"),U=i("Dh3D"),w=i("M9IT");function M(e,t){if(1&e&&(l.Ub(0,"mat-card-header"),l.Ub(1,"mat-card-title"),l.Ub(2,"div",0),l.Ub(3,"div",12),l.zc(4),l.Tb(),l.Tb(),l.Tb(),l.Ub(5,"mat-card-subtitle"),l.Ub(6,"div",0),l.Ub(7,"div",12),l.zc(8),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&e){const e=l.gc();l.Cb(4),l.Bc(" ",e.title," "),l.Cb(4),l.Bc(" ",e.subtitle," ")}}function x(e,t){1&e&&(l.Ub(0,"th",13),l.zc(1," Id "),l.Tb())}function P(e,t){if(1&e&&(l.Ub(0,"td",14),l.zc(1),l.Tb()),2&e){const e=t.$implicit;l.Cb(1),l.Bc(" ",e.id," ")}}function I(e,t){if(1&e&&(l.Ub(0,"th",13),l.zc(1),l.Tb()),2&e){const e=l.gc().$implicit;l.Cb(1),l.Bc(" ",e," ")}}function O(e,t){if(1&e){const e=l.Vb();l.Ub(0,"button",18),l.cc("click",(function(){l.sc(e);const t=l.gc().$implicit;return l.gc(2).onEdit(t)})),l.Ub(1,"mat-icon"),l.zc(2,"launch"),l.Tb(),l.Tb()}}function D(e,t){if(1&e){const e=l.Vb();l.Ub(0,"button",19),l.cc("click",(function(){l.sc(e);const t=l.gc().$implicit;return l.gc(2).onDelete(t)})),l.Ub(1,"mat-icon"),l.zc(2,"delete_outline"),l.Tb(),l.Tb()}}function S(e,t){if(1&e&&(l.Ub(0,"td",14),l.Ub(1,"span"),l.zc(2),l.Tb(),l.yc(3,O,3,0,"button",16),l.yc(4,D,3,0,"button",17),l.Tb()),2&e){const e=t.$implicit,i=l.gc().$implicit;l.Cb(2),l.Ac(e[i]),l.Cb(1),l.lc("ngIf","actions"===i),l.Cb(1),l.lc("ngIf","actions"===i)}}function z(e,t){1&e&&(l.Sb(0,15),l.yc(1,I,2,1,"th",6),l.yc(2,S,5,3,"td",7),l.Rb()),2&e&&l.lc("matColumnDef",t.$implicit)}function A(e,t){1&e&&l.Pb(0,"tr",20)}function L(e,t){1&e&&l.Pb(0,"tr",21)}let N=(()=>{class e extends v.a{constructor(e,t,i){super(),this.service=e,this.authService=t,this.router=i,this.showCardHeader=!0,this.entityApi="lotteries",this.settings={options:{order:[["name"]]}},this.displayedColumns=["code","name","play","isThreeFigures","actions"],this.filtersColumns=["name","code"]}ngOnInit(){this.title="Loterias",this.subtitle="Apuesta",super.init(this),super.onPageChange()}ngOnChanges(e){this.loadChange&&super.onPageChange()}onEdit(e){this.router.navigate(["/lottery",{lotteryId:e.id}])}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(u.a),l.Ob(h.a),l.Ob(o.f))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-lotteries"]],inputs:{loadChange:"loadChange",showCardHeader:"showCardHeader"},features:[l.zb,l.Ab],decls:15,vars:9,consts:[["fxLayout","row","fxLayoutWrap","wrap"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],[4,"ngIf"],["matInput","","placeholder","Filtrar",3,"ngModel","keyup.enter","ngModelChange"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100"],["mat-header-cell",""],["mat-cell",""],[3,"matColumnDef"],["mat-button","",3,"click",4,"ngIf"],["mat-button","","color","warn",3,"click",4,"ngIf"],["mat-button","",3,"click"],["mat-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"mat-card"),l.yc(3,M,9,2,"mat-card-header",2),l.Ub(4,"mat-card-content"),l.Ub(5,"mat-form-field"),l.Ub(6,"input",3),l.cc("keyup.enter",(function(){return t.onPageChange()}))("ngModelChange",(function(e){return t.filter=e})),l.Tb(),l.Tb(),l.Ub(7,"table",4),l.cc("matSortChange",(function(e){return t.onSortChange(e)})),l.Sb(8,5),l.yc(9,x,2,0,"th",6),l.yc(10,P,2,1,"td",7),l.Rb(),l.yc(11,z,3,1,"ng-container",8),l.yc(12,A,1,0,"tr",9),l.yc(13,L,1,0,"tr",10),l.Tb(),l.Ub(14,"mat-paginator",11),l.cc("page",(function(e){return t.onPaginatorChange(e)})),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&e&&(l.Cb(3),l.lc("ngIf",t.showCardHeader),l.Cb(3),l.lc("ngModel",t.filter),l.Cb(1),l.lc("dataSource",t.dataSource),l.Cb(4),l.lc("ngForOf",t.displayedColumns),l.Cb(1),l.lc("matHeaderRowDef",t.displayedColumns),l.Cb(1),l.lc("matRowDefColumns",t.displayedColumns),l.Cb(1),l.lc("length",t.length)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions))},directives:[d.a,n.k,d.c,g.c,m.b,r.b,r.l,r.o,k.n,U.a,k.c,k.i,k.b,n.j,k.k,k.m,w.a,d.e,d.h,d.g,k.h,k.a,p.a,F.a,k.j,k.l],encapsulation:2}),e})();function E(e,t){if(1&e&&(l.Ub(0,"mat-error"),l.zc(1),l.Tb()),2&e){const e=l.gc();l.Cb(1),l.Ac(e.getErrorMessage("code"))}}function R(e,t){if(1&e&&(l.Ub(0,"mat-error"),l.zc(1),l.Tb()),2&e){const e=l.gc();l.Cb(1),l.Ac(e.getErrorMessage("name"))}}function V(e,t){if(1&e&&(l.Ub(0,"mat-option",20),l.zc(1),l.Tb()),2&e){const e=t.$implicit;l.lc("value",e.value),l.Cb(1),l.Bc(" ",e.text," ")}}function $(e,t){if(1&e&&(l.Ub(0,"mat-error"),l.zc(1),l.Tb()),2&e){const e=l.gc();l.Cb(1),l.Ac(e.getErrorMessage("checkArray"))}}function B(e,t){1&e&&(l.Ub(0,"mat-icon"),l.zc(1,"monetization_on"),l.Tb(),l.zc(2," Loterias "))}function q(e,t){if(1&e&&(l.Ub(0,"div"),l.Ub(1,"div"),l.Pb(2,"app-lotteries",21),l.Tb(),l.Tb()),2&e){const e=l.gc();l.Cb(2),l.lc("loadChange",e.loadLotteries)("showCardHeader",!1)}}const j=function(){return{standalone:!0}};let H=(()=>{class e extends s.a{constructor(e,t,i,n,c,o,a){super(),this.service=e,this.authService=t,this.route=i,this.fb=n,this.router=c,this.changeDetectorRef=o,this._snackBar=a,this.entityApi="lotteries",this.weekDays={monday:!1,tuesday:!1,wednesday:!1,thursday:!1,friday:!1,saturday:!1,sunday:!1},this.enumLotteryTemporality=[{value:null,text:"Ninguna"},{value:"morning",text:"Ma\xf1ana"},{value:"afternoon",text:"Tarde"},{value:"night",text:"Noche"}],this.configFormGroup=e=>{let t={field:"name"},i={field:"code"};e&&(t.options={where:{id:{$ne:e}}},i.options={where:{id:{$ne:e}}}),this.entityForm=new r.f({name:new r.d("",[r.s.required],[this.service.takenValidator(this.entityApi,t)]),code:new r.d("",[r.s.required],[this.service.takenValidator(this.entityApi,i)]),checkArray:this.fb.array([],[r.s.required])})}}ngOnInit(){this.title="Loteria",this.subtitle="Apuesta",this.iniEntity(),super.init(this),this.route.params.subscribe(e=>{e&&e.lotteryId?(this.configFormGroup(e.lotteryId),super.getEntity(e.lotteryId).subscribe(()=>{for(let t in this.weekDays)this.weekDays[t]=!1;let e=this.entity.play.split(",");for(let t of e)this.weekDays[t]=!0,this.playDaysChange({checked:!0,source:{value:t}})})):this.configFormGroup()})}iniEntity(){this.entity={code:null,name:null,play:null,isThreeFigures:!1,temporality:null,closing:null}}new(){for(let e in this.weekDays)this.weekDays[e]=!1;if(this.entityForm){const e=this.entityForm.get("checkArray");let t=e.controls.length;for(let i=0;i<t;i++)e.removeAt(0)}this.iniEntity(),this.router.navigate(["/lottery"])}playDaysChange(e){const t=this.entityForm.get("checkArray");if(e.checked)t.push(new r.d(e.source.value));else{let i=0;t.controls.forEach(n=>{n.value!=e.source.value?i++:t.removeAt(i)})}let i="";t.controls.forEach(e=>{i+=e.value+","}),i=i.substring(0,i.length-1),this.entity.play=i||null}afterSaved(){this.loadLotteries=(new Date).toString()}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(u.a),l.Ob(h.a),l.Ob(o.a),l.Ob(r.c),l.Ob(o.f),l.Ob(l.h),l.Ob(b.a))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-lottery"]],features:[l.zb],decls:62,vars:49,consts:[["fxLayout","row","fxLayoutWrap","wrap"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100"],[3,"formGroup"],[2,"float","left","width","20%","margin-right","10px"],["matInput","","placeholder","Entre c\xf3digo","formControlName","code","required","",3,"ngModel","ngModelChange"],[4,"ngIf"],[2,"width","20%","margin-right","10px"],["matInput","","placeholder","Entre nombre","formControlName","name","required","",3,"ngModel","ngModelChange"],["matNativeControl","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[2,"width","20%"],["matInput","","placeholder","Entre hora de cierre","type","time",3,"ngModel","ngModelOptions","ngModelChange"],[2,"margin-right","10px",3,"ngModel","ngModelOptions","value","ngModelChange","change"],["fxLayout","row","fxLayoutWrap","wrap",2,"margin-text-outline","10px","margin-top","10px"],[2,"margin-right","10px",3,"ngModel","ngModelOptions","ngModelChange"],["mat-fab","","color","accent",3,"disabled","click"],["mat-fab","","color","primary",3,"click"],["mat-tab-label",""],["matTabContent",""],[3,"value"],[3,"loadChange","showCardHeader"]],template:function(e,t){1&e&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"mat-card"),l.Ub(3,"mat-card-header"),l.Ub(4,"mat-card-title"),l.Ub(5,"div",0),l.Ub(6,"div",2),l.zc(7),l.Tb(),l.Tb(),l.Tb(),l.Ub(8,"mat-card-subtitle"),l.Ub(9,"div",0),l.Ub(10,"div",2),l.zc(11),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(12,"mat-card-content"),l.Ub(13,"form",3),l.Ub(14,"div",0),l.Ub(15,"div",2),l.Ub(16,"mat-form-field",4),l.Ub(17,"input",5),l.cc("ngModelChange",(function(e){return t.entity.code=e})),l.Tb(),l.yc(18,E,2,1,"mat-error",6),l.Tb(),l.Ub(19,"mat-form-field",7),l.Ub(20,"input",8),l.cc("ngModelChange",(function(e){return t.entity.name=e})),l.Tb(),l.yc(21,R,2,1,"mat-error",6),l.Tb(),l.Ub(22,"mat-form-field",7),l.Ub(23,"mat-label"),l.zc(24,"Seleccione temporalidad"),l.Tb(),l.Ub(25,"mat-select",9),l.cc("ngModelChange",(function(e){return t.entity.temporality=e})),l.yc(26,V,2,2,"mat-option",10),l.Tb(),l.Tb(),l.Ub(27,"mat-form-field",11),l.Ub(28,"input",12),l.cc("ngModelChange",(function(e){return t.entity.closing=e})),l.Tb(),l.Tb(),l.zc(29),l.Tb(),l.Tb(),l.Ub(30,"div",0),l.Ub(31,"div",2),l.zc(32),l.Ub(33,"mat-checkbox",13),l.cc("ngModelChange",(function(e){return t.weekDays.monday=e}))("change",(function(e){return t.playDaysChange(e)})),l.zc(34,"Lunes"),l.Tb(),l.Ub(35,"mat-checkbox",13),l.cc("ngModelChange",(function(e){return t.weekDays.tuesday=e}))("change",(function(e){return t.playDaysChange(e)})),l.zc(36,"Martes"),l.Tb(),l.Ub(37,"mat-checkbox",13),l.cc("ngModelChange",(function(e){return t.weekDays.wednesday=e}))("change",(function(e){return t.playDaysChange(e)})),l.zc(38,"Mi\xe9rcoles"),l.Tb(),l.Ub(39,"mat-checkbox",13),l.cc("ngModelChange",(function(e){return t.weekDays.thursday=e}))("change",(function(e){return t.playDaysChange(e)})),l.zc(40,"Jueves"),l.Tb(),l.Ub(41,"mat-checkbox",13),l.cc("ngModelChange",(function(e){return t.weekDays.friday=e}))("change",(function(e){return t.playDaysChange(e)})),l.zc(42,"Viernes"),l.Tb(),l.Ub(43,"mat-checkbox",13),l.cc("ngModelChange",(function(e){return t.weekDays.saturday=e}))("change",(function(e){return t.playDaysChange(e)})),l.zc(44,"Sabado"),l.Tb(),l.Ub(45,"mat-checkbox",13),l.cc("ngModelChange",(function(e){return t.weekDays.sunday=e}))("change",(function(e){return t.playDaysChange(e)})),l.zc(46,"Domingo"),l.Tb(),l.yc(47,$,2,1,"mat-error",6),l.Tb(),l.Tb(),l.Ub(48,"div",14),l.Ub(49,"div",2),l.Ub(50,"mat-checkbox",15),l.cc("ngModelChange",(function(e){return t.entity.isThreeFigures=e})),l.zc(51,"Es tres cifras"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(52,"mat-card-actions"),l.Ub(53,"button",16),l.cc("click",(function(){return t.save()})),l.zc(54,"Salvar"),l.Tb(),l.Ub(55,"button",17),l.cc("click",(function(){return t.new()})),l.zc(56,"Nuevo"),l.Tb(),l.Tb(),l.Ub(57,"mat-card-footer"),l.Ub(58,"mat-tab-group"),l.Ub(59,"mat-tab"),l.yc(60,B,3,0,"ng-template",18),l.yc(61,q,3,2,"ng-template",19),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&e&&(l.Cb(7),l.Bc(" ",t.title," "),l.Cb(4),l.Bc(" ",t.subtitle," "),l.Cb(2),l.lc("formGroup",t.entityForm),l.Cb(4),l.lc("ngModel",t.entity.code),l.Cb(1),l.lc("ngIf",t.entityForm.invalid),l.Cb(2),l.lc("ngModel",t.entity.name),l.Cb(1),l.lc("ngIf",t.entityForm.invalid),l.Cb(4),l.lc("ngModel",t.entity.temporality)("ngModelOptions",l.mc(39,j)),l.Cb(1),l.lc("ngForOf",t.enumLotteryTemporality),l.Cb(2),l.lc("ngModel",t.entity.closing)("ngModelOptions",l.mc(40,j)),l.Cb(1),l.Bc(" ",t.entity.closing," "),l.Cb(3),l.Bc(" ","Juega: "," "),l.Cb(1),l.lc("ngModel",t.weekDays.monday)("ngModelOptions",l.mc(41,j))("value","monday"),l.Cb(2),l.lc("ngModel",t.weekDays.tuesday)("ngModelOptions",l.mc(42,j))("value","tuesday"),l.Cb(2),l.lc("ngModel",t.weekDays.wednesday)("ngModelOptions",l.mc(43,j))("value","wednesday"),l.Cb(2),l.lc("ngModel",t.weekDays.thursday)("ngModelOptions",l.mc(44,j))("value","thursday"),l.Cb(2),l.lc("ngModel",t.weekDays.friday)("ngModelOptions",l.mc(45,j))("value","friday"),l.Cb(2),l.lc("ngModel",t.weekDays.saturday)("ngModelOptions",l.mc(46,j))("value","saturday"),l.Cb(2),l.lc("ngModel",t.weekDays.sunday)("ngModelOptions",l.mc(47,j))("value","sunday"),l.Cb(2),l.lc("ngIf",t.entityForm.invalid),l.Cb(3),l.lc("ngModel",t.entity.isThreeFigures)("ngModelOptions",l.mc(48,j)),l.Cb(3),l.lc("disabled",!t.entityForm.valid))},directives:[d.a,d.e,d.h,d.g,d.c,r.t,r.m,r.g,g.c,m.b,r.b,r.l,r.e,r.r,n.k,g.f,f.a,r.o,n.j,y.a,d.b,p.a,d.d,T.c,T.a,T.d,T.b,g.b,C.n,F.a,N],encapsulation:2}),e})();var G=i("7Cbv");function K(e,t){if(1&e&&(l.Ub(0,"mat-option",26),l.zc(1),l.Tb()),2&e){const e=t.$implicit;l.lc("value",e.value),l.Cb(1),l.Bc(" ",e.text," ")}}function J(e,t){if(1&e&&(l.Ub(0,"mat-error"),l.zc(1),l.Tb()),2&e){const e=l.gc();l.Cb(1),l.Ac(e.getErrorMessage("employeeId"))}}const _=function(){return{standalone:!0}},W=function(e){return{color:e}};function Y(e,t){if(1&e){const e=l.Vb();l.Ub(0,"mat-checkbox",27),l.cc("ngModelChange",(function(i){return l.sc(e),t.$implicit.check=i}))("change",(function(t){return l.sc(e),l.gc().lotteryChange(t)})),l.zc(1),l.Tb()}if(2&e){const e=t.$implicit;l.lc("ngModel",e.check)("ngModelOptions",l.mc(5,_))("value",e.id)("ngStyle",l.nc(6,W,e.color)),l.Cb(1),l.Ac(e.name)}}function Z(e,t){if(1&e&&(l.Ub(0,"mat-error"),l.zc(1),l.Tb()),2&e){const e=l.gc();l.Cb(1),l.Ac(e.getErrorMessage("checkLotteries"))}}function X(e,t){if(1&e&&(l.Ub(0,"mat-error"),l.zc(1),l.Tb()),2&e){const e=l.gc();l.Cb(1),l.Ac(e.getErrorMessage("number"))}}function Q(e,t){if(1&e){const e=l.Vb();l.Ub(0,"mat-form-field",6),l.Ub(1,"input",28),l.cc("keypress",(function(t){return l.sc(e),l.gc().numberOnly(t)}))("ngModelChange",(function(t){return l.sc(e),l.gc().entity.firstThreePrice=t}))("change",(function(){return l.sc(e),l.gc().firstThreePriceChange()})),l.Tb(),l.Tb()}if(2&e){const e=l.gc();l.Cb(1),l.lc("ngModel",e.entity.firstThreePrice)}}function ee(e,t){if(1&e){const e=l.Vb();l.Ub(0,"mat-form-field",29),l.Ub(1,"input",30),l.cc("keypress",(function(t){return l.sc(e),l.gc().numberOnly(t)}))("ngModelChange",(function(t){return l.sc(e),l.gc().entity.chockFourFigurePrice=t}))("change",(function(){return l.sc(e),l.gc().chockFourFigurePriceChange()})),l.Tb(),l.Tb()}if(2&e){const e=l.gc();l.Cb(1),l.lc("ngModelOptions",l.mc(2,_))("ngModel",e.entity.chockFourFigurePrice)}}function te(e,t){if(1&e){const e=l.Vb();l.Ub(0,"mat-form-field",31),l.Ub(1,"input",32),l.cc("keypress",(function(t){return l.sc(e),l.gc().numberOnly(t)}))("ngModelChange",(function(t){return l.sc(e),l.gc().entity.chockThreeFigurePrice=t}))("change",(function(){return l.sc(e),l.gc().chockThreeFigurePriceChange()})),l.Tb(),l.Tb()}if(2&e){const e=l.gc();l.Cb(1),l.lc("ngModelOptions",l.mc(2,_))("ngModel",e.entity.chockThreeFigurePrice)}}function ie(e,t){if(1&e&&(l.Ub(0,"mat-error"),l.zc(1),l.Tb()),2&e){const e=l.gc();l.Cb(1),l.Ac(e.getErrorMessage("checkChock"))}}function ne(e,t){if(1&e){const e=l.Vb();l.Ub(0,"mat-form-field",6),l.Ub(1,"input",33),l.cc("keypress",(function(t){return l.sc(e),l.gc().numberOnly(t)}))("ngModelChange",(function(t){return l.sc(e),l.gc().entity.lastThreePrice=t}))("change",(function(){return l.sc(e),l.gc().lastThreePriceChange()})),l.Tb(),l.Tb()}if(2&e){const e=l.gc();l.Cb(1),l.lc("ngModel",e.entity.lastThreePrice)}}function re(e,t){if(1&e){const e=l.Vb();l.Ub(0,"mat-form-field",29),l.Ub(1,"input",34),l.cc("keypress",(function(t){return l.sc(e),l.gc().numberOnly(t)}))("ngModelChange",(function(t){return l.sc(e),l.gc().entity.combinedFourFigurePrice=t}))("change",(function(){return l.sc(e),l.gc().combinedFourFigurePriceChange()})),l.Tb(),l.Tb()}if(2&e){const e=l.gc();l.Cb(1),l.lc("ngModelOptions",l.mc(2,_))("ngModel",e.entity.combinedFourFigurePrice)}}function ce(e,t){if(1&e){const e=l.Vb();l.Ub(0,"mat-form-field",31),l.Ub(1,"input",35),l.cc("keypress",(function(t){return l.sc(e),l.gc().numberOnly(t)}))("ngModelChange",(function(t){return l.sc(e),l.gc().entity.combinedThreeFigurePrice=t}))("change",(function(){return l.sc(e),l.gc().combinedThreeFigurePriceChange()})),l.Tb(),l.Tb()}if(2&e){const e=l.gc();l.Cb(1),l.lc("ngModelOptions",l.mc(2,_))("ngModel",e.entity.combinedThreeFigurePrice)}}function oe(e,t){if(1&e&&(l.Ub(0,"mat-error"),l.zc(1),l.Tb()),2&e){const e=l.gc();l.Cb(1),l.Ac(e.getErrorMessage("checkCombined"))}}function ae(e,t){if(1&e&&(l.Ub(0,"th",39),l.zc(1),l.Tb()),2&e){const e=l.gc().$implicit;l.Cb(1),l.Bc(" ",e," ")}}function se(e,t){if(1&e){const e=l.Vb();l.Ub(0,"button",43),l.cc("click",(function(){return l.sc(e),l.gc(3).preventEnter()})),l.Tb()}}function le(e,t){if(1&e){const e=l.Vb();l.Ub(0,"button",44),l.cc("click",(function(){l.sc(e);const t=l.gc().$implicit;return l.gc(2).onDeleteCustom(t)})),l.Ub(1,"mat-icon"),l.zc(2,"delete_outline"),l.Tb(),l.Tb()}}function ue(e,t){if(1&e&&(l.Ub(0,"td",40),l.Ub(1,"span"),l.zc(2),l.Tb(),l.yc(3,se,1,0,"button",41),l.yc(4,le,3,0,"button",42),l.Tb()),2&e){const e=t.$implicit,i=l.gc().$implicit;l.Cb(2),l.Ac(e[i]),l.Cb(1),l.lc("ngIf","actions"===i),l.Cb(1),l.lc("ngIf","actions"===i)}}function he(e,t){1&e&&(l.Sb(0,36),l.yc(1,ae,2,1,"th",37),l.yc(2,ue,5,3,"td",38),l.Rb()),2&e&&l.lc("matColumnDef",t.$implicit)}function be(e,t){1&e&&l.Pb(0,"tr",45)}function de(e,t){1&e&&l.Pb(0,"tr",46)}function ge(e,t){if(1&e&&(l.Ub(0,"mat-error"),l.zc(1),l.Tb()),2&e){const e=l.gc();l.Cb(1),l.Ac(e.getErrorMessage("checkNumbers"))}}let me=(()=>{class e extends s.a{constructor(e,t,i,n,c,o,a){super(),this.service=e,this.authService=t,this.route=i,this.fb=n,this.router=c,this.changeDetectorRef=o,this._snackBar=a,this.entityApi="bets",this.entityDetailApi="details",this.entityApiEmployees="employees",this.entityApiLotteries="lotteries",this.entityNumbers="numbers",this.employees=[],this.lotteries=[],this.number=null,this.displayedColumns=["number","price","actions"],this.configFormGroup=e=>{this.entityForm=new r.f({employeeId:new r.d("",[r.s.required]),checkLotteries:this.fb.array([],[r.s.required]),checkNumbers:this.fb.array([],[r.s.required]),price:new r.d("",[r.s.required]),firstThreePrice:new r.d(""),lastThreePrice:new r.d(""),checkCombined:this.fb.array([]),checkChock:this.fb.array([]),combinedThreeFigurePrice:new r.d(""),total:new r.d(""),number:new r.d("",null,[this.service.takenValidator(this.entityNumbers,{field:"number",ValidationError:"forbidden"})])})}}ngOnInit(){this.title="Apuesta",this.subtitle="Apuesta",this.iniEntity(),super.init(this),this.route.params.subscribe(e=>{this.service.getSelect(this.entityApiEmployees,{value:"id",text:"code",options:{order:[["code","asc"]]}}).subscribe(e=>{this.employees=e});let t="";switch((new Date).getDay()){case 0:t="sunday";break;case 1:t="monday";break;case 2:t="tuesday";break;case 3:t="wednesday";break;case 4:t="thursday";break;case 5:t="friday";break;case 6:t="saturday"}let i=0,n=0,c=()=>{if(i++,i==n){let e=[],t=[];if(this.entity&&this.entity.details&&this.entity.details.length){for(let t of this.entity.details)e.find(e=>e.id==t.lotteryId)||e.push(t.lottery);for(let i of this.entity.details)if(!t.find(e=>e.number==i.number)){let n=this.entity.details.filter(e=>e.number==i.number),r=e.filter(e=>1==e.isThreeFigures),c=e.filter(e=>0==e.isThreeFigures);if(3==i.number.length)if(n.length==r.length)t.push(i);else{this.entity.details.filter(e=>e.number.length>3);let e=(n.length-c.length*r.length)/r.length;e<1&&(e=(n.length-c.length)/r.length);for(let n=0;n<e;n++)t.push(i)}else if(n.length==c.length)t.push(i);else{let e=n.length/c.length;for(let n=0;n<e;n++)t.push(i)}}for(let e of t)this.addCheckNumbers(e.number,e.isFirstThree,e.isLastThreem);for(let t of e){let e=this.lotteries.find(e=>e.id==t.id);e&&(e.check=!0,this.lotteryChange({checked:!0,source:{value:e.id}}))}}if(this.entity.chock){const e=this.entityForm.get("checkChock");this.entityForm.get("checkChock").setValidators([r.s.required]),e.push(new r.d({id:Object(G.a)(),chockFourFigure:!0})),e.push(new r.d({id:Object(G.a)(),chockFourFigure:!1}))}if(this.entity.combined){const e=this.entityForm.get("checkCombined");this.entityForm.get("checkCombined").setValidators([r.s.required]),e.push(new r.d({id:Object(G.a)(),combinedFourFigure:!0})),e.push(new r.d({id:Object(G.a)(),combinedFourFigure:!1}))}}};n++,this.service.get(this.entityApiLotteries,{options:{where:{play:{$like:"%"+t+"%"}},order:[["name","asc"]]}}).subscribe(e=>{let t=[{value:"morning",color:"green"},{value:"afternoon",color:"crimson"},{value:"night",color:"blue"},{value:null,color:"Ninguna"}],i=e;for(let n of t){let e=i.filter(e=>e.temporality==n.value);for(let t of e)t.color=n.color,this.lotteries.push(t)}c()}),e&&e.betId?(n++,this.configFormGroup(e.betId),super.getEntity(e.betId,{options:{include:[{association:"details",include:[{association:"lottery"}]},{association:"employee"}]}}).subscribe(()=>{c()})):this.configFormGroup()})}iniEntity(){let e=null;this.entity&&this.entity.employeeId&&(e=this.entity.employeeId),this.entity={employeeId:null,userId:null,price:null,firstThree:!1,firstThreePrice:null,lastThree:!1,lastThreePrice:null,chock:!1,chockFourFigurePrice:null,chockThreeFigurePrice:null,combined:!1,combinedFourFigurePrice:null,combinedThreeFigurePrice:null,total:null,details:null},this.entity.employeeId=e}new(){this.iniEntity();for(let e of this.lotteries)e.check=!1;if(this.entityForm){const e=this.entityForm.get("checkNumbers");let t=e.controls.length;for(let n=0;n<t;n++)e.removeAt(0);const i=this.entityForm.get("checkLotteries");t=i.controls.length;for(let n=0;n<t;n++)i.removeAt(0)}this.dataSource=new k.o([])}lotteryChange(e){const t=this.entityForm.get("checkLotteries");let i=this.lotteries.find(t=>t.id==e.source.value),n=!1,c=!1,o=0;for(let r of t.value)if(r.isThreeFigures&&(o+=1,c=!0,o>=2)){n=!0;break}if(e.checked)t.push(new r.d({id:e.source.value,isThreeFigures:i.isThreeFigures}));else{let i=0;t.controls.forEach(n=>{n.value.id!=e.source.value?i++:t.removeAt(i)})}this.validateAllNumbers(i,n,c)}add(){const e=this.entityForm.get("number");if(this.number&&this.number.toString().length>2&&e.valid){let e=!1,t=!1;3==this.number.toString().length&&(t=!0),this.addCheckNumbers(this.number,e,t),t=!1,(this.findThreeFigures()||this.entity.lastThree)&&(t=!0,this.number.toString().length>3&&this.addCheckNumbers(this.number.substring(1,this.number.length),e,t),t=!1),this.entity.firstThree&&(e=!0,this.number.toString().length>3&&this.addCheckNumbers(this.number.substring(0,this.number.length-1),e,t)),this.number=null}}findThreeFigures(){let e=!1;const t=this.entityForm.get("checkLotteries");if(t.value)for(let i of t.value)if(this.lotteries.find(e=>e.id==i.id).isThreeFigures){e=!0;break}return e}addCheckNumbers(e,t,i){this.entityForm.get("checkNumbers").push(new r.d({id:Object(G.a)(),number:e,isFirstThree:t,isLastThree:i,price:this.entity.price})),this.refreshGrid()}onDeleteCustom(e){const t=this.entityForm.get("checkNumbers");let i=t.value.findIndex(t=>t.id==e.id);t.removeAt(i),this.dataSource=new k.o(t.value),this.calculateTotal();let n=[],r=[];this.entity&&this.entity.details&&this.entity.details.length&&(n=this.entity.details.filter(t=>t.number==e.number));for(let c of n)r.find(e=>e.lotteryId==c.lotteryId)||r.push(c);r=r.map(e=>e.id),this.view.service.deleteOptions(this.entityDetailApi,{options:{where:{id:r}}}).subscribe(e=>{})}getDisabled(){let e=!0;return this.number&&this.number.toString().length>2&&(e=!1),e}numberOnly(e){const t=e.which?e.which:e.keyCode;return!(t>31&&(t<48||t>57))}beforeSaved(){let e=!0,t=this.authService.getItem("currentUser");this.entity.userId=t.id;let i=this.entity.details||[];this.entity.details=[];let n,r=!0;const c=this.entityForm.get("checkLotteries");for(let a of c.value)if(n=this.lotteries.find(e=>e.id==a.id),!n.isThreeFigures){r=!1;break}const o=this.entityForm.get("checkNumbers");if(r)for(let a of o.value)if(a.number.length>3){alert("Solo 3 cifras "+n.name),e=!1;break}if(0==e)return e;for(let a of c.value)for(let e of o.value){let t=4==e.number.length;if(n=this.lotteries.find(e=>e.id==a.id),n&&n.isThreeFigures&&t);else{let r={lotteryId:n.id,number:e.number,price:e.price,accumulated:e.price,isFourFigure:t,isFirstThree:e.isFirstThree,isLastThree:e.isLastThree},c=i.find(e=>e.lotteryId==r.lotteryId&&e.number==r.number),o=i.findIndex(e=>e.lotteryId==r.lotteryId&&e.number==r.number);c?(r.id=c.id,i.splice(o,1)):r.id=Object(G.a)(),this.entity.details.push(r)}}if(r)for(let a of this.entity.details)a.number.length>3&&(alert("Solo 3 cifras "+n.name),e=!1);return e}validateAllNumbers(e,t,i){if(e.isThreeFigures&&!this.entity.lastThree&&!t){const t=this.entityForm.get("checkNumbers");if(e.check){if(!i)for(let e of t.value)if(4==e.number.length){let t=!1,i=!0;this.addCheckNumbers(e.number.substring(1,e.number.length),t,i)}}else for(let e of t.value)3==e.number.length&&e.isLastThree&&this.onDeleteCustom({id:e.id})}this.calculateTotal()}refreshGrid(){const e=this.entityForm.get("checkNumbers");for(let t of e.value)t.price=this.entity.price,t.isFirstThree&&this.entity.firstThree&&(t.price=this.entity.firstThreePrice),t.isLastThree&&this.entity.lastThree&&(t.price=this.entity.lastThreePrice);this.dataSource=new k.o(e.value),this.calculateTotal()}preventEnter(){}firstThreeChange(e){const t=this.entityForm.get("checkNumbers");if(e.checked){this.entity.firstThreePrice=this.entity.price,this.entityForm.get("firstThreePrice").setValidators([r.s.required]);for(let e of t.value)if(4==e.number.length){let t=!0,i=!1;this.addCheckNumbers(e.number.substring(0,e.number.length-1),t,i)}}else{this.entityForm.get("firstThreePrice").clearValidators();let e=[];for(let i of t.value)4==i.number.length&&e.push(i);for(let i of e){let e=i.number.substring(0,i.number.length-1),n=t.value.find(t=>t.number==e);this.onDeleteCustom({id:n.id})}}this.entityForm.get("firstThreePrice").updateValueAndValidity(),this.changeDetectorRef.detectChanges()}firstThreePriceChange(){const e=this.entityForm.get("checkNumbers");for(let t of e.value)3==t.number.length&&t.isFirstThree&&(t.price=this.entity.firstThreePrice);this.calculateTotal()}lastThreeChange(e){let t=this.findThreeFigures();const i=this.entityForm.get("checkNumbers");if(e.checked){if(this.entity.lastThreePrice=this.entity.price,this.entityForm.get("lastThreePrice").setValidators([r.s.required]),!t)for(let e of i.value)if(4==e.number.length){let t=!1,i=!0;this.addCheckNumbers(e.number.substring(1,e.number.length),t,i)}}else if(this.entityForm.get("lastThreePrice").clearValidators(),!t)for(let n of i.value)3==n.number.length&&n.isLastThree&&this.onDeleteCustom({id:n.id});this.entityForm.get("lastThreePrice").updateValueAndValidity(),this.changeDetectorRef.detectChanges()}lastThreePriceChange(){const e=this.entityForm.get("checkNumbers");for(let t of e.value)3==t.number.length&&t.isLastThree&&(t.price=this.entity.lastThreePrice);this.calculateTotal()}chockChange(e){const t=this.entityForm.get("checkChock");if(e.checked)this.entityForm.get("checkChock").setValidators([r.s.required]),this.entity.price&&(this.entity.chockFourFigurePrice=this.entity.price,this.entity.chockThreeFigurePrice=this.entity.price,t.push(new r.d({id:Object(G.a)(),chockFourFigure:!0})),t.push(new r.d({id:Object(G.a)(),chockFourFigure:!1})));else{this.entity.chockFourFigurePrice=null,this.entity.chockThreeFigurePrice=null;let e=0;t.controls.forEach(i=>{t.removeAt(e),e++}),this.entityForm.get("checkChock").clearValidators()}this.entityForm.get("checkChock").updateValueAndValidity(),this.calculateTotal()}chockFourFigurePriceChange(){const e=this.entityForm.get("checkChock");if(this.entity.chockFourFigurePrice)e.push(new r.d({id:Object(G.a)(),ChockFourFigure:!0}));else{let t=0;e.controls.forEach(i=>{e.removeAt(t)})}this.calculateTotal()}chockThreeFigurePriceChange(){const e=this.entityForm.get("checkChock");if(this.entity.chockThreeFigurePrice)e.push(new r.d({id:Object(G.a)(),ChockFourFigure:!1}));else{let t=0;e.controls.forEach(i=>{e.removeAt(t)})}this.calculateTotal()}combinedChange(e){const t=this.entityForm.get("checkCombined");if(e.checked)this.entityForm.get("checkCombined").setValidators([r.s.required]),this.entity.price&&(this.entity.combinedFourFigurePrice=this.entity.price,this.entity.combinedThreeFigurePrice=this.entity.price,t.push(new r.d({id:Object(G.a)(),combinedFourFigure:!0})),t.push(new r.d({id:Object(G.a)(),combinedFourFigure:!1})));else{this.entity.combinedFourFigurePrice=null,this.entity.combinedThreeFigurePrice=null;let e=0;t.controls.forEach(i=>{t.removeAt(e),e++}),this.entityForm.get("checkCombined").clearValidators()}this.entityForm.get("checkCombined").updateValueAndValidity(),this.calculateTotal()}combinedFourFigurePriceChange(){const e=this.entityForm.get("checkCombined");if(this.entity.combinedFourFigurePrice)e.push(new r.d({id:Object(G.a)(),combinedFourFigure:!0}));else{let t=0;e.controls.forEach(i=>{e.removeAt(t)})}this.calculateTotal()}combinedThreeFigurePriceChange(){const e=this.entityForm.get("checkCombined");if(this.entity.combinedThreeFigurePrice)e.push(new r.d({id:Object(G.a)(),combinedFourFigure:!1}));else{let t=0;e.controls.forEach(i=>{e.removeAt(t)})}this.calculateTotal()}calculateTotal(){this.entity.total=0;let e=0,t=0,i=0,n=0,r=0,c=0;const o=this.entityForm.get("checkLotteries");let a;for(let l of o.value)a=this.lotteries.find(e=>e.id==l.id),a.isThreeFigures?t+=1:e+=1;const s=this.entityForm.get("checkNumbers");for(let l of s.value)3==l.number.length?(n+=1,l.isFirstThree?r+=1:c+=1):i+=1;this.entity.total=this.entity.price*i*e,this.entity.firstThree?(this.entity.total+=this.entity.firstThreePrice*r*(e+t),c&&(this.entity.total+=this.entity.lastThree?this.entity.lastThreePrice*c*(e+t):this.entity.price*c*(e+t))):this.entity.total+=this.entity.lastThree?this.entity.lastThreePrice*c*(e+t):this.entity.price*n*(e+t),this.entity.chock&&(n?(this.entity.total+=this.entity.chockFourFigurePrice*i*e,this.entity.total+=this.entity.chockThreeFigurePrice*n*(e+t)):this.entity.total+=this.entity.chockFourFigurePrice*i*(e+t)),this.entity.combined&&(n?(this.entity.total+=this.entity.combinedFourFigurePrice*i*e,this.entity.total+=this.entity.combinedThreeFigurePrice*n*(e+t)):this.entity.total+=this.entity.combinedFourFigurePrice*i*(e+t)),this.changeDetectorRef.detectChanges()}lotteryAllChange(e){if(e.checked)for(let t of this.lotteries)t.check=!0,this.lotteryChange({source:{value:t.id}});else for(let t of this.lotteries)t.check=!1,this.lotteryChange({source:{value:t.id}})}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(u.a),l.Ob(h.a),l.Ob(o.a),l.Ob(r.c),l.Ob(o.f),l.Ob(l.h),l.Ob(b.a))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-bet"]],features:[l.zb],decls:72,vars:39,consts:[["fxLayout","row","fxLayoutWrap","wrap"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100"],[3,"formGroup"],["fxLayout","row","fxLayoutWrap","wrap",2,"overflow","hidden"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100",2,"float","left","width","50%"],[2,"width","95%"],["matNativeControl","","formControlName","employeeId","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matInput","","formControlName","total","type","number","placeholder","Total","onKeyPress","if(this.value.length==9) return false;","autocomplete","off",3,"ngModel","readonly","keypress","ngModelChange"],["style","margin-right: 25px;",3,"ngModel","ngModelOptions","value","ngStyle","ngModelChange","change",4,"ngFor","ngForOf"],["matInput","","placeholder","Entre number","formControlName","number","onKeyPress","if(this.value.length===4) return false;","autocomplete","off",3,"ngModel","keypress","ngModelChange","keyup.enter"],["matInput","","formControlName","price","type","number","placeholder","Entre Precio","onKeyPress","if(this.value.length==9) return false;","autocomplete","off","required","",3,"ngModel","keypress","ngModelChange","change"],["fxLayout","row","fxLayoutWrap","wrap",2,"margin-text-outline","10px","margin-top","10px","overflow","hidden"],[2,"margin-right","10px",3,"ngModel","ngModelOptions","ngModelChange","change"],["style","width: 95%;",4,"ngIf"],["style","width: 32%;margin-right: 10px;",4,"ngIf"],["style","width: 32%",4,"ngIf"],["fxLayout","row","fxLayoutWrap","wrap",2,"margin-top","10px"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-fab","","color","accent",3,"disabled","click"],["mat-fab","","color","primary",3,"click"],[3,"value"],[2,"margin-right","25px",3,"ngModel","ngModelOptions","value","ngStyle","ngModelChange","change"],["matInput","","formControlName","firstThreePrice","type","number","placeholder","Entre precio, tres primeras","onKeyPress","if(this.value.length==9) return false;","autocomplete","off","required","",3,"ngModel","keypress","ngModelChange","change"],[2,"width","32%","margin-right","10px"],["matInput","","type","number","placeholder","Cuatro cifras, cu\xf1a","onKeyPress","if(this.value.length==9) return false;","autocomplete","off",3,"ngModelOptions","ngModel","keypress","ngModelChange","change"],[2,"width","32%"],["matInput","","type","number","placeholder","Tres cifras, cu\xf1a","onKeyPress","if(this.value.length==9) return false;","autocomplete","off",3,"ngModelOptions","ngModel","keypress","ngModelChange","change"],["matInput","","formControlName","lastThreePrice","type","number","placeholder","Entre precio, tres ultimas","onKeyPress","if(this.value.length==9) return false;","autocomplete","off","required","",3,"ngModel","keypress","ngModelChange","change"],["matInput","","type","number","placeholder","Cuatro cifras, combinado","onKeyPress","if(this.value.length==9) return false;","autocomplete","off",3,"ngModelOptions","ngModel","keypress","ngModelChange","change"],["matInput","","type","number","placeholder","Tres cifras, combinado","onKeyPress","if(this.value.length==9) return false;","autocomplete","off",3,"ngModelOptions","ngModel","keypress","ngModelChange","change"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],["mat-button","",3,"click",4,"ngIf"],["mat-button","","color","warn",3,"click",4,"ngIf"],["mat-button","",3,"click"],["mat-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"mat-card"),l.Ub(3,"mat-card-header"),l.Ub(4,"mat-card-title"),l.Ub(5,"div",0),l.Ub(6,"div",2),l.zc(7),l.Tb(),l.Tb(),l.Tb(),l.Ub(8,"mat-card-subtitle"),l.Ub(9,"div",0),l.Ub(10,"div",2),l.zc(11),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(12,"mat-card-content"),l.Ub(13,"form",3),l.Ub(14,"div",4),l.Ub(15,"div",5),l.Ub(16,"mat-form-field",6),l.Ub(17,"mat-label"),l.zc(18,"Seleccione C\xf3digo"),l.Tb(),l.Ub(19,"mat-select",7),l.cc("ngModelChange",(function(e){return t.entity.employeeId=e})),l.yc(20,K,2,2,"mat-option",8),l.Tb(),l.yc(21,J,2,1,"mat-error",9),l.Tb(),l.Tb(),l.Ub(22,"div",5),l.Ub(23,"mat-form-field"),l.Ub(24,"input",10),l.cc("keypress",(function(e){return t.numberOnly(e)}))("ngModelChange",(function(e){return t.entity.total=e})),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(25,"div",0),l.Ub(26,"div",2),l.yc(27,Y,2,8,"mat-checkbox",11),l.yc(28,Z,2,1,"mat-error",9),l.Tb(),l.Tb(),l.Ub(29,"div",0),l.Ub(30,"div",2),l.Ub(31,"mat-form-field"),l.Ub(32,"input",12),l.cc("keypress",(function(e){return t.numberOnly(e)}))("ngModelChange",(function(e){return t.number=e}))("keyup.enter",(function(){return t.add()})),l.Tb(),l.yc(33,X,2,1,"mat-error",9),l.Tb(),l.Tb(),l.Tb(),l.Ub(34,"div",0),l.Ub(35,"div",2),l.Ub(36,"mat-form-field"),l.Ub(37,"input",13),l.cc("keypress",(function(e){return t.numberOnly(e)}))("ngModelChange",(function(e){return t.entity.price=e}))("change",(function(){return t.refreshGrid()})),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(38,"div",14),l.Ub(39,"div",5),l.Ub(40,"mat-checkbox",15),l.cc("ngModelChange",(function(e){return t.entity.firstThree=e}))("change",(function(e){return t.firstThreeChange(e)})),l.zc(41,"Tres primeras "),l.Tb(),l.yc(42,Q,2,1,"mat-form-field",16),l.Tb(),l.Ub(43,"div",5),l.Ub(44,"mat-checkbox",15),l.cc("ngModelChange",(function(e){return t.entity.chock=e}))("change",(function(e){return t.chockChange(e)})),l.zc(45,"Cu\xf1a "),l.Tb(),l.yc(46,ee,2,3,"mat-form-field",17),l.yc(47,te,2,3,"mat-form-field",18),l.yc(48,ie,2,1,"mat-error",9),l.Tb(),l.Tb(),l.Ub(49,"div",14),l.Ub(50,"div",5),l.Ub(51,"mat-checkbox",15),l.cc("ngModelChange",(function(e){return t.entity.lastThree=e}))("change",(function(e){return t.lastThreeChange(e)})),l.zc(52,"Tres Ultimas "),l.Tb(),l.yc(53,ne,2,1,"mat-form-field",16),l.Tb(),l.Ub(54,"div",5),l.Ub(55,"mat-checkbox",15),l.cc("ngModelChange",(function(e){return t.entity.combined=e}))("change",(function(e){return t.combinedChange(e)})),l.zc(56,"Combinado "),l.Tb(),l.yc(57,re,2,3,"mat-form-field",17),l.yc(58,ce,2,3,"mat-form-field",18),l.yc(59,oe,2,1,"mat-error",9),l.Tb(),l.Tb(),l.Ub(60,"div",19),l.Ub(61,"div",2),l.Ub(62,"table",20),l.yc(63,he,3,1,"ng-container",21),l.yc(64,be,1,0,"tr",22),l.yc(65,de,1,0,"tr",23),l.Tb(),l.yc(66,ge,2,1,"mat-error",9),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(67,"mat-card-actions"),l.Ub(68,"button",24),l.cc("click",(function(){return t.save()})),l.zc(69,"Salvar"),l.Tb(),l.Ub(70,"button",25),l.cc("click",(function(){return t.new()})),l.zc(71,"Nuevo"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&e&&(l.Cb(7),l.Bc(" ",t.title," "),l.Cb(4),l.Bc(" ",t.subtitle," "),l.Cb(2),l.lc("formGroup",t.entityForm),l.Cb(6),l.lc("ngModel",t.entity.employeeId),l.Cb(1),l.lc("ngForOf",t.employees),l.Cb(1),l.lc("ngIf",t.entityForm.invalid),l.Cb(3),l.lc("ngModel",t.entity.total)("readonly",!0),l.Cb(3),l.lc("ngForOf",t.lotteries),l.Cb(1),l.lc("ngIf",t.entityForm.invalid),l.Cb(4),l.lc("ngModel",t.number),l.Cb(1),l.lc("ngIf",t.entityForm.invalid),l.Cb(4),l.lc("ngModel",t.entity.price),l.Cb(3),l.lc("ngModel",t.entity.firstThree)("ngModelOptions",l.mc(35,_)),l.Cb(2),l.lc("ngIf",t.entity.firstThree),l.Cb(2),l.lc("ngModel",t.entity.chock)("ngModelOptions",l.mc(36,_)),l.Cb(2),l.lc("ngIf",t.entity.chock),l.Cb(1),l.lc("ngIf",t.entity.chock),l.Cb(1),l.lc("ngIf",t.entity.chock&&t.entityForm.invalid),l.Cb(3),l.lc("ngModel",t.entity.lastThree)("ngModelOptions",l.mc(37,_)),l.Cb(2),l.lc("ngIf",t.entity.lastThree),l.Cb(2),l.lc("ngModel",t.entity.combined)("ngModelOptions",l.mc(38,_)),l.Cb(2),l.lc("ngIf",t.entity.combined),l.Cb(1),l.lc("ngIf",t.entity.combined),l.Cb(1),l.lc("ngIf",t.entity.combined&&t.entityForm.invalid),l.Cb(3),l.lc("dataSource",t.dataSource),l.Cb(1),l.lc("ngForOf",t.displayedColumns),l.Cb(1),l.lc("matHeaderRowDef",t.displayedColumns),l.Cb(1),l.lc("matRowDefColumns",t.displayedColumns),l.Cb(1),l.lc("ngIf",t.entityForm.invalid),l.Cb(2),l.lc("disabled",!t.entityForm.valid))},directives:[d.a,d.e,d.h,d.g,d.c,r.t,r.m,r.g,g.c,g.f,f.a,r.l,r.e,r.r,n.j,n.k,m.b,r.b,r.p,y.a,r.o,k.n,U.a,k.k,k.m,d.b,p.a,C.n,g.b,n.l,k.c,k.i,k.b,k.h,k.a,F.a,k.j,k.l],encapsulation:2}),e})();var fe=i("iadO");const ye=function(e){return{color:e}};function pe(e,t){if(1&e&&(l.Ub(0,"mat-option",24),l.zc(1),l.Tb()),2&e){const e=t.$implicit;l.lc("value",e.id)("ngStyle",l.nc(3,ye,e.color)),l.Cb(1),l.Bc(" ",e.name," ")}}function Te(e,t){1&e&&(l.Ub(0,"th",25),l.zc(1," Id "),l.Tb())}function Ce(e,t){if(1&e&&(l.Ub(0,"td",26),l.zc(1),l.Tb()),2&e){const e=t.$implicit;l.Cb(1),l.Bc(" ",e.id," ")}}function Fe(e,t){if(1&e&&(l.Ub(0,"th",25),l.zc(1),l.Tb()),2&e){const e=l.gc().$implicit;l.Cb(1),l.Bc(" ",e," ")}}function ve(e,t){1&e&&(l.Ub(0,"span",29),l.zc(1,"notification_important"),l.Tb())}function ke(e,t){if(1&e&&(l.Ub(0,"td",26),l.Ub(1,"span"),l.zc(2),l.Tb(),l.yc(3,ve,2,0,"span",28),l.Tb()),2&e){const e=t.$implicit,i=l.gc().$implicit,n=l.gc();l.Cb(2),l.Ac(e[i]),l.Cb(1),l.lc("ngIf","actions"===i&&n.validateAlert(e))}}function Ue(e,t){1&e&&(l.Sb(0,27),l.yc(1,Fe,2,1,"th",18),l.yc(2,ke,4,2,"td",19),l.Rb()),2&e&&l.lc("matColumnDef",t.$implicit)}function we(e,t){1&e&&l.Pb(0,"tr",30)}function Me(e,t){1&e&&l.Pb(0,"tr",31)}const xe=function(){return{standalone:!0}};let Pe=(()=>{class e extends v.a{constructor(e,t,i){super(),this.service=e,this.authService=t,this.router=i,this.entityApi="bets",this.entityApiLotteries="lotteries",this.lotteries=[],this.selectedIdLotteries=[],this.settings={showPreviewDialog:!0,query:{table:"vw_betAlerts"},options:{where:{isFourFigure:!0,lotteryId:{$in:this.selectedIdLotteries}},order:[["accumulated","desc"],["accumulatedTotal","desc"]]}},this.displayedColumns=["lottery","number","accumulated","difference","createdDate","accumulatedTotal","actions"],this.filtersColumns=["lottery"],this.price=7e3,this.createdDate=new Date}ngOnInit(){this.title="Apuestas Alertas",this.subtitle="Apuesta",super.init(this);let e="";switch((new Date).getDay()){case 0:e="sunday";break;case 1:e="monday";break;case 2:e="tuesday";break;case 3:e="wednesday";break;case 4:e="thursday";break;case 5:e="friday";break;case 6:e="saturday"}this.service.get(this.entityApiLotteries,{options:{where:{play:{$like:"%"+e+"%"}},order:[["name","asc"]]}}).subscribe(e=>{let t=[{value:"morning",color:"green"},{value:"afternoon",color:"crimson"},{value:"night",color:"blue"},{value:null,color:"Ninguna"}],i=e;for(let n of t){let e=i.filter(e=>e.temporality==n.value);for(let t of e)t.color=n.color,this.lotteries.push(t),this.selectedIdLotteries.push(t.id)}super.onPageChange()})}ngOnChanges(e){this.loadChange&&super.onPageChange()}onEdit(e){}validateAlert(e){let t=!1;return e.accumulated>this.price&&(t=!0),t}numberOnly(e){const t=e.which?e.which:e.keyCode;return!(t>31&&(t<48||t>57))}downloadFile(){let e="Numbers"+new Date,t=this.getText(),i=document.createElement("a");i.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),i.setAttribute("download",e),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)}getText(){let e="";for(let t of this.dataSource.data)t.accumulated>this.price&&(e+=t.lottery+" "+t.number+" de "+t.difference+" \r\n");return e}beforePrint(e){for(let t of e)t.difference=t.accumulated-this.price,t.difference<1&&(t.difference="");return e}covered(){let e=[];for(let i of this.dataSource.data)i.accumulated>this.price&&(e.find(e=>e==i.number)||e.push({number:i.number,lotteryId:i.lotteryId}));if(e.length&&confirm("\xbfYa descargo el archivo de n\xfameros?")){var t=this.createdDate.getDate()+"/"+(this.createdDate.getMonth()+1)+"/"+this.createdDate.getFullYear();this.service.save("details",{numbers:e,accumulated:this.price,createdDate:t}).subscribe(e=>{this.onPageChange()})}}beforePageChange(){if(this.createdDate){var e=this.createdDate.getDate()+"/"+(this.createdDate.getMonth()+1)+"/"+this.createdDate.getFullYear();this.settings.options.where.createdDate=e}else delete this.settings.options.where.createdDate;this.settings.options.where.lotteryId=this.selectedIdLotteries}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(u.a),l.Ob(h.a),l.Ob(o.f))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-bet-alerts"]],inputs:{loadChange:"loadChange"},features:[l.zb,l.Ab],decls:49,vars:18,consts:[["fxLayout","row","fxLayoutWrap","wrap"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100"],["fxLayout","row","fxLayoutWrap","wrap",2,"margin-text-outline","10px","margin-top","10px"],[2,"margin-right","10px",3,"ngModel","ngModelOptions","ngModelChange"],[2,"float","left","width","30%","margin-right","10px"],["matInput","","type","number","placeholder","Entre precio","onKeyPress","if(this.value.length==9) return false;","autocomplete","off",3,"ngModel","keypress","ngModelChange"],[2,"width","30%","margin-right","10px"],["matInput","",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],["multiple","",3,"value","valueChange"],[3,"value","ngStyle",4,"ngFor","ngForOf"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100",2,"overflow","hidden"],["mat-fab","","color","basic",2,"float","left",3,"click"],["mat-fab","","color","warn",2,"float","right",3,"click"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[3,"value","ngStyle"],["mat-header-cell",""],["mat-cell",""],[3,"matColumnDef"],["class","material-icons",4,"ngIf"],[1,"material-icons"],["mat-header-row",""],["mat-row",""]],template:function(e,t){if(1&e&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"mat-card"),l.Ub(3,"mat-card-header"),l.Ub(4,"mat-card-title"),l.Ub(5,"div",0),l.Ub(6,"div",2),l.zc(7),l.Tb(),l.Tb(),l.Tb(),l.Ub(8,"mat-card-subtitle"),l.Ub(9,"div",0),l.Ub(10,"div",2),l.zc(11),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(12,"mat-card-content"),l.Ub(13,"div",3),l.Ub(14,"div",2),l.Ub(15,"mat-checkbox",4),l.cc("ngModelChange",(function(e){return t.settings.options.where.isFourFigure=e})),l.zc(16,"Cuatro Cifras"),l.Tb(),l.Tb(),l.Tb(),l.Ub(17,"div",0),l.Ub(18,"div",2),l.Ub(19,"mat-form-field",5),l.Ub(20,"input",6),l.cc("keypress",(function(e){return t.numberOnly(e)}))("ngModelChange",(function(e){return t.price=e})),l.Tb(),l.Tb(),l.Ub(21,"mat-form-field",7),l.Ub(22,"mat-label"),l.zc(23,"Seleccione fecha"),l.Tb(),l.Ub(24,"input",8),l.cc("ngModelChange",(function(e){return t.createdDate=e})),l.Tb(),l.Pb(25,"mat-datepicker-toggle",9),l.Pb(26,"mat-datepicker",null,10),l.Tb(),l.Ub(28,"mat-form-field",7),l.Ub(29,"mat-label"),l.zc(30,"Select an option"),l.Tb(),l.Ub(31,"mat-select",11),l.cc("valueChange",(function(e){return t.selectedIdLotteries=e})),l.yc(32,pe,2,5,"mat-option",12),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(33,"div",0),l.Ub(34,"div",13),l.Ub(35,"button",14),l.cc("click",(function(){return t.onPageChange()})),l.zc(36,"Refrescar"),l.Tb(),l.Ub(37,"button",14),l.cc("click",(function(){return t.downloadFile()})),l.zc(38,"Archivo"),l.Tb(),l.Ub(39,"button",15),l.cc("click",(function(){return t.covered()})),l.zc(40,"Cubrir"),l.Tb(),l.Tb(),l.Tb(),l.Ub(41,"table",16),l.cc("matSortChange",(function(e){return t.onSortChange(e)})),l.Sb(42,17),l.yc(43,Te,2,0,"th",18),l.yc(44,Ce,2,1,"td",19),l.Rb(),l.yc(45,Ue,3,1,"ng-container",20),l.yc(46,we,1,0,"tr",21),l.yc(47,Me,1,0,"tr",22),l.Tb(),l.Ub(48,"mat-paginator",23),l.cc("page",(function(e){return t.onPaginatorChange(e)})),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&e){const e=l.qc(27);l.Cb(7),l.Bc(" ",t.title," "),l.Cb(4),l.Bc(" ",t.subtitle," "),l.Cb(4),l.lc("ngModel",t.settings.options.where.isFourFigure)("ngModelOptions",l.mc(17,xe)),l.Cb(5),l.lc("ngModel",t.price),l.Cb(4),l.lc("matDatepicker",e)("ngModel",t.createdDate),l.Cb(1),l.lc("for",e),l.Cb(6),l.lc("value",t.selectedIdLotteries),l.Cb(1),l.lc("ngForOf",t.lotteries),l.Cb(9),l.lc("dataSource",t.dataSource),l.Cb(4),l.lc("ngForOf",t.displayedColumns),l.Cb(1),l.lc("matHeaderRowDef",t.displayedColumns),l.Cb(1),l.lc("matRowDefColumns",t.displayedColumns),l.Cb(1),l.lc("length",t.length)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions)}},directives:[d.a,d.e,d.h,d.g,d.c,y.a,r.l,r.o,g.c,m.b,r.p,r.b,g.f,fe.b,fe.d,g.g,fe.a,f.a,n.j,p.a,k.n,U.a,k.c,k.i,k.b,k.k,k.m,w.a,C.n,n.l,k.h,k.a,n.k,k.j,k.l],encapsulation:2}),e})(),Ie=(()=>{class e{constructor(){}transform(e,t){return this.getMessage(e=e||"")||e}getMessage(e){let t=[{lottery:"Loter\xeda"},{firstThree:"Tres primeras"},{lastThree:"Tres ultimas"},{chock:"Cu\xf1a"},{chockNumber:"Cu\xf1a"},{combined:"Combinado"},{number:"Numero"},{price:"Precio"},{employeeCode:"C\xf3digo empleado"},{created:"Creado"},{userName:"Nombre usuario"},{actions:"Acciones"},{accumulated:"Acumulado"},{accumulatedTotal:"Acumulado Total"}].find(t=>e in t);return t?t[e]:""}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=l.Nb({name:"translate",type:e,pure:!1}),e})();function Oe(e,t){if(1&e&&(l.Ub(0,"mat-card-header"),l.Ub(1,"mat-card-title"),l.Ub(2,"div",0),l.Ub(3,"div",23),l.zc(4),l.Tb(),l.Tb(),l.Tb(),l.Ub(5,"mat-card-subtitle"),l.Ub(6,"div",0),l.Ub(7,"div",23),l.zc(8),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&e){const e=l.gc();l.Cb(4),l.Bc(" ",e.title," "),l.Cb(4),l.Bc(" ",e.subtitle," ")}}function De(e,t){if(1&e&&(l.Ub(0,"mat-option",24),l.zc(1),l.Tb()),2&e){const e=t.$implicit;l.lc("value",e.value),l.Cb(1),l.Bc(" ",e.text," ")}}function Se(e,t){1&e&&(l.Ub(0,"th",25),l.zc(1," Id "),l.Tb())}function ze(e,t){if(1&e&&(l.Ub(0,"td",26),l.zc(1),l.Tb()),2&e){const e=t.$implicit;l.Cb(1),l.Bc(" ",e.betId," ")}}function Ae(e,t){if(1&e&&(l.Ub(0,"th",25),l.zc(1),l.hc(2,"translate"),l.Tb()),2&e){const e=l.gc().$implicit;l.Cb(1),l.Bc(" ",l.ic(2,1,e)," ")}}function Le(e,t){if(1&e&&(l.Ub(0,"td",26),l.Ub(1,"span"),l.zc(2),l.Tb(),l.Tb()),2&e){const e=t.$implicit,i=l.gc().$implicit;l.Cb(2),l.Ac(e[i])}}function Ne(e,t){1&e&&(l.Sb(0,27),l.yc(1,Ae,3,3,"th",17),l.yc(2,Le,3,1,"td",18),l.Rb()),2&e&&l.lc("matColumnDef",t.$implicit)}function Ee(e,t){1&e&&l.Pb(0,"tr",28)}function Re(e,t){1&e&&l.Pb(0,"tr",29)}let Ve=(()=>{class e extends v.a{constructor(e,t,i){super(),this.service=e,this.authService=t,this.router=i,this.showCardHeader=!0,this.entityApi="bets",this.settings={showPreviewDialog:!0,query:{table:"vw_bets"},options:{where:{},order:[["created","desc"]]}},this.displayedColumns=["lottery","firstThree","lastThree","combined","number","price","employeeCode","chockNumber","created","userName","actions"],this.filtersColumns=["lottery","employeeCode"],this.lotteries=[]}ngOnInit(){this.title="Apuestas",this.subtitle="Apuesta",this.service.getSelect("lotteries",{value:"id",text:"name"}).subscribe(e=>{this.lotteries=e,this.lotteryId=this.lotteries[0].value,super.init(this),super.onPageChange()})}ngOnChanges(e){this.loadChange&&super.onPageChange()}onEdit(e){this.router.navigate(["/bet2",{betId:e.id}])}beforePageChange(){if(this.lotteryId?this.settings.options.where.lotteryId=this.lotteryId:delete this.settings.options.where.lotteryId,this.createdDate){var e=this.createdDate.getDate()+"/"+(this.createdDate.getMonth()+1)+"/"+this.createdDate.getFullYear();this.settings.options.where.createdDate=e}else delete this.settings.options.where.createdDate}numberOnly(e){const t=e.which?e.which:e.keyCode;return!(t>31&&(t<48||t>57))}numberChange(){this.settings.options.where.$or=this.number?[{number:this.number},{chockNumber:this.number}]:[]}padNumber(e,t,i){return i=i||"0",(e+="").length>=t?e:new Array(t-e.length+1).join(i)+e}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(u.a),l.Ob(h.a),l.Ob(o.f))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-bets"]],inputs:{loadChange:"loadChange",showCardHeader:"showCardHeader"},features:[l.zb,l.Ab],decls:36,vars:15,consts:[["fxLayout","row","fxLayoutWrap","wrap"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],[4,"ngIf"],[2,"width","30%","margin-right","10px"],["matInput","",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],["fxFlex.gt-sm","100","fxFlex.gt-xs","100",2,"overflow","hidden"],[2,"float","left","width","30%","margin-right","10px"],["matInput","","placeholder","Filtrar",3,"ngModel","keyup.enter","ngModelChange"],["matNativeControl","","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[2,"width","30%"],["matInput","","placeholder","Entre number","onKeyPress","if(this.value.length===4) return false;","autocomplete","off",3,"ngModel","change","keypress","ngModelChange"],["mat-fab","","color","basic",2,"float","left",3,"click"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100"],[3,"value"],["mat-header-cell",""],["mat-cell",""],[3,"matColumnDef"],["mat-header-row",""],["mat-row",""]],template:function(e,t){if(1&e&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"mat-card"),l.yc(3,Oe,9,2,"mat-card-header",2),l.Ub(4,"mat-card-content"),l.Ub(5,"div",0),l.Ub(6,"mat-form-field",3),l.Ub(7,"mat-label"),l.zc(8,"Seleccione fecha"),l.Tb(),l.Ub(9,"input",4),l.cc("ngModelChange",(function(e){return t.createdDate=e})),l.Tb(),l.Pb(10,"mat-datepicker-toggle",5),l.Pb(11,"mat-datepicker",null,6),l.Tb(),l.Tb(),l.Ub(13,"div",0),l.Ub(14,"div",7),l.Ub(15,"mat-form-field",8),l.Ub(16,"input",9),l.cc("keyup.enter",(function(){return t.onPageChange()}))("ngModelChange",(function(e){return t.filter=e})),l.Tb(),l.Tb(),l.Ub(17,"mat-form-field",3),l.Ub(18,"mat-label"),l.zc(19,"Seleccione Loteria"),l.Tb(),l.Ub(20,"mat-select",10),l.cc("ngModelChange",(function(e){return t.lotteryId=e})),l.yc(21,De,2,2,"mat-option",11),l.Tb(),l.Tb(),l.Ub(22,"mat-form-field",12),l.Ub(23,"input",13),l.cc("change",(function(){return t.numberChange()}))("keypress",(function(e){return t.numberOnly(e)}))("ngModelChange",(function(e){return t.number=e})),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(24,"div",0),l.Ub(25,"div",7),l.Ub(26,"button",14),l.cc("click",(function(){return t.onPageChange()})),l.zc(27,"Refrescar"),l.Tb(),l.Tb(),l.Tb(),l.Ub(28,"table",15),l.cc("matSortChange",(function(e){return t.onSortChange(e)})),l.Sb(29,16),l.yc(30,Se,2,0,"th",17),l.yc(31,ze,2,1,"td",18),l.Rb(),l.yc(32,Ne,3,1,"ng-container",19),l.yc(33,Ee,1,0,"tr",20),l.yc(34,Re,1,0,"tr",21),l.Tb(),l.Ub(35,"mat-paginator",22),l.cc("page",(function(e){return t.onPaginatorChange(e)})),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&e){const e=l.qc(12);l.Cb(3),l.lc("ngIf",t.showCardHeader),l.Cb(6),l.lc("matDatepicker",e)("ngModel",t.createdDate),l.Cb(1),l.lc("for",e),l.Cb(6),l.lc("ngModel",t.filter),l.Cb(4),l.lc("ngModel",t.lotteryId),l.Cb(1),l.lc("ngForOf",t.lotteries),l.Cb(2),l.lc("ngModel",t.number),l.Cb(5),l.lc("dataSource",t.dataSource),l.Cb(4),l.lc("ngForOf",t.displayedColumns),l.Cb(1),l.lc("matHeaderRowDef",t.displayedColumns),l.Cb(1),l.lc("matRowDefColumns",t.displayedColumns),l.Cb(1),l.lc("length",t.length)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions)}},directives:[d.a,n.k,d.c,g.c,g.f,m.b,fe.b,r.b,r.l,r.o,fe.d,g.g,fe.a,f.a,r.r,n.j,p.a,k.n,U.a,k.c,k.i,k.b,k.k,k.m,w.a,d.e,d.h,d.g,C.n,k.h,k.a,k.j,k.l],pipes:[Ie],encapsulation:2}),e})();function $e(e,t){if(1&e&&(l.Ub(0,"mat-card-header"),l.Ub(1,"mat-card-title"),l.Ub(2,"div",0),l.Ub(3,"div",12),l.zc(4),l.Tb(),l.Tb(),l.Tb(),l.Ub(5,"mat-card-subtitle"),l.Ub(6,"div",0),l.Ub(7,"div",12),l.zc(8),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&e){const e=l.gc();l.Cb(4),l.Bc(" ",e.title," "),l.Cb(4),l.Bc(" ",e.subtitle," ")}}function Be(e,t){1&e&&(l.Ub(0,"th",13),l.zc(1," Id "),l.Tb())}function qe(e,t){if(1&e&&(l.Ub(0,"td",14),l.zc(1),l.Tb()),2&e){const e=t.$implicit;l.Cb(1),l.Bc(" ",e.id," ")}}function je(e,t){if(1&e&&(l.Ub(0,"th",13),l.zc(1),l.Tb()),2&e){const e=l.gc().$implicit;l.Cb(1),l.Bc(" ",e," ")}}function He(e,t){if(1&e){const e=l.Vb();l.Ub(0,"button",17),l.cc("click",(function(){l.sc(e);const t=l.gc().$implicit;return l.gc(2).onDelete(t)})),l.Ub(1,"mat-icon"),l.zc(2,"delete_outline"),l.Tb(),l.Tb()}}function Ge(e,t){if(1&e&&(l.Ub(0,"td",14),l.Ub(1,"span"),l.zc(2),l.Tb(),l.yc(3,He,3,0,"button",16),l.Tb()),2&e){const e=t.$implicit,i=l.gc().$implicit;l.Cb(2),l.Ac(e[i]),l.Cb(1),l.lc("ngIf","actions"===i)}}function Ke(e,t){1&e&&(l.Sb(0,15),l.yc(1,je,2,1,"th",6),l.yc(2,Ge,4,2,"td",7),l.Rb()),2&e&&l.lc("matColumnDef",t.$implicit)}function Je(e,t){1&e&&l.Pb(0,"tr",18)}function _e(e,t){1&e&&l.Pb(0,"tr",19)}let We=(()=>{class e extends v.a{constructor(e,t,i){super(),this.service=e,this.authService=t,this.router=i,this.showCardHeader=!0,this.entityApi="numbers",this.settings={query:{table:"vw_forbiddenNumbers"},options:{order:[["number"]]}},this.displayedColumns=["number","isActive","lotteryName","actions"],this.filtersColumns=["number"]}ngOnInit(){this.title="Numeros Prohibido",this.subtitle="Apuesta",super.init(this),super.onPageChange()}ngOnChanges(e){this.loadChange&&super.onPageChange()}onEdit(e){this.router.navigate(["/forbidden",{numberId:e.id}])}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(u.a),l.Ob(h.a),l.Ob(o.f))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-forbidden-numbers"]],inputs:{loadChange:"loadChange",showCardHeader:"showCardHeader"},features:[l.zb,l.Ab],decls:15,vars:9,consts:[["fxLayout","row","fxLayoutWrap","wrap"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],[4,"ngIf"],["matInput","","placeholder","Filtrar",3,"ngModel","keyup.enter","ngModelChange"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100"],["mat-header-cell",""],["mat-cell",""],[3,"matColumnDef"],["mat-button","","color","warn",3,"click",4,"ngIf"],["mat-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"mat-card"),l.yc(3,$e,9,2,"mat-card-header",2),l.Ub(4,"mat-card-content"),l.Ub(5,"mat-form-field"),l.Ub(6,"input",3),l.cc("keyup.enter",(function(){return t.onPageChange()}))("ngModelChange",(function(e){return t.filter=e})),l.Tb(),l.Tb(),l.Ub(7,"table",4),l.cc("matSortChange",(function(e){return t.onSortChange(e)})),l.Sb(8,5),l.yc(9,Be,2,0,"th",6),l.yc(10,qe,2,1,"td",7),l.Rb(),l.yc(11,Ke,3,1,"ng-container",8),l.yc(12,Je,1,0,"tr",9),l.yc(13,_e,1,0,"tr",10),l.Tb(),l.Ub(14,"mat-paginator",11),l.cc("page",(function(e){return t.onPaginatorChange(e)})),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&e&&(l.Cb(3),l.lc("ngIf",t.showCardHeader),l.Cb(3),l.lc("ngModel",t.filter),l.Cb(1),l.lc("dataSource",t.dataSource),l.Cb(4),l.lc("ngForOf",t.displayedColumns),l.Cb(1),l.lc("matHeaderRowDef",t.displayedColumns),l.Cb(1),l.lc("matRowDefColumns",t.displayedColumns),l.Cb(1),l.lc("length",t.length)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions))},directives:[d.a,n.k,d.c,g.c,m.b,r.b,r.l,r.o,k.n,U.a,k.c,k.i,k.b,n.j,k.k,k.m,w.a,d.e,d.h,d.g,k.h,k.a,p.a,F.a,k.j,k.l],encapsulation:2}),e})();function Ye(e,t){if(1&e&&(l.Ub(0,"mat-error"),l.zc(1),l.Tb()),2&e){const e=l.gc();l.Cb(1),l.Ac(e.getErrorMessage("number"))}}function Ze(e,t){if(1&e&&(l.Ub(0,"mat-option",14),l.zc(1),l.Tb()),2&e){const e=t.$implicit;l.lc("value",e.value),l.Cb(1),l.Bc(" ",e.text," ")}}function Xe(e,t){if(1&e&&(l.Ub(0,"mat-error"),l.zc(1),l.Tb()),2&e){const e=l.gc();l.Cb(1),l.Ac(e.getErrorMessage("lotteryId"))}}function Qe(e,t){1&e&&(l.Ub(0,"mat-icon"),l.zc(1,"block"),l.Tb(),l.zc(2," Numeros "))}function et(e,t){if(1&e&&(l.Ub(0,"div"),l.Ub(1,"div"),l.Pb(2,"app-forbidden-numbers",15),l.Tb(),l.Tb()),2&e){const e=l.gc();l.Cb(2),l.lc("loadChange",e.loadNumbers)("showCardHeader",!1)}}const tt=function(){return{standalone:!0}};let it=(()=>{class e extends s.a{constructor(e,t,i,n,c,o,a){super(),this.service=e,this.authService=t,this.route=i,this.fb=n,this.router=c,this.changeDetectorRef=o,this._snackBar=a,this.entityApi="numbers",this.entities=[],this.lotteries=[],this.configFormGroup=e=>{this.entityForm=new r.f({number:new r.d("",[r.s.required]),lotteryId:new r.d("",[r.s.required])})}}ngOnInit(){this.title="Prohibido",this.subtitle="Apuesta",this.service.getSelect("lotteries",{value:"id",text:"name"}).subscribe(e=>{this.lotteries=e,this.lotteries.unshift({value:"all",text:"Todas"})}),this.iniEntity(),super.init(this),this.route.params.subscribe(e=>{e&&e.numberId?(this.configFormGroup(e.numberId),super.getEntity(e.numberId).subscribe(()=>{})):this.configFormGroup()})}iniEntity(){this.currEntity={number:null,isActive:!0,lotteryId:null}}new(){this.iniEntity(),this.router.navigate(["/forbidden"])}afterSaved(){this.loadNumbers=(new Date).toString()}numberOnly(e){const t=e.which?e.which:e.keyCode;return!(t>31&&(t<48||t>57))}beforeSaved(){if(this.entities=[],"all"==this.currEntity.lotteryId)for(let e of this.lotteries)"all"!=e.value&&this.entities.push({number:this.currEntity.number,isActive:!0,lotteryId:e.value});else this.entities=[this.currEntity];return!0}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(u.a),l.Ob(h.a),l.Ob(o.a),l.Ob(r.c),l.Ob(o.f),l.Ob(l.h),l.Ob(b.a))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-forbidden-number"]],features:[l.zb],decls:41,vars:12,consts:[["fxLayout","row","fxLayoutWrap","wrap"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100"],[3,"formGroup"],["matInput","","placeholder","Entre number","formControlName","number","onKeyPress","if(this.value.length===4) return false;","autocomplete","off","required","",3,"ngModel","keypress","ngModelChange"],[4,"ngIf"],["fxLayout","row","fxLayoutWrap","wrap",2,"margin-text-outline","10px","margin-top","10px"],[2,"margin-right","10px",3,"ngModel","ngModelOptions","ngModelChange"],["matNativeControl","","formControlName","lotteryId","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["mat-fab","","color","accent",3,"disabled","click"],["mat-fab","","color","primary",3,"click"],["mat-tab-label",""],["matTabContent",""],[3,"value"],[3,"loadChange","showCardHeader"]],template:function(e,t){1&e&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"mat-card"),l.Ub(3,"mat-card-header"),l.Ub(4,"mat-card-title"),l.Ub(5,"div",0),l.Ub(6,"div",2),l.zc(7),l.Tb(),l.Tb(),l.Tb(),l.Ub(8,"mat-card-subtitle"),l.Ub(9,"div",0),l.Ub(10,"div",2),l.zc(11),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(12,"mat-card-content"),l.Ub(13,"form",3),l.Ub(14,"div",0),l.Ub(15,"div",2),l.Ub(16,"mat-form-field"),l.Ub(17,"input",4),l.cc("keypress",(function(e){return t.numberOnly(e)}))("ngModelChange",(function(e){return t.currEntity.number=e})),l.Tb(),l.yc(18,Ye,2,1,"mat-error",5),l.Tb(),l.Tb(),l.Tb(),l.Ub(19,"div",6),l.Ub(20,"div",2),l.Ub(21,"mat-checkbox",7),l.cc("ngModelChange",(function(e){return t.currEntity.isActive=e})),l.zc(22,"Esta Activo"),l.Tb(),l.Tb(),l.Tb(),l.Ub(23,"div",6),l.Ub(24,"div",2),l.Ub(25,"mat-form-field"),l.Ub(26,"mat-label"),l.zc(27,"Seleccione loteria"),l.Tb(),l.Ub(28,"mat-select",8),l.cc("ngModelChange",(function(e){return t.currEntity.lotteryId=e})),l.yc(29,Ze,2,2,"mat-option",9),l.Tb(),l.yc(30,Xe,2,1,"mat-error",5),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(31,"mat-card-actions"),l.Ub(32,"button",10),l.cc("click",(function(){return t.save()})),l.zc(33,"Salvar"),l.Tb(),l.Ub(34,"button",11),l.cc("click",(function(){return t.new()})),l.zc(35,"Nuevo"),l.Tb(),l.Tb(),l.Ub(36,"mat-card-footer"),l.Ub(37,"mat-tab-group"),l.Ub(38,"mat-tab"),l.yc(39,Qe,3,0,"ng-template",12),l.yc(40,et,3,2,"ng-template",13),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&e&&(l.Cb(7),l.Bc(" ",t.title," "),l.Cb(4),l.Bc(" ",t.subtitle," "),l.Cb(2),l.lc("formGroup",t.entityForm),l.Cb(4),l.lc("ngModel",t.currEntity.number),l.Cb(1),l.lc("ngIf",t.entityForm.invalid),l.Cb(3),l.lc("ngModel",t.currEntity.isActive)("ngModelOptions",l.mc(11,tt)),l.Cb(7),l.lc("ngModel",t.currEntity.lotteryId),l.Cb(1),l.lc("ngForOf",t.lotteries),l.Cb(1),l.lc("ngIf",t.entityForm.invalid),l.Cb(2),l.lc("disabled",!t.entityForm.valid))},directives:[d.a,d.e,d.h,d.g,d.c,r.t,r.m,r.g,g.c,m.b,r.b,r.l,r.e,r.r,n.k,y.a,r.o,g.f,f.a,n.j,d.b,p.a,d.d,T.c,T.a,T.d,T.b,g.b,C.n,F.a,We],encapsulation:2}),e})();function nt(e,t){if(1&e&&(l.Ub(0,"mat-option",26),l.zc(1),l.Tb()),2&e){const e=t.$implicit;l.lc("value",e.value),l.Cb(1),l.Bc(" ",e.text," ")}}function rt(e,t){if(1&e&&(l.Ub(0,"mat-error"),l.zc(1),l.Tb()),2&e){const e=l.gc();l.Cb(1),l.Ac(e.getErrorMessage("employeeId"))}}const ct=function(){return{standalone:!0}},ot=function(e){return{color:e}};function at(e,t){if(1&e){const e=l.Vb();l.Ub(0,"mat-checkbox",27),l.cc("ngModelChange",(function(i){return l.sc(e),t.$implicit.check=i}))("change",(function(t){return l.sc(e),l.gc().lotteryChange(t)})),l.zc(1),l.Tb()}if(2&e){const e=t.$implicit;l.lc("ngModel",e.check)("ngModelOptions",l.mc(5,ct))("value",e.id)("ngStyle",l.nc(6,ot,e.color)),l.Cb(1),l.Ac(e.name)}}function st(e,t){if(1&e&&(l.Ub(0,"mat-error"),l.zc(1),l.Tb()),2&e){const e=l.gc();l.Cb(1),l.Ac(e.getErrorMessage("checkLotteries"))}}function lt(e,t){if(1&e&&(l.Ub(0,"mat-error"),l.zc(1),l.Tb()),2&e){const e=l.gc();l.Cb(1),l.Ac(e.getErrorMessage("number"))}}function ut(e,t){if(1&e){const e=l.Vb();l.Ub(0,"mat-form-field",28),l.Ub(1,"input",29),l.cc("keypress",(function(t){return l.sc(e),l.gc().numberOnly(t)}))("ngModelChange",(function(t){return l.sc(e),l.gc().entity.firstThreePrice=t}))("change",(function(){return l.sc(e),l.gc().firstThreePriceChange()})),l.Tb(),l.Tb()}if(2&e){const e=l.gc();l.Cb(1),l.lc("ngModel",e.entity.firstThreePrice)}}function ht(e,t){if(1&e){const e=l.Vb();l.Ub(0,"mat-form-field",30),l.Ub(1,"input",31),l.cc("keypress",(function(t){return l.sc(e),l.gc().numberOnly(t)}))("ngModelChange",(function(t){return l.sc(e),l.gc().entity.chockFourFigurePrice=t}))("change",(function(){return l.sc(e),l.gc().chockFourFigurePriceChange()})),l.Tb(),l.Tb()}if(2&e){const e=l.gc();l.Cb(1),l.lc("ngModelOptions",l.mc(2,ct))("ngModel",e.entity.chockFourFigurePrice)}}function bt(e,t){if(1&e){const e=l.Vb();l.Ub(0,"mat-form-field",32),l.Ub(1,"input",33),l.cc("keypress",(function(t){return l.sc(e),l.gc().numberOnly(t)}))("ngModelChange",(function(t){return l.sc(e),l.gc().entity.chockThreeFigurePrice=t}))("change",(function(){return l.sc(e),l.gc().chockThreeFigurePriceChange()})),l.Tb(),l.Tb()}if(2&e){const e=l.gc();l.Cb(1),l.lc("ngModelOptions",l.mc(2,ct))("ngModel",e.entity.chockThreeFigurePrice)}}function dt(e,t){if(1&e&&(l.Ub(0,"mat-error"),l.zc(1),l.Tb()),2&e){const e=l.gc();l.Cb(1),l.Ac(e.getErrorMessage("checkChock"))}}function gt(e,t){if(1&e){const e=l.Vb();l.Ub(0,"mat-form-field",28),l.Ub(1,"input",34),l.cc("keypress",(function(t){return l.sc(e),l.gc().numberOnly(t)}))("ngModelChange",(function(t){return l.sc(e),l.gc().entity.lastThreePrice=t}))("change",(function(){return l.sc(e),l.gc().lastThreePriceChange()})),l.Tb(),l.Tb()}if(2&e){const e=l.gc();l.Cb(1),l.lc("ngModel",e.entity.lastThreePrice)}}function mt(e,t){if(1&e){const e=l.Vb();l.Ub(0,"mat-form-field",30),l.Ub(1,"input",35),l.cc("keypress",(function(t){return l.sc(e),l.gc().numberOnly(t)}))("ngModelChange",(function(t){return l.sc(e),l.gc().entity.combinedFourFigurePrice=t}))("change",(function(){return l.sc(e),l.gc().combinedFourFigurePriceChange()})),l.Tb(),l.Tb()}if(2&e){const e=l.gc();l.Cb(1),l.lc("ngModelOptions",l.mc(2,ct))("ngModel",e.entity.combinedFourFigurePrice)}}function ft(e,t){if(1&e){const e=l.Vb();l.Ub(0,"mat-form-field",32),l.Ub(1,"input",36),l.cc("keypress",(function(t){return l.sc(e),l.gc().numberOnly(t)}))("ngModelChange",(function(t){return l.sc(e),l.gc().entity.combinedThreeFigurePrice=t}))("change",(function(){return l.sc(e),l.gc().combinedThreeFigurePriceChange()})),l.Tb(),l.Tb()}if(2&e){const e=l.gc();l.Cb(1),l.lc("ngModelOptions",l.mc(2,ct))("ngModel",e.entity.combinedThreeFigurePrice)}}function yt(e,t){if(1&e&&(l.Ub(0,"mat-error"),l.zc(1),l.Tb()),2&e){const e=l.gc();l.Cb(1),l.Ac(e.getErrorMessage("checkCombined"))}}function pt(e,t){if(1&e&&(l.Ub(0,"th",40),l.zc(1),l.Tb()),2&e){const e=l.gc().$implicit;l.Cb(1),l.Bc(" ",e," ")}}function Tt(e,t){if(1&e){const e=l.Vb();l.Ub(0,"button",44),l.cc("click",(function(){return l.sc(e),l.gc(3).preventEnter()})),l.Tb()}}function Ct(e,t){if(1&e){const e=l.Vb();l.Ub(0,"button",45),l.cc("click",(function(){l.sc(e);const t=l.gc().$implicit;return l.gc(2).onDeleteCustomGrid(t)})),l.Ub(1,"mat-icon"),l.zc(2,"delete_outline"),l.Tb(),l.Tb()}}function Ft(e,t){if(1&e&&(l.Ub(0,"td",41),l.Ub(1,"span"),l.zc(2),l.Tb(),l.yc(3,Tt,1,0,"button",42),l.yc(4,Ct,3,0,"button",43),l.Tb()),2&e){const e=t.$implicit,i=l.gc().$implicit;l.Cb(2),l.Ac(e[i]),l.Cb(1),l.lc("ngIf","actions"===i),l.Cb(1),l.lc("ngIf","actions"===i)}}function vt(e,t){1&e&&(l.Sb(0,37),l.yc(1,pt,2,1,"th",38),l.yc(2,Ft,5,3,"td",39),l.Rb()),2&e&&l.lc("matColumnDef",t.$implicit)}function kt(e,t){1&e&&l.Pb(0,"tr",46)}function Ut(e,t){1&e&&l.Pb(0,"tr",47)}function wt(e,t){if(1&e&&(l.Ub(0,"mat-error"),l.zc(1),l.Tb()),2&e){const e=l.gc();l.Cb(1),l.Ac(e.getErrorMessage("checkNumbers"))}}let Mt=(()=>{class e extends s.a{constructor(e,t,i,n,c,o,a){super(),this.service=e,this.authService=t,this.route=i,this.fb=n,this.router=c,this.changeDetectorRef=o,this._snackBar=a,this.entityApi="bets",this.entityDetailApi="details",this.entityApiEmployees="employees",this.entityApiLotteries="lotteries",this.entityNumbers="numbers",this.employees=[],this.lotteries=[],this.number=null,this.displayedColumns=["number","price","actions"],this.forbiddenNumbers=[],this.configFormGroup=e=>{this.entityForm=new r.f({employeeId:new r.d("",[r.s.required]),checkLotteries:this.fb.array([],[r.s.required]),number:new r.d(""),total:new r.d(""),price:new r.d("",[r.s.required]),firstThreePrice:new r.d(""),lastThreePrice:new r.d(""),checkChock:this.fb.array([]),checkCombined:this.fb.array([]),checkNumbers:this.fb.array([],[r.s.required])})}}ngOnInit(){this.title="Apuesta",this.subtitle="Apuesta",this.iniEntity(),super.init(this),this.route.params.subscribe(e=>{this.service.getSelect(this.entityApiEmployees,{value:"id",text:"code",options:{order:[["code","asc"]]}}).subscribe(e=>{this.employees=e});let t="";switch((new Date).getDay()){case 0:t="sunday";break;case 1:t="monday";break;case 2:t="tuesday";break;case 3:t="wednesday";break;case 4:t="thursday";break;case 5:t="friday";break;case 6:t="saturday"}let i=0,n=0,c=()=>{i++;let e=[];if(i==n){if(this.entity&&this.entity.details&&this.entity.details.length){for(let i of this.entity.details)e.find(e=>e.id==i.lotteryId)||e.push(i.lottery);const t=this.entityForm.get("checkLotteries");for(let i of e){let e=this.lotteries.find(e=>e.id==i.id);e&&(e.check=!0,t.push(new r.d({id:e.id,isThreeFigures:e.isThreeFigures})))}}this.entity.details.sort(this.compare),this.calculateTotal()}};n++,this.service.get(this.entityNumbers,{query:{table:"vw_forbiddenNumbers"},options:{where:{isActive:!0}}}).subscribe(e=>{this.forbiddenNumbers=e.rows,c()}),n++,this.service.get(this.entityApiLotteries,{options:{where:{play:{$like:"%"+t+"%"}},order:[["name","asc"]]}}).subscribe(e=>{let t=[{value:"morning",color:"green"},{value:"afternoon",color:"crimson"},{value:"night",color:"blue"},{value:null,color:"Ninguna"}],i=e;for(let n of t){let e=i.filter(e=>e.temporality==n.value);for(let t of e)t.color=n.color,this.lotteries.push(t)}c()}),e&&e.betId?(n++,this.configFormGroup(e.betId),super.getEntity(e.betId,{options:{include:[{association:"details",include:[{association:"lottery"}]},{association:"employee"}]}}).subscribe(()=>{c()})):this.configFormGroup()})}iniEntity(){let e=null;this.entity&&this.entity.employeeId&&(e=this.entity.employeeId);let t=this.authService.getItem("currentUser");this.entity={employeeId:null,userId:t.id,price:null,firstThree:!1,firstThreePrice:null,lastThree:!1,lastThreePrice:null,chock:!1,chockFourFigurePrice:null,chockThreeFigurePrice:null,combined:!1,combinedFourFigurePrice:null,combinedThreeFigurePrice:null,total:null,details:[]},this.entity.employeeId=e}compare(e,t){const i=e.lotteryId,n=t.lotteryId;let r=0;return i>n?r=1:i<n&&(r=-1),r}getName(e){let t=this.lotteries.find(t=>t.id==e);return t?t.name:""}numberOnly(e){const t=e.which?e.which:e.keyCode;return!(t>31&&(t<48||t>57))}preventEnter(){}lotteryChange(e){const t=this.entityForm.get("checkLotteries");let i=this.lotteries.find(t=>t.id==e.source.value),n=!1,c=!1;if(e.checked){t.push(new r.d({id:e.source.value,isThreeFigures:i.isThreeFigures}));let o=0;for(let e of t.value)if(e.isThreeFigures&&(o+=1,c=!0,o>=2)){n=!0;break}let a=[],s=(e,t)=>{let i=JSON.parse(JSON.stringify(e));return i.number=i.number.substring(1,e.number.length),i.lotteryId=t.id,i.isFourFigure=!1,i.isLastThree=!0,i},l=this.entity.details.filter(e=>e.lotteryId==this.entity.details[0].lotteryId||!e.lotteryId),u=!1;for(let e of this.entity.details)e.number.length>3&&(u=!1);for(let e of l)if(3==e.number.length)if(e.isFirstThree||(e.isLastThree=!0),e.lotteryId){let t=JSON.parse(JSON.stringify(e));t.lotteryId=i.id,t.isFourFigure=!1,a.push(t)}else e.lotteryId=i.id;else if(e.lotteryId||i.isThreeFigures)if(!e.lotteryId&&i.isThreeFigures)a.push(s(e,i));else if(i.isThreeFigures){if(!n&&!this.entity.lastThree){for(let i of t.value)!i.isThreeFigures&&e.number.length>3&&a.push(s(e,i));a.push(s(e,i))}}else{let t=JSON.parse(JSON.stringify(e));t.lotteryId=i.id,t.isFourFigure=3!=t.number.length,a.push(t)}else{e.lotteryId=i.id;let t=this.lotteries.find(e=>e.id==this.entity.details[0].lotteryId);c&&!t.isThreeFigures&&a.push(s(e,i))}this.entity.details=this.entity.details.concat(a)}else{let r=0;for(let e of t.value)if(e.isThreeFigures&&(r+=1,c=!0,r>=2)){n=!0;break}let o=0;t.controls.forEach(i=>{i.value.id!=e.source.value?o++:t.removeAt(o)});let a=[];for(let e=0;e<this.entity.details.length;e++){let t=this.entity.details[e];t.lotteryId==i.id&&a.push(e),!i.isThreeFigures||this.entity.lastThree||n||t.lotteryId!=i.id&&t.isLastThree&&a.push(e)}this.onDeleteCustom(a)}this.entity.details.sort(this.compare),this.calculateTotal()}add(){const e=this.entityForm.get("number");if(this.number&&this.number.toString().length>2&&e.valid){const e=this.entityForm.get("checkLotteries");let t=!1,i=!1,n=!1,r=0;for(let o of e.value)if(o.isThreeFigures&&(r+=1,i=!0,r>=2)){t=!0;break}for(let o of e.value)if(!o.isThreeFigures){n=!0;break}let c=!1;if(4==this.number.toString().length&&(c=!0),!n&&i&&c&&this.entity.details.push({number:this.number,price:this.entity.price,accumulated:this.entity.price,isFourFigure:c}),e.value.length)for(let o of e.value){let e={lotteryId:o.id,isFourFigure:c,price:this.entity.price,accumulated:this.entity.price};if(c||(e.isLastThree=!0),o.isThreeFigures)e.isLastThree=!0,this.number.length>3?(e.isFourFigure=!1,e.number=this.number.substring(1,this.number.length)):e.number=this.number;else if(e.number=this.number,i&&this.number.length>3){let t=JSON.parse(JSON.stringify(e));t.isFourFigure=!1,t.isLastThree=!0,t.number=this.number.substring(1,this.number.length),this.entity.lastThree&&(t.price=this.entity.lastThreePrice,t.accumulated=this.entity.lastThreePrice),this.entity.details.push(t)}if((3==e.number.length&&i||3==e.number.length&&this.entity.lastThree)&&(e.isLastThree=!0,this.entity.lastThree&&(e.price=this.entity.lastThreePrice,e.accumulated=this.entity.lastThreePrice)),this.entity.details.push(e),this.entity.firstThree&&this.number.toString().length>3){let e={lotteryId:o.id,number:this.number.substring(0,this.number.length-1),price:this.entity.firstThreePrice,accumulated:this.entity.firstThreePrice,isFourFigure:!1,isFirstThree:!0};this.entity.details.push(e)}if(this.entity.lastThree&&!i&&this.number.toString().length>3){let e={lotteryId:o.id,number:this.number.substring(1,this.number.length),price:this.entity.lastThreePrice,accumulated:this.entity.lastThreePrice,isFourFigure:!1,isLastThree:!0};this.entity.details.push(e)}}else{let e={number:this.number,price:this.entity.price,accumulated:this.entity.price,isFourFigure:c};if(c||(e.isLastThree=!0),3==this.number.length&&this.entity.lastThree&&(e.isLastThree=!0,this.entity.lastThree&&(e.price=this.entity.lastThreePrice,e.accumulated=this.entity.lastThreePrice)),this.entity.details.push(e),this.entity.firstThree&&this.number.toString().length>3){let e={number:this.number.substring(0,this.number.length-1),price:this.entity.firstThreePrice,accumulated:this.entity.firstThreePrice,isFourFigure:!1,isFirstThree:!0,isLastThree:!1};this.entity.details.push(e)}if(this.entity.lastThree&&this.number.toString().length>3){let e={number:this.number.substring(1,this.number.length),price:this.entity.lastThreePrice,accumulated:this.entity.lastThreePrice,isFourFigure:!1,isLastThree:!0,isFirstThree:!1};this.entity.details.push(e)}}}this.number=null,this.entity.details.sort(this.compare),this.calculateTotal()}onDeleteCustomGrid(e){let t=[],i=[];for(let n=0;n<this.entity.details.length;n++){let r=this.entity.details[n];r.number==e.number&&(i.find(e=>e.number==r.number&&e.lotteryId==r.lotteryId)||(i.push(r),t.push(n)))}this.onDeleteCustom(t)}onDeleteCustom(e){let t=[];for(let i=e.length-1;i>=0;i--){let n=this.entity.details[e[i]];n.id&&t.push(n.id),this.entity.details.splice(e[i],1)}if(t.length)this.view.service.deleteOptions(this.entityDetailApi,{options:{where:{id:t}}}).subscribe(e=>{if(this.entity.details.sort(this.compare),this.calculateTotal(),!this.entity.details.length){const e=this.entityForm.get("checkNumbers");let t=e.controls.length;for(let i=0;i<t;i++)e.removeAt(0)}this.view.service.save(this.view.entityApi,{id:this.entity.id,employeeId:this.entity.employeeId,userId:this.entity.userId,price:this.entity.price,firstThree:this.entity.firstThree,firstThreePrice:this.entity.firstThreePrice,lastThree:this.entity.lastThree,lastThreePrice:this.entity.lastThreePrice,chock:this.entity.chock,chockFourFigurePrice:this.entity.chockFourFigurePrice,chockThreeFigurePrice:this.entity.chockThreeFigurePrice,combined:this.entity.combined,combinedFourFigurePrice:this.entity.combinedFourFigurePrice,combinedThreeFigurePrice:this.entity.combinedThreeFigurePrice,total:this.entity.total}).subscribe(e=>{this.entity=e||this.entity,this.view._snackBar&&this.view._snackBar.open("Salvo","Correctamente",{duration:2e3})})});else if(this.entity.details.sort(this.compare),this.calculateTotal(),!this.entity.details.length){const e=this.entityForm.get("checkNumbers");let t=e.controls.length;for(let i=0;i<t;i++)e.removeAt(0)}}beforeSaved(){let e=!0,t=!0;const i=this.entityForm.get("checkLotteries");for(let n of i.value)if(!this.lotteries.find(e=>e.id==n.id).isThreeFigures){t=!1;break}if(t)for(let n of this.entity.details)n.number.length>3&&(alert("Solo 3 cifras en las loterias seleccionadas"),e=!1);for(let n of this.entity.details){let t=this.forbiddenNumbers.find(e=>e.number==n.number&&e.lotteryId==n.lotteryId);t&&(alert("El N\xfamero: "+t.number+"; prohibido en "+t.lotteryName),e=!1)}return e}changePrice(){for(let e of this.entity.details)this.entity.firstThree&&e.isFirstThree?(e.price=this.entity.firstThreePrice,e.accumulated=this.entity.firstThreePrice):this.entity.lastThree&&e.isLastThree?(e.price=this.entity.lastThreePrice,e.accumulated=this.entity.lastThreePrice):(e.price=this.entity.price,e.accumulated=this.entity.price);this.calculateTotal()}calculateTotal(){if(this.entity.details.length){const e=this.entityForm.get("checkNumbers");e.value.length||e.push(new r.d({id:Object(G.a)()}))}this.entity.total=0;let e,t,i=0,n=0,c=!1,o=!1;for(let r of this.entity.details)this.entity.total+=r.price,3==r.number.length?(i++,o||(o=!0,t=r.lotteryId)):(n++,c||(c=!0,e=r.lotteryId));this.entity.chock&&(i?(this.entity.total+=this.entity.chockFourFigurePrice*n,this.entity.total+=this.entity.chockThreeFigurePrice*i):this.entity.total+=this.entity.chockFourFigurePrice*n),this.entity.combined&&(i?(this.entity.total+=this.entity.combinedFourFigurePrice*n,this.entity.total+=this.entity.combinedThreeFigurePrice*i):this.entity.total+=this.entity.combinedFourFigurePrice*n);let a=[];this.entity.details.length&&(a=this.entity.details.filter(c?e?t=>t.lotteryId==e:t?i=>i.lotteryId==t||i.lotteryId==e:t=>t.lotteryId==e:e=>e.lotteryId==t)),this.dataSource=new k.o(a)}firstThreeChange(e){if(e.checked){this.entityForm.get("firstThreePrice").setValidators([r.s.required]);const e=this.entityForm.get("checkLotteries");this.entity.firstThreePrice=this.entity.price;let t=[],i=JSON.parse(JSON.stringify(this.entity.details)),n=null;for(let r of i)if(4==r.number.length){let e=JSON.parse(JSON.stringify(r));e.isFourFigure=!1,e.isLastThree=!1,e.isFirstThree=!0,e.number=e.number.substring(0,e.number.length-1),t.push(e),n||(n=r.lotteryId)}if(n){let i=this.entity.details.filter(e=>e.lotteryId==n&&e.number.length>3);for(let n of i)for(let i of e.value)if(i.isThreeFigures){let e=JSON.parse(JSON.stringify(n));e.isFourFigure=!1,e.isLastThree=!1,e.isFirstThree=!0,e.lotteryId=i.id,e.number=e.number.substring(0,e.number.length-1),t.push(e)}}this.entity.details=this.entity.details.concat(t)}else{this.entityForm.get("firstThreePrice").clearValidators();let e=[];for(let t=0;t<this.entity.details.length;t++)this.entity.details[t].isFirstThree&&e.push(t);this.onDeleteCustom(e)}this.entityForm.get("firstThreePrice").updateValueAndValidity(),this.entity.details.sort(this.compare),this.calculateTotal()}firstThreePriceChange(){for(let e of this.entity.details)3==e.number.length&&e.isFirstThree&&(e.price=this.entity.firstThreePrice,e.accumulated=this.entity.firstThreePrice);this.calculateTotal()}lastThreeChange(e){const t=this.entityForm.get("checkLotteries");let i=!1,n=!1,c=0;for(let r of t.value)if(r.isThreeFigures&&(c+=1,i=!0,c>=2)){n=!0;break}if(e.checked){if(this.entity.lastThreePrice=this.entity.price,this.entityForm.get("lastThreePrice").setValidators([r.s.required]),!i){let e=[],t=JSON.parse(JSON.stringify(this.entity.details));for(let i of t)if(4==i.number.length){let t=JSON.parse(JSON.stringify(i));t.isFourFigure=!1,t.isLastThree=!0,t.isFirstThree=!1,t.number=t.number.substring(1,t.number.length),e.push(t)}this.entity.details=this.entity.details.concat(e)}}else if(this.entityForm.get("lastThreePrice").clearValidators(),!i){let e=[];for(let t=0;t<this.entity.details.length;t++)this.entity.details[t].isLastThree&&e.push(t);this.onDeleteCustom(e)}this.entityForm.get("lastThreePrice").updateValueAndValidity(),this.entity.details.sort(this.compare),this.calculateTotal()}lastThreePriceChange(){for(let e of this.entity.details)3==e.number.length&&e.isLastThree&&(e.price=this.entity.lastThreePrice,e.accumulated=this.entity.lastThreePrice);this.calculateTotal()}chockChange(e){const t=this.entityForm.get("checkChock");if(e.checked)this.entityForm.get("checkChock").setValidators([r.s.required]),this.entity.price&&(this.entity.chockFourFigurePrice=this.entity.price,this.entity.chockThreeFigurePrice=this.entity.price,t.push(new r.d({id:Object(G.a)(),chockFourFigure:!0})),t.push(new r.d({id:Object(G.a)(),chockFourFigure:!1})));else{this.entity.chockFourFigurePrice=null,this.entity.chockThreeFigurePrice=null;let e=0;t.controls.forEach(i=>{t.removeAt(e),e++}),this.entityForm.get("checkChock").clearValidators()}this.entityForm.get("checkChock").updateValueAndValidity(),this.calculateTotal()}chockFourFigurePriceChange(){const e=this.entityForm.get("checkChock");if(this.entity.chockFourFigurePrice)e.push(new r.d({id:Object(G.a)(),ChockFourFigure:!0}));else{let t=0;e.controls.forEach(i=>{e.removeAt(t)})}this.calculateTotal()}chockThreeFigurePriceChange(){const e=this.entityForm.get("checkChock");if(this.entity.chockThreeFigurePrice)e.push(new r.d({id:Object(G.a)(),ChockFourFigure:!1}));else{let t=0;e.controls.forEach(i=>{e.removeAt(t)})}this.calculateTotal()}combinedChange(e){const t=this.entityForm.get("checkCombined");if(e.checked)this.entityForm.get("checkCombined").setValidators([r.s.required]),this.entity.price&&(this.entity.combinedFourFigurePrice=this.entity.price,this.entity.combinedThreeFigurePrice=this.entity.price,t.push(new r.d({id:Object(G.a)(),combinedFourFigure:!0})),t.push(new r.d({id:Object(G.a)(),combinedFourFigure:!1})));else{this.entity.combinedFourFigurePrice=null,this.entity.combinedThreeFigurePrice=null;let e=0;t.controls.forEach(i=>{t.removeAt(e),e++}),this.entityForm.get("checkCombined").clearValidators()}this.entityForm.get("checkCombined").updateValueAndValidity(),this.calculateTotal()}combinedFourFigurePriceChange(){const e=this.entityForm.get("checkCombined");if(this.entity.combinedFourFigurePrice)e.push(new r.d({id:Object(G.a)(),combinedFourFigure:!0}));else{let t=0;e.controls.forEach(i=>{e.removeAt(t)})}this.calculateTotal()}combinedThreeFigurePriceChange(){const e=this.entityForm.get("checkCombined");if(this.entity.combinedThreeFigurePrice)e.push(new r.d({id:Object(G.a)(),combinedFourFigure:!1}));else{let t=0;e.controls.forEach(i=>{e.removeAt(t)})}this.calculateTotal()}new(){this.iniEntity(),this.number=null;for(let e of this.lotteries)e.check=!1;if(this.entityForm){const e=this.entityForm.get("checkNumbers");let t=e.controls.length;for(let n=0;n<t;n++)e.removeAt(0);const i=this.entityForm.get("checkLotteries");t=i.controls.length;for(let n=0;n<t;n++)i.removeAt(0)}this.dataSource=new k.o([])}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(u.a),l.Ob(h.a),l.Ob(o.a),l.Ob(r.c),l.Ob(o.f),l.Ob(l.h),l.Ob(b.a))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-bet2"]],features:[l.zb],decls:72,vars:39,consts:[["fxLayout","row","fxLayoutWrap","wrap"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100"],[3,"formGroup"],["fxLayout","row","fxLayoutWrap","wrap",2,"overflow","hidden"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100",2,"float","left","width","50%"],[2,"width","95%"],["matNativeControl","","formControlName","employeeId","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matInput","","formControlName","total","type","number","placeholder","Total","onKeyPress","if(this.value.length==9) return false;","autocomplete","off",3,"ngModel","readonly","keypress","ngModelChange"],["style","margin-right: 25px;",3,"ngModel","ngModelOptions","value","ngStyle","ngModelChange","change",4,"ngFor","ngForOf"],["matInput","","placeholder","Entre number","formControlName","number","onKeyPress","if(this.value.length===4) return false;","autocomplete","off",3,"ngModel","keypress","ngModelChange","keyup.enter"],["matInput","","formControlName","price","type","number","placeholder","Entre Precio","onKeyPress","if(this.value.length==9) return false;","autocomplete","off","required","",3,"ngModel","keypress","ngModelChange","change"],["fxLayout","row","fxLayoutWrap","wrap",2,"margin-text-outline","10px","margin-top","10px","overflow","hidden"],[2,"margin-right","10px",3,"ngModel","ngModelOptions","ngModelChange","change"],["style","width: 77%;",4,"ngIf"],["style","width: 32%;margin-right: 10px;",4,"ngIf"],["style","width: 32%",4,"ngIf"],["fxLayout","row","fxLayoutWrap","wrap",2,"margin-top","10px"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-fab","","color","accent",3,"disabled","click"],["mat-fab","","color","primary",3,"click"],[3,"value"],[2,"margin-right","25px",3,"ngModel","ngModelOptions","value","ngStyle","ngModelChange","change"],[2,"width","77%"],["matInput","","formControlName","firstThreePrice","type","number","placeholder","Entre precio, tres primeras","onKeyPress","if(this.value.length==9) return false;","autocomplete","off","required","",3,"ngModel","keypress","ngModelChange","change"],[2,"width","32%","margin-right","10px"],["matInput","","type","number","placeholder","Cuatro cifras, cu\xf1a","onKeyPress","if(this.value.length==9) return false;","autocomplete","off",3,"ngModelOptions","ngModel","keypress","ngModelChange","change"],[2,"width","32%"],["matInput","","type","number","placeholder","Tres cifras, cu\xf1a","onKeyPress","if(this.value.length==9) return false;","autocomplete","off",3,"ngModelOptions","ngModel","keypress","ngModelChange","change"],["matInput","","formControlName","lastThreePrice","type","number","placeholder","Entre precio, tres ultimas","onKeyPress","if(this.value.length==9) return false;","autocomplete","off","required","",3,"ngModel","keypress","ngModelChange","change"],["matInput","","type","number","placeholder","Cuatro cifras, combinado","onKeyPress","if(this.value.length==9) return false;","autocomplete","off",3,"ngModelOptions","ngModel","keypress","ngModelChange","change"],["matInput","","type","number","placeholder","Tres cifras, combinado","onKeyPress","if(this.value.length==9) return false;","autocomplete","off",3,"ngModelOptions","ngModel","keypress","ngModelChange","change"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],["mat-button","",3,"click",4,"ngIf"],["mat-button","","color","warn",3,"click",4,"ngIf"],["mat-button","",3,"click"],["mat-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"mat-card"),l.Ub(3,"mat-card-header"),l.Ub(4,"mat-card-title"),l.Ub(5,"div",0),l.Ub(6,"div",2),l.zc(7),l.Tb(),l.Tb(),l.Tb(),l.Ub(8,"mat-card-subtitle"),l.Ub(9,"div",0),l.Ub(10,"div",2),l.zc(11),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(12,"mat-card-content"),l.Ub(13,"form",3),l.Ub(14,"div",4),l.Ub(15,"div",5),l.Ub(16,"mat-form-field",6),l.Ub(17,"mat-label"),l.zc(18,"Seleccione C\xf3digo"),l.Tb(),l.Ub(19,"mat-select",7),l.cc("ngModelChange",(function(e){return t.entity.employeeId=e})),l.yc(20,nt,2,2,"mat-option",8),l.Tb(),l.yc(21,rt,2,1,"mat-error",9),l.Tb(),l.Tb(),l.Ub(22,"div",5),l.Ub(23,"mat-form-field"),l.Ub(24,"input",10),l.cc("keypress",(function(e){return t.numberOnly(e)}))("ngModelChange",(function(e){return t.entity.total=e})),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(25,"div",0),l.Ub(26,"div",2),l.yc(27,at,2,8,"mat-checkbox",11),l.yc(28,st,2,1,"mat-error",9),l.Tb(),l.Tb(),l.Ub(29,"div",0),l.Ub(30,"div",2),l.Ub(31,"mat-form-field"),l.Ub(32,"input",12),l.cc("keypress",(function(e){return t.numberOnly(e)}))("ngModelChange",(function(e){return t.number=e}))("keyup.enter",(function(){return t.add()})),l.Tb(),l.yc(33,lt,2,1,"mat-error",9),l.Tb(),l.Tb(),l.Tb(),l.Ub(34,"div",0),l.Ub(35,"div",2),l.Ub(36,"mat-form-field"),l.Ub(37,"input",13),l.cc("keypress",(function(e){return t.numberOnly(e)}))("ngModelChange",(function(e){return t.entity.price=e}))("change",(function(){return t.changePrice()})),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(38,"div",14),l.Ub(39,"div",5),l.Ub(40,"mat-checkbox",15),l.cc("ngModelChange",(function(e){return t.entity.firstThree=e}))("change",(function(e){return t.firstThreeChange(e)})),l.zc(41,"Tres primeras "),l.Tb(),l.yc(42,ut,2,1,"mat-form-field",16),l.Tb(),l.Ub(43,"div",5),l.Ub(44,"mat-checkbox",15),l.cc("ngModelChange",(function(e){return t.entity.chock=e}))("change",(function(e){return t.chockChange(e)})),l.zc(45,"Cu\xf1a "),l.Tb(),l.yc(46,ht,2,3,"mat-form-field",17),l.yc(47,bt,2,3,"mat-form-field",18),l.yc(48,dt,2,1,"mat-error",9),l.Tb(),l.Tb(),l.Ub(49,"div",14),l.Ub(50,"div",5),l.Ub(51,"mat-checkbox",15),l.cc("ngModelChange",(function(e){return t.entity.lastThree=e}))("change",(function(e){return t.lastThreeChange(e)})),l.zc(52,"Tres Ultimas "),l.Tb(),l.yc(53,gt,2,1,"mat-form-field",16),l.Tb(),l.Ub(54,"div",5),l.Ub(55,"mat-checkbox",15),l.cc("ngModelChange",(function(e){return t.entity.combined=e}))("change",(function(e){return t.combinedChange(e)})),l.zc(56,"Combinado "),l.Tb(),l.yc(57,mt,2,3,"mat-form-field",17),l.yc(58,ft,2,3,"mat-form-field",18),l.yc(59,yt,2,1,"mat-error",9),l.Tb(),l.Tb(),l.Ub(60,"div",19),l.Ub(61,"div",2),l.Ub(62,"table",20),l.yc(63,vt,3,1,"ng-container",21),l.yc(64,kt,1,0,"tr",22),l.yc(65,Ut,1,0,"tr",23),l.Tb(),l.yc(66,wt,2,1,"mat-error",9),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(67,"mat-card-actions"),l.Ub(68,"button",24),l.cc("click",(function(){return t.save()})),l.zc(69,"Salvar"),l.Tb(),l.Ub(70,"button",25),l.cc("click",(function(){return t.new()})),l.zc(71,"Nuevo"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&e&&(l.Cb(7),l.Bc(" ",t.title," "),l.Cb(4),l.Bc(" ",t.subtitle," "),l.Cb(2),l.lc("formGroup",t.entityForm),l.Cb(6),l.lc("ngModel",t.entity.employeeId),l.Cb(1),l.lc("ngForOf",t.employees),l.Cb(1),l.lc("ngIf",t.entityForm.invalid),l.Cb(3),l.lc("ngModel",t.entity.total)("readonly",!0),l.Cb(3),l.lc("ngForOf",t.lotteries),l.Cb(1),l.lc("ngIf",t.entityForm.invalid),l.Cb(4),l.lc("ngModel",t.number),l.Cb(1),l.lc("ngIf",t.entityForm.invalid),l.Cb(4),l.lc("ngModel",t.entity.price),l.Cb(3),l.lc("ngModel",t.entity.firstThree)("ngModelOptions",l.mc(35,ct)),l.Cb(2),l.lc("ngIf",t.entity.firstThree),l.Cb(2),l.lc("ngModel",t.entity.chock)("ngModelOptions",l.mc(36,ct)),l.Cb(2),l.lc("ngIf",t.entity.chock),l.Cb(1),l.lc("ngIf",t.entity.chock),l.Cb(1),l.lc("ngIf",t.entity.chock&&t.entityForm.invalid),l.Cb(3),l.lc("ngModel",t.entity.lastThree)("ngModelOptions",l.mc(37,ct)),l.Cb(2),l.lc("ngIf",t.entity.lastThree),l.Cb(2),l.lc("ngModel",t.entity.combined)("ngModelOptions",l.mc(38,ct)),l.Cb(2),l.lc("ngIf",t.entity.combined),l.Cb(1),l.lc("ngIf",t.entity.combined),l.Cb(1),l.lc("ngIf",t.entity.combined&&t.entityForm.invalid),l.Cb(3),l.lc("dataSource",t.dataSource),l.Cb(1),l.lc("ngForOf",t.displayedColumns),l.Cb(1),l.lc("matHeaderRowDef",t.displayedColumns),l.Cb(1),l.lc("matRowDefColumns",t.displayedColumns),l.Cb(1),l.lc("ngIf",t.entityForm.invalid),l.Cb(2),l.lc("disabled",!t.entityForm.valid))},directives:[d.a,d.e,d.h,d.g,d.c,r.t,r.m,r.g,g.c,g.f,f.a,r.l,r.e,r.r,n.j,n.k,m.b,r.b,r.p,y.a,r.o,k.n,U.a,k.k,k.m,d.b,p.a,C.n,g.b,n.l,k.c,k.i,k.b,k.h,k.a,F.a,k.j,k.l],encapsulation:2}),e})();function xt(e,t){1&e&&(l.Ub(0,"th",19),l.zc(1," Id "),l.Tb())}function Pt(e,t){if(1&e&&(l.Ub(0,"td",20),l.zc(1),l.Tb()),2&e){const e=t.$implicit;l.Cb(1),l.Bc(" ",e.id," ")}}function It(e,t){if(1&e&&(l.Ub(0,"th",19),l.zc(1),l.Tb()),2&e){const e=l.gc().$implicit;l.Cb(1),l.Bc(" ",e," ")}}function Ot(e,t){1&e&&(l.Ub(0,"span",23),l.zc(1,"notification_important"),l.Tb())}function Dt(e,t){if(1&e&&(l.Ub(0,"td",20),l.Ub(1,"span"),l.zc(2),l.Tb(),l.yc(3,Ot,2,0,"span",22),l.Tb()),2&e){const e=t.$implicit,i=l.gc().$implicit,n=l.gc();l.Cb(2),l.Ac(e[i]),l.Cb(1),l.lc("ngIf","actions"===i&&n.validateAlert(e))}}function St(e,t){1&e&&(l.Sb(0,21),l.yc(1,It,2,1,"th",13),l.yc(2,Dt,4,2,"td",14),l.Rb()),2&e&&l.lc("matColumnDef",t.$implicit)}function zt(e,t){1&e&&l.Pb(0,"tr",24)}function At(e,t){1&e&&l.Pb(0,"tr",25)}function Lt(e,t){1&e&&(l.Ub(0,"th",19),l.zc(1," Id "),l.Tb())}function Nt(e,t){if(1&e&&(l.Ub(0,"td",20),l.zc(1),l.Tb()),2&e){const e=t.$implicit;l.Cb(1),l.Bc(" ",e.id," ")}}function Et(e,t){if(1&e&&(l.Ub(0,"th",19),l.zc(1),l.Tb()),2&e){const e=l.gc().$implicit;l.Cb(1),l.Bc(" ",e," ")}}function Rt(e,t){1&e&&(l.Ub(0,"span",23),l.zc(1,"notification_important"),l.Tb())}function Vt(e,t){if(1&e&&(l.Ub(0,"td",20),l.Ub(1,"span"),l.zc(2),l.Tb(),l.yc(3,Rt,2,0,"span",22),l.Tb()),2&e){const e=t.$implicit,i=l.gc().$implicit,n=l.gc();l.Cb(2),l.Ac(e[i]),l.Cb(1),l.lc("ngIf","actions"===i&&n.validateAlert(e))}}function $t(e,t){1&e&&(l.Sb(0,21),l.yc(1,Et,2,1,"th",13),l.yc(2,Vt,4,2,"td",14),l.Rb()),2&e&&l.lc("matColumnDef",t.$implicit)}function Bt(e,t){1&e&&l.Pb(0,"tr",24)}function qt(e,t){1&e&&l.Pb(0,"tr",25)}const jt=[{path:"betalerts",canActivate:[a.a],component:Pe},{path:"betfourfigure",canActivate:[a.a],component:(()=>{class e extends v.a{constructor(e,t,i){super(),this.service=e,this.authService=t,this.router=i,this.entityApi="bets",this.price=5e4,this.settings={query:{table:"vw_betAlerts"},options:{where:{isFourFigure:!0,accumulatedTotal:{$gte:this.price}},order:[["accumulated","desc"],["accumulatedTotal","desc"]]}},this.displayedColumns=["lottery","number","accumulated","createdDate","accumulatedTotal","actions"],this.filtersColumns=["lottery"],this.createdDate=new Date}ngOnInit(){this.title="Apuestas Alertas Cuantro Cifras Mayores A",this.subtitle="Apuesta",super.init(this),super.onPageChange()}ngOnChanges(e){this.loadChange&&super.onPageChange()}onEdit(e){}validateAlert(e){let t=!1;return e.accumulatedTotal>=this.price&&(t=!0),t}numberOnly(e){const t=e.which?e.which:e.keyCode;return!(t>31&&(t<48||t>57))}beforePageChange(){if(this.settings={query:{table:"vw_betAlerts"},options:{where:{isFourFigure:!0,accumulatedTotal:{$gte:this.price}},order:[["accumulated","desc"],["accumulatedTotal","desc"]]}},this.createdDate){var e=this.createdDate.getDate()+"/"+(this.createdDate.getMonth()+1)+"/"+this.createdDate.getFullYear();this.settings.options.where.createdDate=e}else delete this.settings.options.where.createdDate}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(u.a),l.Ob(h.a),l.Ob(o.f))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-bet-four-figure"]],inputs:{loadChange:"loadChange"},features:[l.zb,l.Ab],decls:36,vars:13,consts:[["fxLayout","row","fxLayoutWrap","wrap"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100"],[2,"float","left","width","30%","margin-right","10px"],["matInput","","type","number","placeholder","Entre precio","onKeyPress","if(this.value.length==9) return false;","autocomplete","off",3,"ngModel","keypress","ngModelChange"],[2,"width","30%","margin-right","10px"],["matInput","",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],["fxFlex.gt-sm","100","fxFlex.gt-xs","100",2,"overflow","hidden"],["mat-fab","","color","basic",2,"float","left",3,"click"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell",""],["mat-cell",""],[3,"matColumnDef"],["class","material-icons",4,"ngIf"],[1,"material-icons"],["mat-header-row",""],["mat-row",""]],template:function(e,t){if(1&e&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"mat-card"),l.Ub(3,"mat-card-header"),l.Ub(4,"mat-card-title"),l.Ub(5,"div",0),l.Ub(6,"div",2),l.zc(7),l.Tb(),l.Tb(),l.Tb(),l.Ub(8,"mat-card-subtitle"),l.Ub(9,"div",0),l.Ub(10,"div",2),l.zc(11),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(12,"mat-card-content"),l.Ub(13,"div",0),l.Ub(14,"div",2),l.Ub(15,"mat-form-field",3),l.Ub(16,"input",4),l.cc("keypress",(function(e){return t.numberOnly(e)}))("ngModelChange",(function(e){return t.price=e})),l.Tb(),l.Tb(),l.Ub(17,"mat-form-field",5),l.Ub(18,"mat-label"),l.zc(19,"Seleccione fecha"),l.Tb(),l.Ub(20,"input",6),l.cc("ngModelChange",(function(e){return t.createdDate=e})),l.Tb(),l.Pb(21,"mat-datepicker-toggle",7),l.Pb(22,"mat-datepicker",null,8),l.Tb(),l.Tb(),l.Tb(),l.Ub(24,"div",0),l.Ub(25,"div",9),l.Ub(26,"button",10),l.cc("click",(function(){return t.onPageChange()})),l.zc(27,"Refrescar"),l.Tb(),l.Tb(),l.Tb(),l.Ub(28,"table",11),l.cc("matSortChange",(function(e){return t.onSortChange(e)})),l.Sb(29,12),l.yc(30,xt,2,0,"th",13),l.yc(31,Pt,2,1,"td",14),l.Rb(),l.yc(32,St,3,1,"ng-container",15),l.yc(33,zt,1,0,"tr",16),l.yc(34,At,1,0,"tr",17),l.Tb(),l.Ub(35,"mat-paginator",18),l.cc("page",(function(e){return t.onPaginatorChange(e)})),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&e){const e=l.qc(23);l.Cb(7),l.Bc(" ",t.title," "),l.Cb(4),l.Bc(" ",t.subtitle," "),l.Cb(5),l.lc("ngModel",t.price),l.Cb(4),l.lc("matDatepicker",e)("ngModel",t.createdDate),l.Cb(1),l.lc("for",e),l.Cb(7),l.lc("dataSource",t.dataSource),l.Cb(4),l.lc("ngForOf",t.displayedColumns),l.Cb(1),l.lc("matHeaderRowDef",t.displayedColumns),l.Cb(1),l.lc("matRowDefColumns",t.displayedColumns),l.Cb(1),l.lc("length",t.length)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions)}},directives:[d.a,d.e,d.h,d.g,d.c,g.c,m.b,r.p,r.b,r.l,r.o,g.f,fe.b,fe.d,g.g,fe.a,p.a,k.n,U.a,k.c,k.i,k.b,n.j,k.k,k.m,w.a,k.h,k.a,n.k,k.j,k.l],encapsulation:2}),e})()},{path:"betthreefigure",canActivate:[a.a],component:(()=>{class e extends v.a{constructor(e,t,i){super(),this.service=e,this.authService=t,this.router=i,this.entityApi="bets",this.price=7e4,this.settings={query:{table:"vw_betAlerts"},options:{where:{isFourFigure:!1,accumulatedTotal:{$gte:this.price}},order:[["accumulated","desc"],["accumulatedTotal","desc"]]}},this.displayedColumns=["lottery","number","accumulated","createdDate","accumulatedTotal","actions"],this.filtersColumns=["lottery"],this.createdDate=new Date}ngOnInit(){this.title="Apuestas Alertas Tres Cifras Mayores A",this.subtitle="Apuesta",super.init(this),super.onPageChange()}ngOnChanges(e){this.loadChange&&super.onPageChange()}onEdit(e){}validateAlert(e){let t=!1;return e.accumulatedTotal>=this.price&&(t=!0),t}numberOnly(e){const t=e.which?e.which:e.keyCode;return!(t>31&&(t<48||t>57))}beforePageChange(){if(this.settings={query:{table:"vw_betAlerts"},options:{where:{isFourFigure:!1,accumulatedTotal:{$gte:this.price}},order:[["accumulated","desc"],["accumulatedTotal","desc"]]}},this.createdDate){var e=this.createdDate.getDate()+"/"+(this.createdDate.getMonth()+1)+"/"+this.createdDate.getFullYear();this.settings.options.where.createdDate=e}else delete this.settings.options.where.createdDate}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(u.a),l.Ob(h.a),l.Ob(o.f))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-bet-three-figure"]],inputs:{loadChange:"loadChange"},features:[l.zb,l.Ab],decls:36,vars:13,consts:[["fxLayout","row","fxLayoutWrap","wrap"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100"],[2,"float","left","width","30%","margin-right","10px"],["matInput","","type","number","placeholder","Entre precio","onKeyPress","if(this.value.length==9) return false;","autocomplete","off",3,"ngModel","keypress","ngModelChange"],[2,"width","30%","margin-right","10px"],["matInput","",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],["fxFlex.gt-sm","100","fxFlex.gt-xs","100",2,"overflow","hidden"],["mat-fab","","color","basic",2,"float","left",3,"click"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell",""],["mat-cell",""],[3,"matColumnDef"],["class","material-icons",4,"ngIf"],[1,"material-icons"],["mat-header-row",""],["mat-row",""]],template:function(e,t){if(1&e&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"mat-card"),l.Ub(3,"mat-card-header"),l.Ub(4,"mat-card-title"),l.Ub(5,"div",0),l.Ub(6,"div",2),l.zc(7),l.Tb(),l.Tb(),l.Tb(),l.Ub(8,"mat-card-subtitle"),l.Ub(9,"div",0),l.Ub(10,"div",2),l.zc(11),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(12,"mat-card-content"),l.Ub(13,"div",0),l.Ub(14,"div",2),l.Ub(15,"mat-form-field",3),l.Ub(16,"input",4),l.cc("keypress",(function(e){return t.numberOnly(e)}))("ngModelChange",(function(e){return t.price=e})),l.Tb(),l.Tb(),l.Ub(17,"mat-form-field",5),l.Ub(18,"mat-label"),l.zc(19,"Seleccione fecha"),l.Tb(),l.Ub(20,"input",6),l.cc("ngModelChange",(function(e){return t.createdDate=e})),l.Tb(),l.Pb(21,"mat-datepicker-toggle",7),l.Pb(22,"mat-datepicker",null,8),l.Tb(),l.Tb(),l.Tb(),l.Ub(24,"div",0),l.Ub(25,"div",9),l.Ub(26,"button",10),l.cc("click",(function(){return t.onPageChange()})),l.zc(27,"Refrescar"),l.Tb(),l.Tb(),l.Tb(),l.Ub(28,"table",11),l.cc("matSortChange",(function(e){return t.onSortChange(e)})),l.Sb(29,12),l.yc(30,Lt,2,0,"th",13),l.yc(31,Nt,2,1,"td",14),l.Rb(),l.yc(32,$t,3,1,"ng-container",15),l.yc(33,Bt,1,0,"tr",16),l.yc(34,qt,1,0,"tr",17),l.Tb(),l.Ub(35,"mat-paginator",18),l.cc("page",(function(e){return t.onPaginatorChange(e)})),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&e){const e=l.qc(23);l.Cb(7),l.Bc(" ",t.title," "),l.Cb(4),l.Bc(" ",t.subtitle," "),l.Cb(5),l.lc("ngModel",t.price),l.Cb(4),l.lc("matDatepicker",e)("ngModel",t.createdDate),l.Cb(1),l.lc("for",e),l.Cb(7),l.lc("dataSource",t.dataSource),l.Cb(4),l.lc("ngForOf",t.displayedColumns),l.Cb(1),l.lc("matHeaderRowDef",t.displayedColumns),l.Cb(1),l.lc("matRowDefColumns",t.displayedColumns),l.Cb(1),l.lc("length",t.length)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions)}},directives:[d.a,d.e,d.h,d.g,d.c,g.c,m.b,r.p,r.b,r.l,r.o,g.f,fe.b,fe.d,g.g,fe.a,p.a,k.n,U.a,k.c,k.i,k.b,n.j,k.k,k.m,w.a,k.h,k.a,n.k,k.j,k.l],encapsulation:2}),e})()},{path:"lottery",canActivate:[a.a],component:H},{path:"bet",canActivate:[a.a],component:me},{path:"bet2",canActivate:[a.a],component:Mt},{path:"bets",canActivate:[a.a],component:Ve},{path:"forbidden",canActivate:[a.a],component:it}];let Ht=(()=>{class e{}return e.\u0275mod=l.Mb({type:e}),e.\u0275inj=l.Lb({factory:function(t){return new(t||e)},imports:[[o.h.forChild(jt)],o.h]}),e})(),Gt=(()=>{class e{}return e.\u0275mod=l.Mb({type:e}),e.\u0275inj=l.Lb({factory:function(t){return new(t||e)},imports:[[n.c,Ht,c.a,r.q,r.h]]}),e})()}}]);