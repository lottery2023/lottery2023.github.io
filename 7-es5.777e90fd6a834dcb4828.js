function _createForOfIteratorHelper(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return c=e.done,e},e:function(e){o=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(o)throw a}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=_superPropBase(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{ZlVc:function(e,t,r){"use strict";r.r(t),r.d(t,"BetModule",(function(){return ir}));var n=r("ofXK"),i=r("3Pt+"),a=r("onrN"),c=r("tyNb"),o=r("5K0A"),l=r("+tBq"),s=r("fXoL"),u=r("H+bZ"),h=r("zVt+"),b=r("dNgK"),f=r("Wp6s"),d=r("kmnG"),g=r("qFsG"),m=r("d3UM"),y=r("bSwM"),p=r("bTqV"),v=r("wZkO"),C=r("FKr1"),T=r("NFeN"),F=r("Vt10"),k=r("+0xr"),U=r("Dh3D"),w=r("M9IT");function O(e,t){if(1&e&&(s.Ub(0,"mat-card-header"),s.Ub(1,"mat-card-title"),s.Ub(2,"div",0),s.Ub(3,"div",12),s.zc(4),s.Tb(),s.Tb(),s.Tb(),s.Ub(5,"mat-card-subtitle"),s.Ub(6,"div",0),s.Ub(7,"div",12),s.zc(8),s.Tb(),s.Tb(),s.Tb(),s.Tb()),2&e){var r=s.gc();s.Cb(4),s.Bc(" ",r.title," "),s.Cb(4),s.Bc(" ",r.subtitle," ")}}function I(e,t){1&e&&(s.Ub(0,"th",13),s.zc(1," Id "),s.Tb())}function P(e,t){if(1&e&&(s.Ub(0,"td",14),s.zc(1),s.Tb()),2&e){var r=t.$implicit;s.Cb(1),s.Bc(" ",r.id," ")}}function M(e,t){if(1&e&&(s.Ub(0,"th",13),s.zc(1),s.Tb()),2&e){var r=s.gc().$implicit;s.Cb(1),s.Bc(" ",r," ")}}function x(e,t){if(1&e){var r=s.Vb();s.Ub(0,"button",18),s.cc("click",(function(){s.sc(r);var e=s.gc().$implicit;return s.gc(2).onEdit(e)})),s.Ub(1,"mat-icon"),s.zc(2,"launch"),s.Tb(),s.Tb()}}function D(e,t){if(1&e){var r=s.Vb();s.Ub(0,"button",19),s.cc("click",(function(){s.sc(r);var e=s.gc().$implicit;return s.gc(2).onDelete(e)})),s.Ub(1,"mat-icon"),s.zc(2,"delete_outline"),s.Tb(),s.Tb()}}function _(e,t){if(1&e&&(s.Ub(0,"td",14),s.Ub(1,"span"),s.zc(2),s.Tb(),s.yc(3,x,3,0,"button",16),s.yc(4,D,3,0,"button",17),s.Tb()),2&e){var r=t.$implicit,n=s.gc().$implicit;s.Cb(2),s.Ac(r[n]),s.Cb(1),s.lc("ngIf","actions"===n),s.Cb(1),s.lc("ngIf","actions"===n)}}function S(e,t){1&e&&(s.Sb(0,15),s.yc(1,M,2,1,"th",6),s.yc(2,_,5,3,"td",7),s.Rb()),2&e&&s.lc("matColumnDef",t.$implicit)}function z(e,t){1&e&&s.Pb(0,"tr",20)}function A(e,t){1&e&&s.Pb(0,"tr",21)}var L,N=((L=function(e){_inherits(r,e);var t=_createSuper(r);function r(e,n,i){var a;return _classCallCheck(this,r),(a=t.call(this)).service=e,a.authService=n,a.router=i,a.showCardHeader=!0,a.entityApi="lotteries",a.settings={options:{order:[["name"]]}},a.displayedColumns=["code","name","play","isThreeFigures","actions"],a.filtersColumns=["name","code"],a}return _createClass(r,[{key:"ngOnInit",value:function(){this.title="Loterias",this.subtitle="Apuesta",_get(_getPrototypeOf(r.prototype),"init",this).call(this,this),_get(_getPrototypeOf(r.prototype),"onPageChange",this).call(this)}},{key:"ngOnChanges",value:function(e){this.loadChange&&_get(_getPrototypeOf(r.prototype),"onPageChange",this).call(this)}},{key:"onEdit",value:function(e){this.router.navigate(["/lottery",{lotteryId:e.id}])}}]),r}(F.a)).\u0275fac=function(e){return new(e||L)(s.Ob(u.a),s.Ob(h.a),s.Ob(c.f))},L.\u0275cmp=s.Ib({type:L,selectors:[["app-lotteries"]],inputs:{loadChange:"loadChange",showCardHeader:"showCardHeader"},features:[s.zb,s.Ab],decls:15,vars:9,consts:[["fxLayout","row","fxLayoutWrap","wrap"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],[4,"ngIf"],["matInput","","placeholder","Filtrar",3,"ngModel","keyup.enter","ngModelChange"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100"],["mat-header-cell",""],["mat-cell",""],[3,"matColumnDef"],["mat-button","",3,"click",4,"ngIf"],["mat-button","","color","warn",3,"click",4,"ngIf"],["mat-button","",3,"click"],["mat-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(s.Ub(0,"div",0),s.Ub(1,"div",1),s.Ub(2,"mat-card"),s.yc(3,O,9,2,"mat-card-header",2),s.Ub(4,"mat-card-content"),s.Ub(5,"mat-form-field"),s.Ub(6,"input",3),s.cc("keyup.enter",(function(){return t.onPageChange()}))("ngModelChange",(function(e){return t.filter=e})),s.Tb(),s.Tb(),s.Ub(7,"table",4),s.cc("matSortChange",(function(e){return t.onSortChange(e)})),s.Sb(8,5),s.yc(9,I,2,0,"th",6),s.yc(10,P,2,1,"td",7),s.Rb(),s.yc(11,S,3,1,"ng-container",8),s.yc(12,z,1,0,"tr",9),s.yc(13,A,1,0,"tr",10),s.Tb(),s.Ub(14,"mat-paginator",11),s.cc("page",(function(e){return t.onPaginatorChange(e)})),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb()),2&e&&(s.Cb(3),s.lc("ngIf",t.showCardHeader),s.Cb(3),s.lc("ngModel",t.filter),s.Cb(1),s.lc("dataSource",t.dataSource),s.Cb(4),s.lc("ngForOf",t.displayedColumns),s.Cb(1),s.lc("matHeaderRowDef",t.displayedColumns),s.Cb(1),s.lc("matRowDefColumns",t.displayedColumns),s.Cb(1),s.lc("length",t.length)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions))},directives:[f.a,n.k,f.c,d.c,g.b,i.b,i.l,i.o,k.n,U.a,k.c,k.i,k.b,n.j,k.k,k.m,w.a,f.e,f.h,f.g,k.h,k.a,p.a,T.a,k.j,k.l],encapsulation:2}),L);function E(e,t){if(1&e&&(s.Ub(0,"mat-error"),s.zc(1),s.Tb()),2&e){var r=s.gc();s.Cb(1),s.Ac(r.getErrorMessage("code"))}}function H(e,t){if(1&e&&(s.Ub(0,"mat-error"),s.zc(1),s.Tb()),2&e){var r=s.gc();s.Cb(1),s.Ac(r.getErrorMessage("name"))}}function R(e,t){if(1&e&&(s.Ub(0,"mat-option",20),s.zc(1),s.Tb()),2&e){var r=t.$implicit;s.lc("value",r.value),s.Cb(1),s.Bc(" ",r.text," ")}}function $(e,t){if(1&e&&(s.Ub(0,"mat-error"),s.zc(1),s.Tb()),2&e){var r=s.gc();s.Cb(1),s.Ac(r.getErrorMessage("checkArray"))}}function V(e,t){1&e&&(s.Ub(0,"mat-icon"),s.zc(1,"monetization_on"),s.Tb(),s.zc(2," Loterias "))}function B(e,t){if(1&e&&(s.Ub(0,"div"),s.Ub(1,"div"),s.Pb(2,"app-lotteries",21),s.Tb(),s.Tb()),2&e){var r=s.gc();s.Cb(2),s.lc("loadChange",r.loadLotteries)("showCardHeader",!1)}}var j,q=function(){return{standalone:!0}},G=((j=function(e){_inherits(r,e);var t=_createSuper(r);function r(e,n,a,c,o,l,s){var u;return _classCallCheck(this,r),(u=t.call(this)).service=e,u.authService=n,u.route=a,u.fb=c,u.router=o,u.changeDetectorRef=l,u._snackBar=s,u.entityApi="lotteries",u.weekDays={monday:!1,tuesday:!1,wednesday:!1,thursday:!1,friday:!1,saturday:!1,sunday:!1},u.enumLotteryTemporality=[{value:null,text:"Ninguna"},{value:"morning",text:"Ma\xf1ana"},{value:"afternoon",text:"Tarde"},{value:"night",text:"Noche"}],u.configFormGroup=function(e){var t={field:"name"},r={field:"code"};e&&(t.options={where:{id:{$ne:e}}},r.options={where:{id:{$ne:e}}}),u.entityForm=new i.f({name:new i.d("",[i.s.required],[u.service.takenValidator(u.entityApi,t)]),code:new i.d("",[i.s.required],[u.service.takenValidator(u.entityApi,r)]),checkArray:u.fb.array([],[i.s.required])})},u}return _createClass(r,[{key:"ngOnInit",value:function(){var e=this;this.title="Loteria",this.subtitle="Apuesta",this.iniEntity(),_get(_getPrototypeOf(r.prototype),"init",this).call(this,this),this.route.params.subscribe((function(t){t&&t.lotteryId?(e.configFormGroup(t.lotteryId),_get(_getPrototypeOf(r.prototype),"getEntity",e).call(e,t.lotteryId).subscribe((function(){for(var t in e.weekDays)e.weekDays[t]=!1;var r,n=_createForOfIteratorHelper(e.entity.play.split(","));try{for(n.s();!(r=n.n()).done;){var i=r.value;e.weekDays[i]=!0,e.playDaysChange({checked:!0,source:{value:i}})}}catch(a){n.e(a)}finally{n.f()}}))):e.configFormGroup()}))}},{key:"iniEntity",value:function(){this.entity={code:null,name:null,play:null,isThreeFigures:!1,temporality:null,closing:null}}},{key:"new",value:function(){for(var e in this.weekDays)this.weekDays[e]=!1;if(this.entityForm)for(var t=this.entityForm.get("checkArray"),r=t.controls.length,n=0;n<r;n++)t.removeAt(0);this.iniEntity(),this.router.navigate(["/lottery"])}},{key:"playDaysChange",value:function(e){var t=this.entityForm.get("checkArray");if(e.checked)t.push(new i.d(e.source.value));else{var r=0;t.controls.forEach((function(n){n.value!=e.source.value?r++:t.removeAt(r)}))}var n="";t.controls.forEach((function(e){n+=e.value+","})),n=n.substring(0,n.length-1),this.entity.play=n||null}},{key:"afterSaved",value:function(){this.loadLotteries=(new Date).toString()}}]),r}(l.a)).\u0275fac=function(e){return new(e||j)(s.Ob(u.a),s.Ob(h.a),s.Ob(c.a),s.Ob(i.c),s.Ob(c.f),s.Ob(s.h),s.Ob(b.a))},j.\u0275cmp=s.Ib({type:j,selectors:[["app-lottery"]],features:[s.zb],decls:62,vars:49,consts:[["fxLayout","row","fxLayoutWrap","wrap"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100"],[3,"formGroup"],[2,"float","left","width","20%","margin-right","10px"],["matInput","","placeholder","Entre c\xf3digo","formControlName","code","required","",3,"ngModel","ngModelChange"],[4,"ngIf"],[2,"width","20%","margin-right","10px"],["matInput","","placeholder","Entre nombre","formControlName","name","required","",3,"ngModel","ngModelChange"],["matNativeControl","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[2,"width","20%"],["matInput","","placeholder","Entre hora de cierre","type","time",3,"ngModel","ngModelOptions","ngModelChange"],[2,"margin-right","10px",3,"ngModel","ngModelOptions","value","ngModelChange","change"],["fxLayout","row","fxLayoutWrap","wrap",2,"margin-text-outline","10px","margin-top","10px"],[2,"margin-right","10px",3,"ngModel","ngModelOptions","ngModelChange"],["mat-fab","","color","accent",3,"disabled","click"],["mat-fab","","color","primary",3,"click"],["mat-tab-label",""],["matTabContent",""],[3,"value"],[3,"loadChange","showCardHeader"]],template:function(e,t){1&e&&(s.Ub(0,"div",0),s.Ub(1,"div",1),s.Ub(2,"mat-card"),s.Ub(3,"mat-card-header"),s.Ub(4,"mat-card-title"),s.Ub(5,"div",0),s.Ub(6,"div",2),s.zc(7),s.Tb(),s.Tb(),s.Tb(),s.Ub(8,"mat-card-subtitle"),s.Ub(9,"div",0),s.Ub(10,"div",2),s.zc(11),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(12,"mat-card-content"),s.Ub(13,"form",3),s.Ub(14,"div",0),s.Ub(15,"div",2),s.Ub(16,"mat-form-field",4),s.Ub(17,"input",5),s.cc("ngModelChange",(function(e){return t.entity.code=e})),s.Tb(),s.yc(18,E,2,1,"mat-error",6),s.Tb(),s.Ub(19,"mat-form-field",7),s.Ub(20,"input",8),s.cc("ngModelChange",(function(e){return t.entity.name=e})),s.Tb(),s.yc(21,H,2,1,"mat-error",6),s.Tb(),s.Ub(22,"mat-form-field",7),s.Ub(23,"mat-label"),s.zc(24,"Seleccione temporalidad"),s.Tb(),s.Ub(25,"mat-select",9),s.cc("ngModelChange",(function(e){return t.entity.temporality=e})),s.yc(26,R,2,2,"mat-option",10),s.Tb(),s.Tb(),s.Ub(27,"mat-form-field",11),s.Ub(28,"input",12),s.cc("ngModelChange",(function(e){return t.entity.closing=e})),s.Tb(),s.Tb(),s.zc(29),s.Tb(),s.Tb(),s.Ub(30,"div",0),s.Ub(31,"div",2),s.zc(32),s.Ub(33,"mat-checkbox",13),s.cc("ngModelChange",(function(e){return t.weekDays.monday=e}))("change",(function(e){return t.playDaysChange(e)})),s.zc(34,"Lunes"),s.Tb(),s.Ub(35,"mat-checkbox",13),s.cc("ngModelChange",(function(e){return t.weekDays.tuesday=e}))("change",(function(e){return t.playDaysChange(e)})),s.zc(36,"Martes"),s.Tb(),s.Ub(37,"mat-checkbox",13),s.cc("ngModelChange",(function(e){return t.weekDays.wednesday=e}))("change",(function(e){return t.playDaysChange(e)})),s.zc(38,"Mi\xe9rcoles"),s.Tb(),s.Ub(39,"mat-checkbox",13),s.cc("ngModelChange",(function(e){return t.weekDays.thursday=e}))("change",(function(e){return t.playDaysChange(e)})),s.zc(40,"Jueves"),s.Tb(),s.Ub(41,"mat-checkbox",13),s.cc("ngModelChange",(function(e){return t.weekDays.friday=e}))("change",(function(e){return t.playDaysChange(e)})),s.zc(42,"Viernes"),s.Tb(),s.Ub(43,"mat-checkbox",13),s.cc("ngModelChange",(function(e){return t.weekDays.saturday=e}))("change",(function(e){return t.playDaysChange(e)})),s.zc(44,"Sabado"),s.Tb(),s.Ub(45,"mat-checkbox",13),s.cc("ngModelChange",(function(e){return t.weekDays.sunday=e}))("change",(function(e){return t.playDaysChange(e)})),s.zc(46,"Domingo"),s.Tb(),s.yc(47,$,2,1,"mat-error",6),s.Tb(),s.Tb(),s.Ub(48,"div",14),s.Ub(49,"div",2),s.Ub(50,"mat-checkbox",15),s.cc("ngModelChange",(function(e){return t.entity.isThreeFigures=e})),s.zc(51,"Es tres cifras"),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(52,"mat-card-actions"),s.Ub(53,"button",16),s.cc("click",(function(){return t.save()})),s.zc(54,"Salvar"),s.Tb(),s.Ub(55,"button",17),s.cc("click",(function(){return t.new()})),s.zc(56,"Nuevo"),s.Tb(),s.Tb(),s.Ub(57,"mat-card-footer"),s.Ub(58,"mat-tab-group"),s.Ub(59,"mat-tab"),s.yc(60,V,3,0,"ng-template",18),s.yc(61,B,3,2,"ng-template",19),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb()),2&e&&(s.Cb(7),s.Bc(" ",t.title," "),s.Cb(4),s.Bc(" ",t.subtitle," "),s.Cb(2),s.lc("formGroup",t.entityForm),s.Cb(4),s.lc("ngModel",t.entity.code),s.Cb(1),s.lc("ngIf",t.entityForm.invalid),s.Cb(2),s.lc("ngModel",t.entity.name),s.Cb(1),s.lc("ngIf",t.entityForm.invalid),s.Cb(4),s.lc("ngModel",t.entity.temporality)("ngModelOptions",s.mc(39,q)),s.Cb(1),s.lc("ngForOf",t.enumLotteryTemporality),s.Cb(2),s.lc("ngModel",t.entity.closing)("ngModelOptions",s.mc(40,q)),s.Cb(1),s.Bc(" ",t.entity.closing," "),s.Cb(3),s.Bc(" ","Juega: "," "),s.Cb(1),s.lc("ngModel",t.weekDays.monday)("ngModelOptions",s.mc(41,q))("value","monday"),s.Cb(2),s.lc("ngModel",t.weekDays.tuesday)("ngModelOptions",s.mc(42,q))("value","tuesday"),s.Cb(2),s.lc("ngModel",t.weekDays.wednesday)("ngModelOptions",s.mc(43,q))("value","wednesday"),s.Cb(2),s.lc("ngModel",t.weekDays.thursday)("ngModelOptions",s.mc(44,q))("value","thursday"),s.Cb(2),s.lc("ngModel",t.weekDays.friday)("ngModelOptions",s.mc(45,q))("value","friday"),s.Cb(2),s.lc("ngModel",t.weekDays.saturday)("ngModelOptions",s.mc(46,q))("value","saturday"),s.Cb(2),s.lc("ngModel",t.weekDays.sunday)("ngModelOptions",s.mc(47,q))("value","sunday"),s.Cb(2),s.lc("ngIf",t.entityForm.invalid),s.Cb(3),s.lc("ngModel",t.entity.isThreeFigures)("ngModelOptions",s.mc(48,q)),s.Cb(3),s.lc("disabled",!t.entityForm.valid))},directives:[f.a,f.e,f.h,f.g,f.c,i.t,i.m,i.g,d.c,g.b,i.b,i.l,i.e,i.r,n.k,d.f,m.a,i.o,n.j,y.a,f.b,p.a,f.d,v.c,v.a,v.d,v.b,d.b,C.n,T.a,N],encapsulation:2}),j),K=r("7Cbv");function J(e,t){if(1&e&&(s.Ub(0,"mat-option",26),s.zc(1),s.Tb()),2&e){var r=t.$implicit;s.lc("value",r.value),s.Cb(1),s.Bc(" ",r.text," ")}}function W(e,t){if(1&e&&(s.Ub(0,"mat-error"),s.zc(1),s.Tb()),2&e){var r=s.gc();s.Cb(1),s.Ac(r.getErrorMessage("employeeId"))}}var Y=function(){return{standalone:!0}},Z=function(e){return{color:e}};function X(e,t){if(1&e){var r=s.Vb();s.Ub(0,"mat-checkbox",27),s.cc("ngModelChange",(function(e){return s.sc(r),t.$implicit.check=e}))("change",(function(e){return s.sc(r),s.gc().lotteryChange(e)})),s.zc(1),s.Tb()}if(2&e){var n=t.$implicit;s.lc("ngModel",n.check)("ngModelOptions",s.mc(5,Y))("value",n.id)("ngStyle",s.nc(6,Z,n.color)),s.Cb(1),s.Ac(n.name)}}function Q(e,t){if(1&e&&(s.Ub(0,"mat-error"),s.zc(1),s.Tb()),2&e){var r=s.gc();s.Cb(1),s.Ac(r.getErrorMessage("checkLotteries"))}}function ee(e,t){if(1&e&&(s.Ub(0,"mat-error"),s.zc(1),s.Tb()),2&e){var r=s.gc();s.Cb(1),s.Ac(r.getErrorMessage("number"))}}function te(e,t){if(1&e){var r=s.Vb();s.Ub(0,"mat-form-field",6),s.Ub(1,"input",28),s.cc("keypress",(function(e){return s.sc(r),s.gc().numberOnly(e)}))("ngModelChange",(function(e){return s.sc(r),s.gc().entity.firstThreePrice=e}))("change",(function(){return s.sc(r),s.gc().firstThreePriceChange()})),s.Tb(),s.Tb()}if(2&e){var n=s.gc();s.Cb(1),s.lc("ngModel",n.entity.firstThreePrice)}}function re(e,t){if(1&e){var r=s.Vb();s.Ub(0,"mat-form-field",29),s.Ub(1,"input",30),s.cc("keypress",(function(e){return s.sc(r),s.gc().numberOnly(e)}))("ngModelChange",(function(e){return s.sc(r),s.gc().entity.chockFourFigurePrice=e}))("change",(function(){return s.sc(r),s.gc().chockFourFigurePriceChange()})),s.Tb(),s.Tb()}if(2&e){var n=s.gc();s.Cb(1),s.lc("ngModelOptions",s.mc(2,Y))("ngModel",n.entity.chockFourFigurePrice)}}function ne(e,t){if(1&e){var r=s.Vb();s.Ub(0,"mat-form-field",31),s.Ub(1,"input",32),s.cc("keypress",(function(e){return s.sc(r),s.gc().numberOnly(e)}))("ngModelChange",(function(e){return s.sc(r),s.gc().entity.chockThreeFigurePrice=e}))("change",(function(){return s.sc(r),s.gc().chockThreeFigurePriceChange()})),s.Tb(),s.Tb()}if(2&e){var n=s.gc();s.Cb(1),s.lc("ngModelOptions",s.mc(2,Y))("ngModel",n.entity.chockThreeFigurePrice)}}function ie(e,t){if(1&e&&(s.Ub(0,"mat-error"),s.zc(1),s.Tb()),2&e){var r=s.gc();s.Cb(1),s.Ac(r.getErrorMessage("checkChock"))}}function ae(e,t){if(1&e){var r=s.Vb();s.Ub(0,"mat-form-field",6),s.Ub(1,"input",33),s.cc("keypress",(function(e){return s.sc(r),s.gc().numberOnly(e)}))("ngModelChange",(function(e){return s.sc(r),s.gc().entity.lastThreePrice=e}))("change",(function(){return s.sc(r),s.gc().lastThreePriceChange()})),s.Tb(),s.Tb()}if(2&e){var n=s.gc();s.Cb(1),s.lc("ngModel",n.entity.lastThreePrice)}}function ce(e,t){if(1&e){var r=s.Vb();s.Ub(0,"mat-form-field",29),s.Ub(1,"input",34),s.cc("keypress",(function(e){return s.sc(r),s.gc().numberOnly(e)}))("ngModelChange",(function(e){return s.sc(r),s.gc().entity.combinedFourFigurePrice=e}))("change",(function(){return s.sc(r),s.gc().combinedFourFigurePriceChange()})),s.Tb(),s.Tb()}if(2&e){var n=s.gc();s.Cb(1),s.lc("ngModelOptions",s.mc(2,Y))("ngModel",n.entity.combinedFourFigurePrice)}}function oe(e,t){if(1&e){var r=s.Vb();s.Ub(0,"mat-form-field",31),s.Ub(1,"input",35),s.cc("keypress",(function(e){return s.sc(r),s.gc().numberOnly(e)}))("ngModelChange",(function(e){return s.sc(r),s.gc().entity.combinedThreeFigurePrice=e}))("change",(function(){return s.sc(r),s.gc().combinedThreeFigurePriceChange()})),s.Tb(),s.Tb()}if(2&e){var n=s.gc();s.Cb(1),s.lc("ngModelOptions",s.mc(2,Y))("ngModel",n.entity.combinedThreeFigurePrice)}}function le(e,t){if(1&e&&(s.Ub(0,"mat-error"),s.zc(1),s.Tb()),2&e){var r=s.gc();s.Cb(1),s.Ac(r.getErrorMessage("checkCombined"))}}function se(e,t){if(1&e&&(s.Ub(0,"th",39),s.zc(1),s.Tb()),2&e){var r=s.gc().$implicit;s.Cb(1),s.Bc(" ",r," ")}}function ue(e,t){if(1&e){var r=s.Vb();s.Ub(0,"button",43),s.cc("click",(function(){return s.sc(r),s.gc(3).preventEnter()})),s.Tb()}}function he(e,t){if(1&e){var r=s.Vb();s.Ub(0,"button",44),s.cc("click",(function(){s.sc(r);var e=s.gc().$implicit;return s.gc(2).onDeleteCustom(e)})),s.Ub(1,"mat-icon"),s.zc(2,"delete_outline"),s.Tb(),s.Tb()}}function be(e,t){if(1&e&&(s.Ub(0,"td",40),s.Ub(1,"span"),s.zc(2),s.Tb(),s.yc(3,ue,1,0,"button",41),s.yc(4,he,3,0,"button",42),s.Tb()),2&e){var r=t.$implicit,n=s.gc().$implicit;s.Cb(2),s.Ac(r[n]),s.Cb(1),s.lc("ngIf","actions"===n),s.Cb(1),s.lc("ngIf","actions"===n)}}function fe(e,t){1&e&&(s.Sb(0,36),s.yc(1,se,2,1,"th",37),s.yc(2,be,5,3,"td",38),s.Rb()),2&e&&s.lc("matColumnDef",t.$implicit)}function de(e,t){1&e&&s.Pb(0,"tr",45)}function ge(e,t){1&e&&s.Pb(0,"tr",46)}function me(e,t){if(1&e&&(s.Ub(0,"mat-error"),s.zc(1),s.Tb()),2&e){var r=s.gc();s.Cb(1),s.Ac(r.getErrorMessage("checkNumbers"))}}var ye,pe=((ye=function(e){_inherits(r,e);var t=_createSuper(r);function r(e,n,a,c,o,l,s){var u;return _classCallCheck(this,r),(u=t.call(this)).service=e,u.authService=n,u.route=a,u.fb=c,u.router=o,u.changeDetectorRef=l,u._snackBar=s,u.entityApi="bets",u.entityDetailApi="details",u.entityApiEmployees="employees",u.entityApiLotteries="lotteries",u.entityNumbers="numbers",u.employees=[],u.lotteries=[],u.number=null,u.displayedColumns=["number","price","actions"],u.configFormGroup=function(e){u.entityForm=new i.f({employeeId:new i.d("",[i.s.required]),checkLotteries:u.fb.array([],[i.s.required]),checkNumbers:u.fb.array([],[i.s.required]),price:new i.d("",[i.s.required]),firstThreePrice:new i.d(""),lastThreePrice:new i.d(""),checkCombined:u.fb.array([]),checkChock:u.fb.array([]),combinedThreeFigurePrice:new i.d(""),total:new i.d(""),number:new i.d("",null,[u.service.takenValidator(u.entityNumbers,{field:"number",ValidationError:"forbidden"})])})},u}return _createClass(r,[{key:"ngOnInit",value:function(){var e=this;this.title="Apuesta",this.subtitle="Apuesta",this.iniEntity(),_get(_getPrototypeOf(r.prototype),"init",this).call(this,this),this.route.params.subscribe((function(t){e.service.getSelect(e.entityApiEmployees,{value:"id",text:"code",options:{order:[["code","asc"]]}}).subscribe((function(t){e.employees=t}));var n="";switch((new Date).getDay()){case 0:n="sunday";break;case 1:n="monday";break;case 2:n="tuesday";break;case 3:n="wednesday";break;case 4:n="thursday";break;case 5:n="friday";break;case 6:n="saturday"}var a=0,c=0,o=function(){if(++a==c){var t=[],r=[];if(e.entity&&e.entity.details&&e.entity.details.length){var n,o=_createForOfIteratorHelper(e.entity.details);try{var l=function(){var e=n.value;t.find((function(t){return t.id==e.lotteryId}))||t.push(e.lottery)};for(o.s();!(n=o.n()).done;)l()}catch(C){o.e(C)}finally{o.f()}var s,u=_createForOfIteratorHelper(e.entity.details);try{var h=function(){var n=s.value;if(!r.find((function(e){return e.number==n.number}))){var i=e.entity.details.filter((function(e){return e.number==n.number})),a=t.filter((function(e){return 1==e.isThreeFigures})),c=t.filter((function(e){return 0==e.isThreeFigures}));if(3==n.number.length)if(i.length==a.length)r.push(n);else{e.entity.details.filter((function(e){return e.number.length>3}));var o=(i.length-c.length*a.length)/a.length;o<1&&(o=(i.length-c.length)/a.length);for(var l=0;l<o;l++)r.push(n)}else if(i.length==c.length)r.push(n);else for(var u=i.length/c.length,h=0;h<u;h++)r.push(n)}};for(u.s();!(s=u.n()).done;)h()}catch(C){u.e(C)}finally{u.f()}var b,f=_createForOfIteratorHelper(r);try{for(f.s();!(b=f.n()).done;){var d=b.value;e.addCheckNumbers(d.number,d.isFirstThree,d.isLastThreem)}}catch(C){f.e(C)}finally{f.f()}var g,m=_createForOfIteratorHelper(t);try{var y=function(){var t=g.value,r=e.lotteries.find((function(e){return e.id==t.id}));r&&(r.check=!0,e.lotteryChange({checked:!0,source:{value:r.id}}))};for(m.s();!(g=m.n()).done;)y()}catch(C){m.e(C)}finally{m.f()}}if(e.entity.chock){var p=e.entityForm.get("checkChock");e.entityForm.get("checkChock").setValidators([i.s.required]),p.push(new i.d({id:Object(K.a)(),chockFourFigure:!0})),p.push(new i.d({id:Object(K.a)(),chockFourFigure:!1}))}if(e.entity.combined){var v=e.entityForm.get("checkCombined");e.entityForm.get("checkCombined").setValidators([i.s.required]),v.push(new i.d({id:Object(K.a)(),combinedFourFigure:!0})),v.push(new i.d({id:Object(K.a)(),combinedFourFigure:!1}))}}};c++,e.service.get(e.entityApiLotteries,{options:{where:{play:{$like:"%"+n+"%"}},order:[["name","asc"]]}}).subscribe((function(t){for(var r=t,n=function(){var t,n=a[i],c=_createForOfIteratorHelper(r.filter((function(e){return e.temporality==n.value})));try{for(c.s();!(t=c.n()).done;){var o=t.value;o.color=n.color,e.lotteries.push(o)}}catch(l){c.e(l)}finally{c.f()}},i=0,a=[{value:"morning",color:"green"},{value:"afternoon",color:"crimson"},{value:"night",color:"blue"},{value:null,color:"Ninguna"}];i<a.length;i++)n();o()})),t&&t.betId?(c++,e.configFormGroup(t.betId),_get(_getPrototypeOf(r.prototype),"getEntity",e).call(e,t.betId,{options:{include:[{association:"details",include:[{association:"lottery"}]},{association:"employee"}]}}).subscribe((function(){o()}))):e.configFormGroup()}))}},{key:"iniEntity",value:function(){var e=null;this.entity&&this.entity.employeeId&&(e=this.entity.employeeId),this.entity={employeeId:null,userId:null,price:null,firstThree:!1,firstThreePrice:null,lastThree:!1,lastThreePrice:null,chock:!1,chockFourFigurePrice:null,chockThreeFigurePrice:null,combined:!1,combinedFourFigurePrice:null,combinedThreeFigurePrice:null,total:null,details:null},this.entity.employeeId=e}},{key:"new",value:function(){this.iniEntity();var e,t=_createForOfIteratorHelper(this.lotteries);try{for(t.s();!(e=t.n()).done;)e.value.check=!1}catch(o){t.e(o)}finally{t.f()}if(this.entityForm){for(var r=this.entityForm.get("checkNumbers"),n=r.controls.length,i=0;i<n;i++)r.removeAt(0);var a=this.entityForm.get("checkLotteries");n=a.controls.length;for(var c=0;c<n;c++)a.removeAt(0)}this.dataSource=new k.o([])}},{key:"lotteryChange",value:function(e){var t,r=this.entityForm.get("checkLotteries"),n=this.lotteries.find((function(t){return t.id==e.source.value})),a=!1,c=!1,o=0,l=_createForOfIteratorHelper(r.value);try{for(l.s();!(t=l.n()).done;)if(t.value.isThreeFigures&&(c=!0,(o+=1)>=2)){a=!0;break}}catch(u){l.e(u)}finally{l.f()}if(e.checked)r.push(new i.d({id:e.source.value,isThreeFigures:n.isThreeFigures}));else{var s=0;r.controls.forEach((function(t){t.value.id!=e.source.value?s++:r.removeAt(s)}))}this.validateAllNumbers(n,a,c)}},{key:"add",value:function(){var e=this.entityForm.get("number");if(this.number&&this.number.toString().length>2&&e.valid){var t=!1,r=!1;3==this.number.toString().length&&(r=!0),this.addCheckNumbers(this.number,t,r),r=!1,(this.findThreeFigures()||this.entity.lastThree)&&(r=!0,this.number.toString().length>3&&this.addCheckNumbers(this.number.substring(1,this.number.length),t,r),r=!1),this.entity.firstThree&&(t=!0,this.number.toString().length>3&&this.addCheckNumbers(this.number.substring(0,this.number.length-1),t,r)),this.number=null}}},{key:"findThreeFigures",value:function(){var e=this,t=!1,r=this.entityForm.get("checkLotteries");if(r.value){var n,i=_createForOfIteratorHelper(r.value);try{var a=function(){var r=n.value;if(e.lotteries.find((function(e){return e.id==r.id})).isThreeFigures)return t=!0,"break"};for(i.s();!(n=i.n()).done&&"break"!==a(););}catch(c){i.e(c)}finally{i.f()}}return t}},{key:"addCheckNumbers",value:function(e,t,r){this.entityForm.get("checkNumbers").push(new i.d({id:Object(K.a)(),number:e,isFirstThree:t,isLastThree:r,price:this.entity.price})),this.refreshGrid()}},{key:"onDeleteCustom",value:function(e){var t=this.entityForm.get("checkNumbers"),r=t.value.findIndex((function(t){return t.id==e.id}));t.removeAt(r),this.dataSource=new k.o(t.value),this.calculateTotal();var n=[],i=[];this.entity&&this.entity.details&&this.entity.details.length&&(n=this.entity.details.filter((function(t){return t.number==e.number})));var a,c=_createForOfIteratorHelper(n);try{var o=function(){var e=a.value;i.find((function(t){return t.lotteryId==e.lotteryId}))||i.push(e)};for(c.s();!(a=c.n()).done;)o()}catch(l){c.e(l)}finally{c.f()}i=i.map((function(e){return e.id})),this.view.service.deleteOptions(this.entityDetailApi,{options:{where:{id:i}}}).subscribe((function(e){}))}},{key:"getDisabled",value:function(){var e=!0;return this.number&&this.number.toString().length>2&&(e=!1),e}},{key:"numberOnly",value:function(e){var t=e.which?e.which:e.keyCode;return!(t>31&&(t<48||t>57))}},{key:"beforeSaved",value:function(){var e=this,t=!0,r=this.authService.getItem("currentUser");this.entity.userId=r.id;var n=this.entity.details||[];this.entity.details=[];var i,a,c=!0,o=this.entityForm.get("checkLotteries"),l=_createForOfIteratorHelper(o.value);try{var s=function(){var t=a.value;if(!(i=e.lotteries.find((function(e){return e.id==t.id}))).isThreeFigures)return c=!1,"break"};for(l.s();!(a=l.n()).done&&"break"!==s(););}catch(p){l.e(p)}finally{l.f()}var u=this.entityForm.get("checkNumbers");if(c){var h,b=_createForOfIteratorHelper(u.value);try{for(b.s();!(h=b.n()).done;)if(h.value.number.length>3){alert("Solo 3 cifras "+i.name),t=!1;break}}catch(p){b.e(p)}finally{b.f()}}if(0==t)return t;var f,d=_createForOfIteratorHelper(o.value);try{var g=function(){var t,r=f.value,a=_createForOfIteratorHelper(u.value);try{for(a.s();!(t=a.n()).done;){var c=t.value,o=4==c.number.length;(i=e.lotteries.find((function(e){return e.id==r.id})))&&i.isThreeFigures&&o||function(){var t={lotteryId:i.id,number:c.number,price:c.price,accumulated:c.price,isFourFigure:o,isFirstThree:c.isFirstThree,isLastThree:c.isLastThree},r=n.find((function(e){return e.lotteryId==t.lotteryId&&e.number==t.number})),a=n.findIndex((function(e){return e.lotteryId==t.lotteryId&&e.number==t.number}));r?(t.id=r.id,n.splice(a,1)):t.id=Object(K.a)(),e.entity.details.push(t)}()}}catch(p){a.e(p)}finally{a.f()}};for(d.s();!(f=d.n()).done;)g()}catch(p){d.e(p)}finally{d.f()}if(c){var m,y=_createForOfIteratorHelper(this.entity.details);try{for(y.s();!(m=y.n()).done;)m.value.number.length>3&&(alert("Solo 3 cifras "+i.name),t=!1)}catch(p){y.e(p)}finally{y.f()}}return t}},{key:"validateAllNumbers",value:function(e,t,r){if(e.isThreeFigures&&!this.entity.lastThree&&!t){var n=this.entityForm.get("checkNumbers");if(e.check){if(!r){var i,a=_createForOfIteratorHelper(n.value);try{for(a.s();!(i=a.n()).done;){var c=i.value;4==c.number.length&&this.addCheckNumbers(c.number.substring(1,c.number.length),!1,!0)}}catch(u){a.e(u)}finally{a.f()}}}else{var o,l=_createForOfIteratorHelper(n.value);try{for(l.s();!(o=l.n()).done;){var s=o.value;3==s.number.length&&s.isLastThree&&this.onDeleteCustom({id:s.id})}}catch(u){l.e(u)}finally{l.f()}}}this.calculateTotal()}},{key:"refreshGrid",value:function(){var e,t=this.entityForm.get("checkNumbers"),r=_createForOfIteratorHelper(t.value);try{for(r.s();!(e=r.n()).done;){var n=e.value;n.price=this.entity.price,n.isFirstThree&&this.entity.firstThree&&(n.price=this.entity.firstThreePrice),n.isLastThree&&this.entity.lastThree&&(n.price=this.entity.lastThreePrice)}}catch(i){r.e(i)}finally{r.f()}this.dataSource=new k.o(t.value),this.calculateTotal()}},{key:"preventEnter",value:function(){}},{key:"firstThreeChange",value:function(e){var t=this,r=this.entityForm.get("checkNumbers");if(e.checked){this.entity.firstThreePrice=this.entity.price,this.entityForm.get("firstThreePrice").setValidators([i.s.required]);var n,a=_createForOfIteratorHelper(r.value);try{for(a.s();!(n=a.n()).done;){var c=n.value;4==c.number.length&&this.addCheckNumbers(c.number.substring(0,c.number.length-1),!0,!1)}}catch(d){a.e(d)}finally{a.f()}}else{this.entityForm.get("firstThreePrice").clearValidators();var o,l=[],s=_createForOfIteratorHelper(r.value);try{for(s.s();!(o=s.n()).done;){var u=o.value;4==u.number.length&&l.push(u)}}catch(d){s.e(d)}finally{s.f()}for(var h=function(){var e=f[b],n=e.number.substring(0,e.number.length-1),i=r.value.find((function(e){return e.number==n}));t.onDeleteCustom({id:i.id})},b=0,f=l;b<f.length;b++)h()}this.entityForm.get("firstThreePrice").updateValueAndValidity(),this.changeDetectorRef.detectChanges()}},{key:"firstThreePriceChange",value:function(){var e,t=_createForOfIteratorHelper(this.entityForm.get("checkNumbers").value);try{for(t.s();!(e=t.n()).done;){var r=e.value;3==r.number.length&&r.isFirstThree&&(r.price=this.entity.firstThreePrice)}}catch(n){t.e(n)}finally{t.f()}this.calculateTotal()}},{key:"lastThreeChange",value:function(e){var t=this.findThreeFigures(),r=this.entityForm.get("checkNumbers");if(e.checked){if(this.entity.lastThreePrice=this.entity.price,this.entityForm.get("lastThreePrice").setValidators([i.s.required]),!t){var n,a=_createForOfIteratorHelper(r.value);try{for(a.s();!(n=a.n()).done;){var c=n.value;4==c.number.length&&this.addCheckNumbers(c.number.substring(1,c.number.length),!1,!0)}}catch(u){a.e(u)}finally{a.f()}}}else if(this.entityForm.get("lastThreePrice").clearValidators(),!t){var o,l=_createForOfIteratorHelper(r.value);try{for(l.s();!(o=l.n()).done;){var s=o.value;3==s.number.length&&s.isLastThree&&this.onDeleteCustom({id:s.id})}}catch(u){l.e(u)}finally{l.f()}}this.entityForm.get("lastThreePrice").updateValueAndValidity(),this.changeDetectorRef.detectChanges()}},{key:"lastThreePriceChange",value:function(){var e,t=_createForOfIteratorHelper(this.entityForm.get("checkNumbers").value);try{for(t.s();!(e=t.n()).done;){var r=e.value;3==r.number.length&&r.isLastThree&&(r.price=this.entity.lastThreePrice)}}catch(n){t.e(n)}finally{t.f()}this.calculateTotal()}},{key:"chockChange",value:function(e){var t=this.entityForm.get("checkChock");if(e.checked)this.entityForm.get("checkChock").setValidators([i.s.required]),this.entity.price&&(this.entity.chockFourFigurePrice=this.entity.price,this.entity.chockThreeFigurePrice=this.entity.price,t.push(new i.d({id:Object(K.a)(),chockFourFigure:!0})),t.push(new i.d({id:Object(K.a)(),chockFourFigure:!1})));else{this.entity.chockFourFigurePrice=null,this.entity.chockThreeFigurePrice=null;var r=0;t.controls.forEach((function(e){t.removeAt(r),r++})),this.entityForm.get("checkChock").clearValidators()}this.entityForm.get("checkChock").updateValueAndValidity(),this.calculateTotal()}},{key:"chockFourFigurePriceChange",value:function(){var e=this.entityForm.get("checkChock");this.entity.chockFourFigurePrice?e.push(new i.d({id:Object(K.a)(),ChockFourFigure:!0})):e.controls.forEach((function(t){e.removeAt(0)})),this.calculateTotal()}},{key:"chockThreeFigurePriceChange",value:function(){var e=this.entityForm.get("checkChock");this.entity.chockThreeFigurePrice?e.push(new i.d({id:Object(K.a)(),ChockFourFigure:!1})):e.controls.forEach((function(t){e.removeAt(0)})),this.calculateTotal()}},{key:"combinedChange",value:function(e){var t=this.entityForm.get("checkCombined");if(e.checked)this.entityForm.get("checkCombined").setValidators([i.s.required]),this.entity.price&&(this.entity.combinedFourFigurePrice=this.entity.price,this.entity.combinedThreeFigurePrice=this.entity.price,t.push(new i.d({id:Object(K.a)(),combinedFourFigure:!0})),t.push(new i.d({id:Object(K.a)(),combinedFourFigure:!1})));else{this.entity.combinedFourFigurePrice=null,this.entity.combinedThreeFigurePrice=null;var r=0;t.controls.forEach((function(e){t.removeAt(r),r++})),this.entityForm.get("checkCombined").clearValidators()}this.entityForm.get("checkCombined").updateValueAndValidity(),this.calculateTotal()}},{key:"combinedFourFigurePriceChange",value:function(){var e=this.entityForm.get("checkCombined");this.entity.combinedFourFigurePrice?e.push(new i.d({id:Object(K.a)(),combinedFourFigure:!0})):e.controls.forEach((function(t){e.removeAt(0)})),this.calculateTotal()}},{key:"combinedThreeFigurePriceChange",value:function(){var e=this.entityForm.get("checkCombined");this.entity.combinedThreeFigurePrice?e.push(new i.d({id:Object(K.a)(),combinedFourFigure:!1})):e.controls.forEach((function(t){e.removeAt(0)})),this.calculateTotal()}},{key:"calculateTotal",value:function(){var e=this;this.entity.total=0;var t,r=0,n=0,i=0,a=0,c=0,o=0,l=_createForOfIteratorHelper(this.entityForm.get("checkLotteries").value);try{var s=function(){var i=t.value;e.lotteries.find((function(e){return e.id==i.id})).isThreeFigures?n+=1:r+=1};for(l.s();!(t=l.n()).done;)s()}catch(f){l.e(f)}finally{l.f()}var u,h=_createForOfIteratorHelper(this.entityForm.get("checkNumbers").value);try{for(h.s();!(u=h.n()).done;){var b=u.value;3==b.number.length?(a+=1,b.isFirstThree?c+=1:o+=1):i+=1}}catch(f){h.e(f)}finally{h.f()}this.entity.total=this.entity.price*i*r,this.entity.firstThree?(this.entity.total+=this.entity.firstThreePrice*c*(r+n),o&&(this.entity.total+=this.entity.lastThree?this.entity.lastThreePrice*o*(r+n):this.entity.price*o*(r+n))):this.entity.total+=this.entity.lastThree?this.entity.lastThreePrice*o*(r+n):this.entity.price*a*(r+n),this.entity.chock&&(a?(this.entity.total+=this.entity.chockFourFigurePrice*i*r,this.entity.total+=this.entity.chockThreeFigurePrice*a*(r+n)):this.entity.total+=this.entity.chockFourFigurePrice*i*(r+n)),this.entity.combined&&(a?(this.entity.total+=this.entity.combinedFourFigurePrice*i*r,this.entity.total+=this.entity.combinedThreeFigurePrice*a*(r+n)):this.entity.total+=this.entity.combinedFourFigurePrice*i*(r+n)),this.changeDetectorRef.detectChanges()}},{key:"lotteryAllChange",value:function(e){if(e.checked){var t,r=_createForOfIteratorHelper(this.lotteries);try{for(r.s();!(t=r.n()).done;){var n=t.value;n.check=!0,this.lotteryChange({source:{value:n.id}})}}catch(o){r.e(o)}finally{r.f()}}else{var i,a=_createForOfIteratorHelper(this.lotteries);try{for(a.s();!(i=a.n()).done;){var c=i.value;c.check=!1,this.lotteryChange({source:{value:c.id}})}}catch(o){a.e(o)}finally{a.f()}}}}]),r}(l.a)).\u0275fac=function(e){return new(e||ye)(s.Ob(u.a),s.Ob(h.a),s.Ob(c.a),s.Ob(i.c),s.Ob(c.f),s.Ob(s.h),s.Ob(b.a))},ye.\u0275cmp=s.Ib({type:ye,selectors:[["app-bet"]],features:[s.zb],decls:72,vars:39,consts:[["fxLayout","row","fxLayoutWrap","wrap"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100"],[3,"formGroup"],["fxLayout","row","fxLayoutWrap","wrap",2,"overflow","hidden"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100",2,"float","left","width","50%"],[2,"width","95%"],["matNativeControl","","formControlName","employeeId","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matInput","","formControlName","total","type","number","placeholder","Total","onKeyPress","if(this.value.length==9) return false;","autocomplete","off",3,"ngModel","readonly","keypress","ngModelChange"],["style","margin-right: 25px;",3,"ngModel","ngModelOptions","value","ngStyle","ngModelChange","change",4,"ngFor","ngForOf"],["matInput","","placeholder","Entre number","formControlName","number","onKeyPress","if(this.value.length===4) return false;","autocomplete","off",3,"ngModel","keypress","ngModelChange","keyup.enter"],["matInput","","formControlName","price","type","number","placeholder","Entre Precio","onKeyPress","if(this.value.length==9) return false;","autocomplete","off","required","",3,"ngModel","keypress","ngModelChange","change"],["fxLayout","row","fxLayoutWrap","wrap",2,"margin-text-outline","10px","margin-top","10px","overflow","hidden"],[2,"margin-right","10px",3,"ngModel","ngModelOptions","ngModelChange","change"],["style","width: 95%;",4,"ngIf"],["style","width: 32%;margin-right: 10px;",4,"ngIf"],["style","width: 32%",4,"ngIf"],["fxLayout","row","fxLayoutWrap","wrap",2,"margin-top","10px"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-fab","","color","accent",3,"disabled","click"],["mat-fab","","color","primary",3,"click"],[3,"value"],[2,"margin-right","25px",3,"ngModel","ngModelOptions","value","ngStyle","ngModelChange","change"],["matInput","","formControlName","firstThreePrice","type","number","placeholder","Entre precio, tres primeras","onKeyPress","if(this.value.length==9) return false;","autocomplete","off","required","",3,"ngModel","keypress","ngModelChange","change"],[2,"width","32%","margin-right","10px"],["matInput","","type","number","placeholder","Cuatro cifras, cu\xf1a","onKeyPress","if(this.value.length==9) return false;","autocomplete","off",3,"ngModelOptions","ngModel","keypress","ngModelChange","change"],[2,"width","32%"],["matInput","","type","number","placeholder","Tres cifras, cu\xf1a","onKeyPress","if(this.value.length==9) return false;","autocomplete","off",3,"ngModelOptions","ngModel","keypress","ngModelChange","change"],["matInput","","formControlName","lastThreePrice","type","number","placeholder","Entre precio, tres ultimas","onKeyPress","if(this.value.length==9) return false;","autocomplete","off","required","",3,"ngModel","keypress","ngModelChange","change"],["matInput","","type","number","placeholder","Cuatro cifras, combinado","onKeyPress","if(this.value.length==9) return false;","autocomplete","off",3,"ngModelOptions","ngModel","keypress","ngModelChange","change"],["matInput","","type","number","placeholder","Tres cifras, combinado","onKeyPress","if(this.value.length==9) return false;","autocomplete","off",3,"ngModelOptions","ngModel","keypress","ngModelChange","change"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],["mat-button","",3,"click",4,"ngIf"],["mat-button","","color","warn",3,"click",4,"ngIf"],["mat-button","",3,"click"],["mat-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(s.Ub(0,"div",0),s.Ub(1,"div",1),s.Ub(2,"mat-card"),s.Ub(3,"mat-card-header"),s.Ub(4,"mat-card-title"),s.Ub(5,"div",0),s.Ub(6,"div",2),s.zc(7),s.Tb(),s.Tb(),s.Tb(),s.Ub(8,"mat-card-subtitle"),s.Ub(9,"div",0),s.Ub(10,"div",2),s.zc(11),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(12,"mat-card-content"),s.Ub(13,"form",3),s.Ub(14,"div",4),s.Ub(15,"div",5),s.Ub(16,"mat-form-field",6),s.Ub(17,"mat-label"),s.zc(18,"Seleccione C\xf3digo"),s.Tb(),s.Ub(19,"mat-select",7),s.cc("ngModelChange",(function(e){return t.entity.employeeId=e})),s.yc(20,J,2,2,"mat-option",8),s.Tb(),s.yc(21,W,2,1,"mat-error",9),s.Tb(),s.Tb(),s.Ub(22,"div",5),s.Ub(23,"mat-form-field"),s.Ub(24,"input",10),s.cc("keypress",(function(e){return t.numberOnly(e)}))("ngModelChange",(function(e){return t.entity.total=e})),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(25,"div",0),s.Ub(26,"div",2),s.yc(27,X,2,8,"mat-checkbox",11),s.yc(28,Q,2,1,"mat-error",9),s.Tb(),s.Tb(),s.Ub(29,"div",0),s.Ub(30,"div",2),s.Ub(31,"mat-form-field"),s.Ub(32,"input",12),s.cc("keypress",(function(e){return t.numberOnly(e)}))("ngModelChange",(function(e){return t.number=e}))("keyup.enter",(function(){return t.add()})),s.Tb(),s.yc(33,ee,2,1,"mat-error",9),s.Tb(),s.Tb(),s.Tb(),s.Ub(34,"div",0),s.Ub(35,"div",2),s.Ub(36,"mat-form-field"),s.Ub(37,"input",13),s.cc("keypress",(function(e){return t.numberOnly(e)}))("ngModelChange",(function(e){return t.entity.price=e}))("change",(function(){return t.refreshGrid()})),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(38,"div",14),s.Ub(39,"div",5),s.Ub(40,"mat-checkbox",15),s.cc("ngModelChange",(function(e){return t.entity.firstThree=e}))("change",(function(e){return t.firstThreeChange(e)})),s.zc(41,"Tres primeras "),s.Tb(),s.yc(42,te,2,1,"mat-form-field",16),s.Tb(),s.Ub(43,"div",5),s.Ub(44,"mat-checkbox",15),s.cc("ngModelChange",(function(e){return t.entity.chock=e}))("change",(function(e){return t.chockChange(e)})),s.zc(45,"Cu\xf1a "),s.Tb(),s.yc(46,re,2,3,"mat-form-field",17),s.yc(47,ne,2,3,"mat-form-field",18),s.yc(48,ie,2,1,"mat-error",9),s.Tb(),s.Tb(),s.Ub(49,"div",14),s.Ub(50,"div",5),s.Ub(51,"mat-checkbox",15),s.cc("ngModelChange",(function(e){return t.entity.lastThree=e}))("change",(function(e){return t.lastThreeChange(e)})),s.zc(52,"Tres Ultimas "),s.Tb(),s.yc(53,ae,2,1,"mat-form-field",16),s.Tb(),s.Ub(54,"div",5),s.Ub(55,"mat-checkbox",15),s.cc("ngModelChange",(function(e){return t.entity.combined=e}))("change",(function(e){return t.combinedChange(e)})),s.zc(56,"Combinado "),s.Tb(),s.yc(57,ce,2,3,"mat-form-field",17),s.yc(58,oe,2,3,"mat-form-field",18),s.yc(59,le,2,1,"mat-error",9),s.Tb(),s.Tb(),s.Ub(60,"div",19),s.Ub(61,"div",2),s.Ub(62,"table",20),s.yc(63,fe,3,1,"ng-container",21),s.yc(64,de,1,0,"tr",22),s.yc(65,ge,1,0,"tr",23),s.Tb(),s.yc(66,me,2,1,"mat-error",9),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(67,"mat-card-actions"),s.Ub(68,"button",24),s.cc("click",(function(){return t.save()})),s.zc(69,"Salvar"),s.Tb(),s.Ub(70,"button",25),s.cc("click",(function(){return t.new()})),s.zc(71,"Nuevo"),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb()),2&e&&(s.Cb(7),s.Bc(" ",t.title," "),s.Cb(4),s.Bc(" ",t.subtitle," "),s.Cb(2),s.lc("formGroup",t.entityForm),s.Cb(6),s.lc("ngModel",t.entity.employeeId),s.Cb(1),s.lc("ngForOf",t.employees),s.Cb(1),s.lc("ngIf",t.entityForm.invalid),s.Cb(3),s.lc("ngModel",t.entity.total)("readonly",!0),s.Cb(3),s.lc("ngForOf",t.lotteries),s.Cb(1),s.lc("ngIf",t.entityForm.invalid),s.Cb(4),s.lc("ngModel",t.number),s.Cb(1),s.lc("ngIf",t.entityForm.invalid),s.Cb(4),s.lc("ngModel",t.entity.price),s.Cb(3),s.lc("ngModel",t.entity.firstThree)("ngModelOptions",s.mc(35,Y)),s.Cb(2),s.lc("ngIf",t.entity.firstThree),s.Cb(2),s.lc("ngModel",t.entity.chock)("ngModelOptions",s.mc(36,Y)),s.Cb(2),s.lc("ngIf",t.entity.chock),s.Cb(1),s.lc("ngIf",t.entity.chock),s.Cb(1),s.lc("ngIf",t.entity.chock&&t.entityForm.invalid),s.Cb(3),s.lc("ngModel",t.entity.lastThree)("ngModelOptions",s.mc(37,Y)),s.Cb(2),s.lc("ngIf",t.entity.lastThree),s.Cb(2),s.lc("ngModel",t.entity.combined)("ngModelOptions",s.mc(38,Y)),s.Cb(2),s.lc("ngIf",t.entity.combined),s.Cb(1),s.lc("ngIf",t.entity.combined),s.Cb(1),s.lc("ngIf",t.entity.combined&&t.entityForm.invalid),s.Cb(3),s.lc("dataSource",t.dataSource),s.Cb(1),s.lc("ngForOf",t.displayedColumns),s.Cb(1),s.lc("matHeaderRowDef",t.displayedColumns),s.Cb(1),s.lc("matRowDefColumns",t.displayedColumns),s.Cb(1),s.lc("ngIf",t.entityForm.invalid),s.Cb(2),s.lc("disabled",!t.entityForm.valid))},directives:[f.a,f.e,f.h,f.g,f.c,i.t,i.m,i.g,d.c,d.f,m.a,i.l,i.e,i.r,n.j,n.k,g.b,i.b,i.p,y.a,i.o,k.n,U.a,k.k,k.m,f.b,p.a,C.n,d.b,n.l,k.c,k.i,k.b,k.h,k.a,T.a,k.j,k.l],encapsulation:2}),ye),ve=r("iadO"),Ce=function(e){return{color:e}};function Te(e,t){if(1&e&&(s.Ub(0,"mat-option",24),s.zc(1),s.Tb()),2&e){var r=t.$implicit;s.lc("value",r.id)("ngStyle",s.nc(3,Ce,r.color)),s.Cb(1),s.Bc(" ",r.name," ")}}function Fe(e,t){1&e&&(s.Ub(0,"th",25),s.zc(1," Id "),s.Tb())}function ke(e,t){if(1&e&&(s.Ub(0,"td",26),s.zc(1),s.Tb()),2&e){var r=t.$implicit;s.Cb(1),s.Bc(" ",r.id," ")}}function Ue(e,t){if(1&e&&(s.Ub(0,"th",25),s.zc(1),s.Tb()),2&e){var r=s.gc().$implicit;s.Cb(1),s.Bc(" ",r," ")}}function we(e,t){1&e&&(s.Ub(0,"span",29),s.zc(1,"notification_important"),s.Tb())}function Oe(e,t){if(1&e&&(s.Ub(0,"td",26),s.Ub(1,"span"),s.zc(2),s.Tb(),s.yc(3,we,2,0,"span",28),s.Tb()),2&e){var r=t.$implicit,n=s.gc().$implicit,i=s.gc();s.Cb(2),s.Ac(r[n]),s.Cb(1),s.lc("ngIf","actions"===n&&i.validateAlert(r))}}function Ie(e,t){1&e&&(s.Sb(0,27),s.yc(1,Ue,2,1,"th",18),s.yc(2,Oe,4,2,"td",19),s.Rb()),2&e&&s.lc("matColumnDef",t.$implicit)}function Pe(e,t){1&e&&s.Pb(0,"tr",30)}function Me(e,t){1&e&&s.Pb(0,"tr",31)}var xe,De,_e=function(){return{standalone:!0}},Se=((De=function(e){_inherits(r,e);var t=_createSuper(r);function r(e,n,i){var a;return _classCallCheck(this,r),(a=t.call(this)).service=e,a.authService=n,a.router=i,a.entityApi="bets",a.entityApiLotteries="lotteries",a.lotteries=[],a.selectedIdLotteries=[],a.settings={showPreviewDialog:!0,query:{table:"vw_betAlerts"},options:{where:{isFourFigure:!0,lotteryId:{$in:a.selectedIdLotteries}},order:[["accumulated","desc"],["accumulatedTotal","desc"]]}},a.displayedColumns=["lottery","number","accumulated","difference","createdDate","accumulatedTotal","actions"],a.filtersColumns=["lottery"],a.price=7e3,a.createdDate=new Date,a}return _createClass(r,[{key:"ngOnInit",value:function(){var e=this;this.title="Apuestas Alertas",this.subtitle="Apuesta",_get(_getPrototypeOf(r.prototype),"init",this).call(this,this);var t="";switch((new Date).getDay()){case 0:t="sunday";break;case 1:t="monday";break;case 2:t="tuesday";break;case 3:t="wednesday";break;case 4:t="thursday";break;case 5:t="friday";break;case 6:t="saturday"}this.service.get(this.entityApiLotteries,{options:{where:{play:{$like:"%"+t+"%"}},order:[["name","asc"]]}}).subscribe((function(t){for(var n=t,i=function(){var t,r=c[a],i=_createForOfIteratorHelper(n.filter((function(e){return e.temporality==r.value})));try{for(i.s();!(t=i.n()).done;){var o=t.value;o.color=r.color,e.lotteries.push(o),e.selectedIdLotteries.push(o.id)}}catch(l){i.e(l)}finally{i.f()}},a=0,c=[{value:"morning",color:"green"},{value:"afternoon",color:"crimson"},{value:"night",color:"blue"},{value:null,color:"Ninguna"}];a<c.length;a++)i();_get(_getPrototypeOf(r.prototype),"onPageChange",e).call(e)}))}},{key:"ngOnChanges",value:function(e){this.loadChange&&_get(_getPrototypeOf(r.prototype),"onPageChange",this).call(this)}},{key:"onEdit",value:function(e){}},{key:"validateAlert",value:function(e){var t=!1;return e.accumulated>this.price&&(t=!0),t}},{key:"numberOnly",value:function(e){var t=e.which?e.which:e.keyCode;return!(t>31&&(t<48||t>57))}},{key:"downloadFile",value:function(){var e="Numbers"+new Date,t=this.getText(),r=document.createElement("a");r.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),r.setAttribute("download",e),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}},{key:"getText",value:function(){var e,t="",r=_createForOfIteratorHelper(this.dataSource.data);try{for(r.s();!(e=r.n()).done;){var n=e.value;n.accumulated>this.price&&(t+=n.lottery+" "+n.number+" de "+n.difference+" \r\n")}}catch(i){r.e(i)}finally{r.f()}return t}},{key:"beforePrint",value:function(e){var t,r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;n.difference=n.accumulated-this.price,n.difference<1&&(n.difference="")}}catch(i){r.e(i)}finally{r.f()}return e}},{key:"covered",value:function(){var e,t=this,r=[],n=_createForOfIteratorHelper(this.dataSource.data);try{var i=function(){var n=e.value;n.accumulated>t.price&&(r.find((function(e){return e==n.number}))||r.push({number:n.number,lotteryId:n.lotteryId}))};for(n.s();!(e=n.n()).done;)i()}catch(c){n.e(c)}finally{n.f()}if(r.length&&confirm("\xbfYa descargo el archivo de n\xfameros?")){var a=this.createdDate.getDate()+"/"+(this.createdDate.getMonth()+1)+"/"+this.createdDate.getFullYear();this.service.save("details",{numbers:r,accumulated:this.price,createdDate:a}).subscribe((function(e){t.onPageChange()}))}}},{key:"beforePageChange",value:function(){if(this.createdDate){var e=this.createdDate.getDate()+"/"+(this.createdDate.getMonth()+1)+"/"+this.createdDate.getFullYear();this.settings.options.where.createdDate=e}else delete this.settings.options.where.createdDate;this.settings.options.where.lotteryId=this.selectedIdLotteries}}]),r}(F.a)).\u0275fac=function(e){return new(e||De)(s.Ob(u.a),s.Ob(h.a),s.Ob(c.f))},De.\u0275cmp=s.Ib({type:De,selectors:[["app-bet-alerts"]],inputs:{loadChange:"loadChange"},features:[s.zb,s.Ab],decls:49,vars:18,consts:[["fxLayout","row","fxLayoutWrap","wrap"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100"],["fxLayout","row","fxLayoutWrap","wrap",2,"margin-text-outline","10px","margin-top","10px"],[2,"margin-right","10px",3,"ngModel","ngModelOptions","ngModelChange"],[2,"float","left","width","30%","margin-right","10px"],["matInput","","type","number","placeholder","Entre precio","onKeyPress","if(this.value.length==9) return false;","autocomplete","off",3,"ngModel","keypress","ngModelChange"],[2,"width","30%","margin-right","10px"],["matInput","",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],["multiple","",3,"value","valueChange"],[3,"value","ngStyle",4,"ngFor","ngForOf"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100",2,"overflow","hidden"],["mat-fab","","color","basic",2,"float","left",3,"click"],["mat-fab","","color","warn",2,"float","right",3,"click"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[3,"value","ngStyle"],["mat-header-cell",""],["mat-cell",""],[3,"matColumnDef"],["class","material-icons",4,"ngIf"],[1,"material-icons"],["mat-header-row",""],["mat-row",""]],template:function(e,t){if(1&e&&(s.Ub(0,"div",0),s.Ub(1,"div",1),s.Ub(2,"mat-card"),s.Ub(3,"mat-card-header"),s.Ub(4,"mat-card-title"),s.Ub(5,"div",0),s.Ub(6,"div",2),s.zc(7),s.Tb(),s.Tb(),s.Tb(),s.Ub(8,"mat-card-subtitle"),s.Ub(9,"div",0),s.Ub(10,"div",2),s.zc(11),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(12,"mat-card-content"),s.Ub(13,"div",3),s.Ub(14,"div",2),s.Ub(15,"mat-checkbox",4),s.cc("ngModelChange",(function(e){return t.settings.options.where.isFourFigure=e})),s.zc(16,"Cuatro Cifras"),s.Tb(),s.Tb(),s.Tb(),s.Ub(17,"div",0),s.Ub(18,"div",2),s.Ub(19,"mat-form-field",5),s.Ub(20,"input",6),s.cc("keypress",(function(e){return t.numberOnly(e)}))("ngModelChange",(function(e){return t.price=e})),s.Tb(),s.Tb(),s.Ub(21,"mat-form-field",7),s.Ub(22,"mat-label"),s.zc(23,"Seleccione fecha"),s.Tb(),s.Ub(24,"input",8),s.cc("ngModelChange",(function(e){return t.createdDate=e})),s.Tb(),s.Pb(25,"mat-datepicker-toggle",9),s.Pb(26,"mat-datepicker",null,10),s.Tb(),s.Ub(28,"mat-form-field",7),s.Ub(29,"mat-label"),s.zc(30,"Select an option"),s.Tb(),s.Ub(31,"mat-select",11),s.cc("valueChange",(function(e){return t.selectedIdLotteries=e})),s.yc(32,Te,2,5,"mat-option",12),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(33,"div",0),s.Ub(34,"div",13),s.Ub(35,"button",14),s.cc("click",(function(){return t.onPageChange()})),s.zc(36,"Refrescar"),s.Tb(),s.Ub(37,"button",14),s.cc("click",(function(){return t.downloadFile()})),s.zc(38,"Archivo"),s.Tb(),s.Ub(39,"button",15),s.cc("click",(function(){return t.covered()})),s.zc(40,"Cubrir"),s.Tb(),s.Tb(),s.Tb(),s.Ub(41,"table",16),s.cc("matSortChange",(function(e){return t.onSortChange(e)})),s.Sb(42,17),s.yc(43,Fe,2,0,"th",18),s.yc(44,ke,2,1,"td",19),s.Rb(),s.yc(45,Ie,3,1,"ng-container",20),s.yc(46,Pe,1,0,"tr",21),s.yc(47,Me,1,0,"tr",22),s.Tb(),s.Ub(48,"mat-paginator",23),s.cc("page",(function(e){return t.onPaginatorChange(e)})),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb()),2&e){var r=s.qc(27);s.Cb(7),s.Bc(" ",t.title," "),s.Cb(4),s.Bc(" ",t.subtitle," "),s.Cb(4),s.lc("ngModel",t.settings.options.where.isFourFigure)("ngModelOptions",s.mc(17,_e)),s.Cb(5),s.lc("ngModel",t.price),s.Cb(4),s.lc("matDatepicker",r)("ngModel",t.createdDate),s.Cb(1),s.lc("for",r),s.Cb(6),s.lc("value",t.selectedIdLotteries),s.Cb(1),s.lc("ngForOf",t.lotteries),s.Cb(9),s.lc("dataSource",t.dataSource),s.Cb(4),s.lc("ngForOf",t.displayedColumns),s.Cb(1),s.lc("matHeaderRowDef",t.displayedColumns),s.Cb(1),s.lc("matRowDefColumns",t.displayedColumns),s.Cb(1),s.lc("length",t.length)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions)}},directives:[f.a,f.e,f.h,f.g,f.c,y.a,i.l,i.o,d.c,g.b,i.p,i.b,d.f,ve.b,ve.d,d.g,ve.a,m.a,n.j,p.a,k.n,U.a,k.c,k.i,k.b,k.k,k.m,w.a,C.n,n.l,k.h,k.a,n.k,k.j,k.l],encapsulation:2}),De),ze=((xe=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e,t){return this.getMessage(e=e||"")||e}},{key:"getMessage",value:function(e){var t=[{lottery:"Loter\xeda"},{firstThree:"Tres primeras"},{lastThree:"Tres ultimas"},{chock:"Cu\xf1a"},{chockNumber:"Cu\xf1a"},{combined:"Combinado"},{number:"Numero"},{price:"Precio"},{employeeCode:"C\xf3digo empleado"},{created:"Creado"},{userName:"Nombre usuario"},{actions:"Acciones"},{accumulated:"Acumulado"},{accumulatedTotal:"Acumulado Total"}].find((function(t){return e in t}));return t?t[e]:""}}]),e}()).\u0275fac=function(e){return new(e||xe)},xe.\u0275pipe=s.Nb({name:"translate",type:xe,pure:!1}),xe);function Ae(e,t){if(1&e&&(s.Ub(0,"mat-card-header"),s.Ub(1,"mat-card-title"),s.Ub(2,"div",0),s.Ub(3,"div",23),s.zc(4),s.Tb(),s.Tb(),s.Tb(),s.Ub(5,"mat-card-subtitle"),s.Ub(6,"div",0),s.Ub(7,"div",23),s.zc(8),s.Tb(),s.Tb(),s.Tb(),s.Tb()),2&e){var r=s.gc();s.Cb(4),s.Bc(" ",r.title," "),s.Cb(4),s.Bc(" ",r.subtitle," ")}}function Le(e,t){if(1&e&&(s.Ub(0,"mat-option",24),s.zc(1),s.Tb()),2&e){var r=t.$implicit;s.lc("value",r.value),s.Cb(1),s.Bc(" ",r.text," ")}}function Ne(e,t){1&e&&(s.Ub(0,"th",25),s.zc(1," Id "),s.Tb())}function Ee(e,t){if(1&e&&(s.Ub(0,"td",26),s.zc(1),s.Tb()),2&e){var r=t.$implicit;s.Cb(1),s.Bc(" ",r.betId," ")}}function He(e,t){if(1&e&&(s.Ub(0,"th",25),s.zc(1),s.hc(2,"translate"),s.Tb()),2&e){var r=s.gc().$implicit;s.Cb(1),s.Bc(" ",s.ic(2,1,r)," ")}}function Re(e,t){if(1&e&&(s.Ub(0,"td",26),s.Ub(1,"span"),s.zc(2),s.Tb(),s.Tb()),2&e){var r=t.$implicit,n=s.gc().$implicit;s.Cb(2),s.Ac(r[n])}}function $e(e,t){1&e&&(s.Sb(0,27),s.yc(1,He,3,3,"th",17),s.yc(2,Re,3,1,"td",18),s.Rb()),2&e&&s.lc("matColumnDef",t.$implicit)}function Ve(e,t){1&e&&s.Pb(0,"tr",28)}function Be(e,t){1&e&&s.Pb(0,"tr",29)}var je,qe=((je=function(e){_inherits(r,e);var t=_createSuper(r);function r(e,n,i){var a;return _classCallCheck(this,r),(a=t.call(this)).service=e,a.authService=n,a.router=i,a.showCardHeader=!0,a.entityApi="bets",a.settings={showPreviewDialog:!0,query:{table:"vw_bets"},options:{where:{},order:[["created","desc"]]}},a.displayedColumns=["lottery","firstThree","lastThree","combined","number","price","employeeCode","chockNumber","created","userName","actions"],a.filtersColumns=["lottery","employeeCode"],a.lotteries=[],a}return _createClass(r,[{key:"ngOnInit",value:function(){var e=this;this.title="Apuestas",this.subtitle="Apuesta",this.service.getSelect("lotteries",{value:"id",text:"name"}).subscribe((function(t){e.lotteries=t,e.lotteryId=e.lotteries[0].value,_get(_getPrototypeOf(r.prototype),"init",e).call(e,e),_get(_getPrototypeOf(r.prototype),"onPageChange",e).call(e)}))}},{key:"ngOnChanges",value:function(e){this.loadChange&&_get(_getPrototypeOf(r.prototype),"onPageChange",this).call(this)}},{key:"onEdit",value:function(e){this.router.navigate(["/bet2",{betId:e.id}])}},{key:"beforePageChange",value:function(){if(this.lotteryId?this.settings.options.where.lotteryId=this.lotteryId:delete this.settings.options.where.lotteryId,this.createdDate){var e=this.createdDate.getDate()+"/"+(this.createdDate.getMonth()+1)+"/"+this.createdDate.getFullYear();this.settings.options.where.createdDate=e}else delete this.settings.options.where.createdDate}},{key:"numberOnly",value:function(e){var t=e.which?e.which:e.keyCode;return!(t>31&&(t<48||t>57))}},{key:"numberChange",value:function(){this.settings.options.where.$or=this.number?[{number:this.number},{chockNumber:this.number}]:[]}},{key:"padNumber",value:function(e,t,r){return r=r||"0",(e+="").length>=t?e:new Array(t-e.length+1).join(r)+e}}]),r}(F.a)).\u0275fac=function(e){return new(e||je)(s.Ob(u.a),s.Ob(h.a),s.Ob(c.f))},je.\u0275cmp=s.Ib({type:je,selectors:[["app-bets"]],inputs:{loadChange:"loadChange",showCardHeader:"showCardHeader"},features:[s.zb,s.Ab],decls:36,vars:15,consts:[["fxLayout","row","fxLayoutWrap","wrap"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],[4,"ngIf"],[2,"width","30%","margin-right","10px"],["matInput","",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],["fxFlex.gt-sm","100","fxFlex.gt-xs","100",2,"overflow","hidden"],[2,"float","left","width","30%","margin-right","10px"],["matInput","","placeholder","Filtrar",3,"ngModel","keyup.enter","ngModelChange"],["matNativeControl","","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[2,"width","30%"],["matInput","","placeholder","Entre number","onKeyPress","if(this.value.length===4) return false;","autocomplete","off",3,"ngModel","change","keypress","ngModelChange"],["mat-fab","","color","basic",2,"float","left",3,"click"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100"],[3,"value"],["mat-header-cell",""],["mat-cell",""],[3,"matColumnDef"],["mat-header-row",""],["mat-row",""]],template:function(e,t){if(1&e&&(s.Ub(0,"div",0),s.Ub(1,"div",1),s.Ub(2,"mat-card"),s.yc(3,Ae,9,2,"mat-card-header",2),s.Ub(4,"mat-card-content"),s.Ub(5,"div",0),s.Ub(6,"mat-form-field",3),s.Ub(7,"mat-label"),s.zc(8,"Seleccione fecha"),s.Tb(),s.Ub(9,"input",4),s.cc("ngModelChange",(function(e){return t.createdDate=e})),s.Tb(),s.Pb(10,"mat-datepicker-toggle",5),s.Pb(11,"mat-datepicker",null,6),s.Tb(),s.Tb(),s.Ub(13,"div",0),s.Ub(14,"div",7),s.Ub(15,"mat-form-field",8),s.Ub(16,"input",9),s.cc("keyup.enter",(function(){return t.onPageChange()}))("ngModelChange",(function(e){return t.filter=e})),s.Tb(),s.Tb(),s.Ub(17,"mat-form-field",3),s.Ub(18,"mat-label"),s.zc(19,"Seleccione Loteria"),s.Tb(),s.Ub(20,"mat-select",10),s.cc("ngModelChange",(function(e){return t.lotteryId=e})),s.yc(21,Le,2,2,"mat-option",11),s.Tb(),s.Tb(),s.Ub(22,"mat-form-field",12),s.Ub(23,"input",13),s.cc("change",(function(){return t.numberChange()}))("keypress",(function(e){return t.numberOnly(e)}))("ngModelChange",(function(e){return t.number=e})),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(24,"div",0),s.Ub(25,"div",7),s.Ub(26,"button",14),s.cc("click",(function(){return t.onPageChange()})),s.zc(27,"Refrescar"),s.Tb(),s.Tb(),s.Tb(),s.Ub(28,"table",15),s.cc("matSortChange",(function(e){return t.onSortChange(e)})),s.Sb(29,16),s.yc(30,Ne,2,0,"th",17),s.yc(31,Ee,2,1,"td",18),s.Rb(),s.yc(32,$e,3,1,"ng-container",19),s.yc(33,Ve,1,0,"tr",20),s.yc(34,Be,1,0,"tr",21),s.Tb(),s.Ub(35,"mat-paginator",22),s.cc("page",(function(e){return t.onPaginatorChange(e)})),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb()),2&e){var r=s.qc(12);s.Cb(3),s.lc("ngIf",t.showCardHeader),s.Cb(6),s.lc("matDatepicker",r)("ngModel",t.createdDate),s.Cb(1),s.lc("for",r),s.Cb(6),s.lc("ngModel",t.filter),s.Cb(4),s.lc("ngModel",t.lotteryId),s.Cb(1),s.lc("ngForOf",t.lotteries),s.Cb(2),s.lc("ngModel",t.number),s.Cb(5),s.lc("dataSource",t.dataSource),s.Cb(4),s.lc("ngForOf",t.displayedColumns),s.Cb(1),s.lc("matHeaderRowDef",t.displayedColumns),s.Cb(1),s.lc("matRowDefColumns",t.displayedColumns),s.Cb(1),s.lc("length",t.length)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions)}},directives:[f.a,n.k,f.c,d.c,d.f,g.b,ve.b,i.b,i.l,i.o,ve.d,d.g,ve.a,m.a,i.r,n.j,p.a,k.n,U.a,k.c,k.i,k.b,k.k,k.m,w.a,f.e,f.h,f.g,C.n,k.h,k.a,k.j,k.l],pipes:[ze],encapsulation:2}),je);function Ge(e,t){if(1&e&&(s.Ub(0,"mat-card-header"),s.Ub(1,"mat-card-title"),s.Ub(2,"div",0),s.Ub(3,"div",12),s.zc(4),s.Tb(),s.Tb(),s.Tb(),s.Ub(5,"mat-card-subtitle"),s.Ub(6,"div",0),s.Ub(7,"div",12),s.zc(8),s.Tb(),s.Tb(),s.Tb(),s.Tb()),2&e){var r=s.gc();s.Cb(4),s.Bc(" ",r.title," "),s.Cb(4),s.Bc(" ",r.subtitle," ")}}function Ke(e,t){1&e&&(s.Ub(0,"th",13),s.zc(1," Id "),s.Tb())}function Je(e,t){if(1&e&&(s.Ub(0,"td",14),s.zc(1),s.Tb()),2&e){var r=t.$implicit;s.Cb(1),s.Bc(" ",r.id," ")}}function We(e,t){if(1&e&&(s.Ub(0,"th",13),s.zc(1),s.Tb()),2&e){var r=s.gc().$implicit;s.Cb(1),s.Bc(" ",r," ")}}function Ye(e,t){if(1&e){var r=s.Vb();s.Ub(0,"button",17),s.cc("click",(function(){s.sc(r);var e=s.gc().$implicit;return s.gc(2).onDelete(e)})),s.Ub(1,"mat-icon"),s.zc(2,"delete_outline"),s.Tb(),s.Tb()}}function Ze(e,t){if(1&e&&(s.Ub(0,"td",14),s.Ub(1,"span"),s.zc(2),s.Tb(),s.yc(3,Ye,3,0,"button",16),s.Tb()),2&e){var r=t.$implicit,n=s.gc().$implicit;s.Cb(2),s.Ac(r[n]),s.Cb(1),s.lc("ngIf","actions"===n)}}function Xe(e,t){1&e&&(s.Sb(0,15),s.yc(1,We,2,1,"th",6),s.yc(2,Ze,4,2,"td",7),s.Rb()),2&e&&s.lc("matColumnDef",t.$implicit)}function Qe(e,t){1&e&&s.Pb(0,"tr",18)}function et(e,t){1&e&&s.Pb(0,"tr",19)}var tt,rt=((tt=function(e){_inherits(r,e);var t=_createSuper(r);function r(e,n,i){var a;return _classCallCheck(this,r),(a=t.call(this)).service=e,a.authService=n,a.router=i,a.showCardHeader=!0,a.entityApi="numbers",a.settings={query:{table:"vw_forbiddenNumbers"},options:{order:[["number"]]}},a.displayedColumns=["number","isActive","lotteryName","actions"],a.filtersColumns=["number"],a}return _createClass(r,[{key:"ngOnInit",value:function(){this.title="Numeros Prohibido",this.subtitle="Apuesta",_get(_getPrototypeOf(r.prototype),"init",this).call(this,this),_get(_getPrototypeOf(r.prototype),"onPageChange",this).call(this)}},{key:"ngOnChanges",value:function(e){this.loadChange&&_get(_getPrototypeOf(r.prototype),"onPageChange",this).call(this)}},{key:"onEdit",value:function(e){this.router.navigate(["/forbidden",{numberId:e.id}])}}]),r}(F.a)).\u0275fac=function(e){return new(e||tt)(s.Ob(u.a),s.Ob(h.a),s.Ob(c.f))},tt.\u0275cmp=s.Ib({type:tt,selectors:[["app-forbidden-numbers"]],inputs:{loadChange:"loadChange",showCardHeader:"showCardHeader"},features:[s.zb,s.Ab],decls:15,vars:9,consts:[["fxLayout","row","fxLayoutWrap","wrap"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],[4,"ngIf"],["matInput","","placeholder","Filtrar",3,"ngModel","keyup.enter","ngModelChange"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100"],["mat-header-cell",""],["mat-cell",""],[3,"matColumnDef"],["mat-button","","color","warn",3,"click",4,"ngIf"],["mat-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(s.Ub(0,"div",0),s.Ub(1,"div",1),s.Ub(2,"mat-card"),s.yc(3,Ge,9,2,"mat-card-header",2),s.Ub(4,"mat-card-content"),s.Ub(5,"mat-form-field"),s.Ub(6,"input",3),s.cc("keyup.enter",(function(){return t.onPageChange()}))("ngModelChange",(function(e){return t.filter=e})),s.Tb(),s.Tb(),s.Ub(7,"table",4),s.cc("matSortChange",(function(e){return t.onSortChange(e)})),s.Sb(8,5),s.yc(9,Ke,2,0,"th",6),s.yc(10,Je,2,1,"td",7),s.Rb(),s.yc(11,Xe,3,1,"ng-container",8),s.yc(12,Qe,1,0,"tr",9),s.yc(13,et,1,0,"tr",10),s.Tb(),s.Ub(14,"mat-paginator",11),s.cc("page",(function(e){return t.onPaginatorChange(e)})),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb()),2&e&&(s.Cb(3),s.lc("ngIf",t.showCardHeader),s.Cb(3),s.lc("ngModel",t.filter),s.Cb(1),s.lc("dataSource",t.dataSource),s.Cb(4),s.lc("ngForOf",t.displayedColumns),s.Cb(1),s.lc("matHeaderRowDef",t.displayedColumns),s.Cb(1),s.lc("matRowDefColumns",t.displayedColumns),s.Cb(1),s.lc("length",t.length)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions))},directives:[f.a,n.k,f.c,d.c,g.b,i.b,i.l,i.o,k.n,U.a,k.c,k.i,k.b,n.j,k.k,k.m,w.a,f.e,f.h,f.g,k.h,k.a,p.a,T.a,k.j,k.l],encapsulation:2}),tt);function nt(e,t){if(1&e&&(s.Ub(0,"mat-error"),s.zc(1),s.Tb()),2&e){var r=s.gc();s.Cb(1),s.Ac(r.getErrorMessage("number"))}}function it(e,t){if(1&e&&(s.Ub(0,"mat-option",14),s.zc(1),s.Tb()),2&e){var r=t.$implicit;s.lc("value",r.value),s.Cb(1),s.Bc(" ",r.text," ")}}function at(e,t){if(1&e&&(s.Ub(0,"mat-error"),s.zc(1),s.Tb()),2&e){var r=s.gc();s.Cb(1),s.Ac(r.getErrorMessage("lotteryId"))}}function ct(e,t){1&e&&(s.Ub(0,"mat-icon"),s.zc(1,"block"),s.Tb(),s.zc(2," Numeros "))}function ot(e,t){if(1&e&&(s.Ub(0,"div"),s.Ub(1,"div"),s.Pb(2,"app-forbidden-numbers",15),s.Tb(),s.Tb()),2&e){var r=s.gc();s.Cb(2),s.lc("loadChange",r.loadNumbers)("showCardHeader",!1)}}var lt,st=function(){return{standalone:!0}},ut=((lt=function(e){_inherits(r,e);var t=_createSuper(r);function r(e,n,a,c,o,l,s){var u;return _classCallCheck(this,r),(u=t.call(this)).service=e,u.authService=n,u.route=a,u.fb=c,u.router=o,u.changeDetectorRef=l,u._snackBar=s,u.entityApi="numbers",u.entities=[],u.lotteries=[],u.configFormGroup=function(e){u.entityForm=new i.f({number:new i.d("",[i.s.required]),lotteryId:new i.d("",[i.s.required])})},u}return _createClass(r,[{key:"ngOnInit",value:function(){var e=this;this.title="Prohibido",this.subtitle="Apuesta",this.service.getSelect("lotteries",{value:"id",text:"name"}).subscribe((function(t){e.lotteries=t,e.lotteries.unshift({value:"all",text:"Todas"})})),this.iniEntity(),_get(_getPrototypeOf(r.prototype),"init",this).call(this,this),this.route.params.subscribe((function(t){t&&t.numberId?(e.configFormGroup(t.numberId),_get(_getPrototypeOf(r.prototype),"getEntity",e).call(e,t.numberId).subscribe((function(){}))):e.configFormGroup()}))}},{key:"iniEntity",value:function(){this.currEntity={number:null,isActive:!0,lotteryId:null}}},{key:"new",value:function(){this.iniEntity(),this.router.navigate(["/forbidden"])}},{key:"afterSaved",value:function(){this.loadNumbers=(new Date).toString()}},{key:"numberOnly",value:function(e){var t=e.which?e.which:e.keyCode;return!(t>31&&(t<48||t>57))}},{key:"beforeSaved",value:function(){if(this.entities=[],"all"==this.currEntity.lotteryId){var e,t=_createForOfIteratorHelper(this.lotteries);try{for(t.s();!(e=t.n()).done;){var r=e.value;"all"!=r.value&&this.entities.push({number:this.currEntity.number,isActive:!0,lotteryId:r.value})}}catch(n){t.e(n)}finally{t.f()}}else this.entities=[this.currEntity];return!0}}]),r}(l.a)).\u0275fac=function(e){return new(e||lt)(s.Ob(u.a),s.Ob(h.a),s.Ob(c.a),s.Ob(i.c),s.Ob(c.f),s.Ob(s.h),s.Ob(b.a))},lt.\u0275cmp=s.Ib({type:lt,selectors:[["app-forbidden-number"]],features:[s.zb],decls:41,vars:12,consts:[["fxLayout","row","fxLayoutWrap","wrap"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100"],[3,"formGroup"],["matInput","","placeholder","Entre number","formControlName","number","onKeyPress","if(this.value.length===4) return false;","autocomplete","off","required","",3,"ngModel","keypress","ngModelChange"],[4,"ngIf"],["fxLayout","row","fxLayoutWrap","wrap",2,"margin-text-outline","10px","margin-top","10px"],[2,"margin-right","10px",3,"ngModel","ngModelOptions","ngModelChange"],["matNativeControl","","formControlName","lotteryId","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["mat-fab","","color","accent",3,"disabled","click"],["mat-fab","","color","primary",3,"click"],["mat-tab-label",""],["matTabContent",""],[3,"value"],[3,"loadChange","showCardHeader"]],template:function(e,t){1&e&&(s.Ub(0,"div",0),s.Ub(1,"div",1),s.Ub(2,"mat-card"),s.Ub(3,"mat-card-header"),s.Ub(4,"mat-card-title"),s.Ub(5,"div",0),s.Ub(6,"div",2),s.zc(7),s.Tb(),s.Tb(),s.Tb(),s.Ub(8,"mat-card-subtitle"),s.Ub(9,"div",0),s.Ub(10,"div",2),s.zc(11),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(12,"mat-card-content"),s.Ub(13,"form",3),s.Ub(14,"div",0),s.Ub(15,"div",2),s.Ub(16,"mat-form-field"),s.Ub(17,"input",4),s.cc("keypress",(function(e){return t.numberOnly(e)}))("ngModelChange",(function(e){return t.currEntity.number=e})),s.Tb(),s.yc(18,nt,2,1,"mat-error",5),s.Tb(),s.Tb(),s.Tb(),s.Ub(19,"div",6),s.Ub(20,"div",2),s.Ub(21,"mat-checkbox",7),s.cc("ngModelChange",(function(e){return t.currEntity.isActive=e})),s.zc(22,"Esta Activo"),s.Tb(),s.Tb(),s.Tb(),s.Ub(23,"div",6),s.Ub(24,"div",2),s.Ub(25,"mat-form-field"),s.Ub(26,"mat-label"),s.zc(27,"Seleccione loteria"),s.Tb(),s.Ub(28,"mat-select",8),s.cc("ngModelChange",(function(e){return t.currEntity.lotteryId=e})),s.yc(29,it,2,2,"mat-option",9),s.Tb(),s.yc(30,at,2,1,"mat-error",5),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(31,"mat-card-actions"),s.Ub(32,"button",10),s.cc("click",(function(){return t.save()})),s.zc(33,"Salvar"),s.Tb(),s.Ub(34,"button",11),s.cc("click",(function(){return t.new()})),s.zc(35,"Nuevo"),s.Tb(),s.Tb(),s.Ub(36,"mat-card-footer"),s.Ub(37,"mat-tab-group"),s.Ub(38,"mat-tab"),s.yc(39,ct,3,0,"ng-template",12),s.yc(40,ot,3,2,"ng-template",13),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb()),2&e&&(s.Cb(7),s.Bc(" ",t.title," "),s.Cb(4),s.Bc(" ",t.subtitle," "),s.Cb(2),s.lc("formGroup",t.entityForm),s.Cb(4),s.lc("ngModel",t.currEntity.number),s.Cb(1),s.lc("ngIf",t.entityForm.invalid),s.Cb(3),s.lc("ngModel",t.currEntity.isActive)("ngModelOptions",s.mc(11,st)),s.Cb(7),s.lc("ngModel",t.currEntity.lotteryId),s.Cb(1),s.lc("ngForOf",t.lotteries),s.Cb(1),s.lc("ngIf",t.entityForm.invalid),s.Cb(2),s.lc("disabled",!t.entityForm.valid))},directives:[f.a,f.e,f.h,f.g,f.c,i.t,i.m,i.g,d.c,g.b,i.b,i.l,i.e,i.r,n.k,y.a,i.o,d.f,m.a,n.j,f.b,p.a,f.d,v.c,v.a,v.d,v.b,d.b,C.n,T.a,rt],encapsulation:2}),lt);function ht(e,t){if(1&e&&(s.Ub(0,"mat-option",26),s.zc(1),s.Tb()),2&e){var r=t.$implicit;s.lc("value",r.value),s.Cb(1),s.Bc(" ",r.text," ")}}function bt(e,t){if(1&e&&(s.Ub(0,"mat-error"),s.zc(1),s.Tb()),2&e){var r=s.gc();s.Cb(1),s.Ac(r.getErrorMessage("employeeId"))}}var ft=function(){return{standalone:!0}},dt=function(e){return{color:e}};function gt(e,t){if(1&e){var r=s.Vb();s.Ub(0,"mat-checkbox",27),s.cc("ngModelChange",(function(e){return s.sc(r),t.$implicit.check=e}))("change",(function(e){return s.sc(r),s.gc().lotteryChange(e)})),s.zc(1),s.Tb()}if(2&e){var n=t.$implicit;s.lc("ngModel",n.check)("ngModelOptions",s.mc(5,ft))("value",n.id)("ngStyle",s.nc(6,dt,n.color)),s.Cb(1),s.Ac(n.name)}}function mt(e,t){if(1&e&&(s.Ub(0,"mat-error"),s.zc(1),s.Tb()),2&e){var r=s.gc();s.Cb(1),s.Ac(r.getErrorMessage("checkLotteries"))}}function yt(e,t){if(1&e&&(s.Ub(0,"mat-error"),s.zc(1),s.Tb()),2&e){var r=s.gc();s.Cb(1),s.Ac(r.getErrorMessage("number"))}}function pt(e,t){if(1&e){var r=s.Vb();s.Ub(0,"mat-form-field",28),s.Ub(1,"input",29),s.cc("keypress",(function(e){return s.sc(r),s.gc().numberOnly(e)}))("ngModelChange",(function(e){return s.sc(r),s.gc().entity.firstThreePrice=e}))("change",(function(){return s.sc(r),s.gc().firstThreePriceChange()})),s.Tb(),s.Tb()}if(2&e){var n=s.gc();s.Cb(1),s.lc("ngModel",n.entity.firstThreePrice)}}function vt(e,t){if(1&e){var r=s.Vb();s.Ub(0,"mat-form-field",30),s.Ub(1,"input",31),s.cc("keypress",(function(e){return s.sc(r),s.gc().numberOnly(e)}))("ngModelChange",(function(e){return s.sc(r),s.gc().entity.chockFourFigurePrice=e}))("change",(function(){return s.sc(r),s.gc().chockFourFigurePriceChange()})),s.Tb(),s.Tb()}if(2&e){var n=s.gc();s.Cb(1),s.lc("ngModelOptions",s.mc(2,ft))("ngModel",n.entity.chockFourFigurePrice)}}function Ct(e,t){if(1&e){var r=s.Vb();s.Ub(0,"mat-form-field",32),s.Ub(1,"input",33),s.cc("keypress",(function(e){return s.sc(r),s.gc().numberOnly(e)}))("ngModelChange",(function(e){return s.sc(r),s.gc().entity.chockThreeFigurePrice=e}))("change",(function(){return s.sc(r),s.gc().chockThreeFigurePriceChange()})),s.Tb(),s.Tb()}if(2&e){var n=s.gc();s.Cb(1),s.lc("ngModelOptions",s.mc(2,ft))("ngModel",n.entity.chockThreeFigurePrice)}}function Tt(e,t){if(1&e&&(s.Ub(0,"mat-error"),s.zc(1),s.Tb()),2&e){var r=s.gc();s.Cb(1),s.Ac(r.getErrorMessage("checkChock"))}}function Ft(e,t){if(1&e){var r=s.Vb();s.Ub(0,"mat-form-field",28),s.Ub(1,"input",34),s.cc("keypress",(function(e){return s.sc(r),s.gc().numberOnly(e)}))("ngModelChange",(function(e){return s.sc(r),s.gc().entity.lastThreePrice=e}))("change",(function(){return s.sc(r),s.gc().lastThreePriceChange()})),s.Tb(),s.Tb()}if(2&e){var n=s.gc();s.Cb(1),s.lc("ngModel",n.entity.lastThreePrice)}}function kt(e,t){if(1&e){var r=s.Vb();s.Ub(0,"mat-form-field",30),s.Ub(1,"input",35),s.cc("keypress",(function(e){return s.sc(r),s.gc().numberOnly(e)}))("ngModelChange",(function(e){return s.sc(r),s.gc().entity.combinedFourFigurePrice=e}))("change",(function(){return s.sc(r),s.gc().combinedFourFigurePriceChange()})),s.Tb(),s.Tb()}if(2&e){var n=s.gc();s.Cb(1),s.lc("ngModelOptions",s.mc(2,ft))("ngModel",n.entity.combinedFourFigurePrice)}}function Ut(e,t){if(1&e){var r=s.Vb();s.Ub(0,"mat-form-field",32),s.Ub(1,"input",36),s.cc("keypress",(function(e){return s.sc(r),s.gc().numberOnly(e)}))("ngModelChange",(function(e){return s.sc(r),s.gc().entity.combinedThreeFigurePrice=e}))("change",(function(){return s.sc(r),s.gc().combinedThreeFigurePriceChange()})),s.Tb(),s.Tb()}if(2&e){var n=s.gc();s.Cb(1),s.lc("ngModelOptions",s.mc(2,ft))("ngModel",n.entity.combinedThreeFigurePrice)}}function wt(e,t){if(1&e&&(s.Ub(0,"mat-error"),s.zc(1),s.Tb()),2&e){var r=s.gc();s.Cb(1),s.Ac(r.getErrorMessage("checkCombined"))}}function Ot(e,t){if(1&e&&(s.Ub(0,"th",40),s.zc(1),s.Tb()),2&e){var r=s.gc().$implicit;s.Cb(1),s.Bc(" ",r," ")}}function It(e,t){if(1&e){var r=s.Vb();s.Ub(0,"button",44),s.cc("click",(function(){return s.sc(r),s.gc(3).preventEnter()})),s.Tb()}}function Pt(e,t){if(1&e){var r=s.Vb();s.Ub(0,"button",45),s.cc("click",(function(){s.sc(r);var e=s.gc().$implicit;return s.gc(2).onDeleteCustomGrid(e)})),s.Ub(1,"mat-icon"),s.zc(2,"delete_outline"),s.Tb(),s.Tb()}}function Mt(e,t){if(1&e&&(s.Ub(0,"td",41),s.Ub(1,"span"),s.zc(2),s.Tb(),s.yc(3,It,1,0,"button",42),s.yc(4,Pt,3,0,"button",43),s.Tb()),2&e){var r=t.$implicit,n=s.gc().$implicit;s.Cb(2),s.Ac(r[n]),s.Cb(1),s.lc("ngIf","actions"===n),s.Cb(1),s.lc("ngIf","actions"===n)}}function xt(e,t){1&e&&(s.Sb(0,37),s.yc(1,Ot,2,1,"th",38),s.yc(2,Mt,5,3,"td",39),s.Rb()),2&e&&s.lc("matColumnDef",t.$implicit)}function Dt(e,t){1&e&&s.Pb(0,"tr",46)}function _t(e,t){1&e&&s.Pb(0,"tr",47)}function St(e,t){if(1&e&&(s.Ub(0,"mat-error"),s.zc(1),s.Tb()),2&e){var r=s.gc();s.Cb(1),s.Ac(r.getErrorMessage("checkNumbers"))}}var zt,At=((zt=function(e){_inherits(r,e);var t=_createSuper(r);function r(e,n,a,c,o,l,s){var u;return _classCallCheck(this,r),(u=t.call(this)).service=e,u.authService=n,u.route=a,u.fb=c,u.router=o,u.changeDetectorRef=l,u._snackBar=s,u.entityApi="bets",u.entityDetailApi="details",u.entityApiEmployees="employees",u.entityApiLotteries="lotteries",u.entityNumbers="numbers",u.employees=[],u.lotteries=[],u.number=null,u.displayedColumns=["number","price","actions"],u.forbiddenNumbers=[],u.configFormGroup=function(e){u.entityForm=new i.f({employeeId:new i.d("",[i.s.required]),checkLotteries:u.fb.array([],[i.s.required]),number:new i.d(""),total:new i.d(""),price:new i.d("",[i.s.required]),firstThreePrice:new i.d(""),lastThreePrice:new i.d(""),checkChock:u.fb.array([]),checkCombined:u.fb.array([]),checkNumbers:u.fb.array([],[i.s.required])})},u}return _createClass(r,[{key:"ngOnInit",value:function(){var e=this;this.title="Apuesta",this.subtitle="Apuesta",this.iniEntity(),_get(_getPrototypeOf(r.prototype),"init",this).call(this,this),this.route.params.subscribe((function(t){e.service.getSelect(e.entityApiEmployees,{value:"id",text:"code",options:{order:[["code","asc"]]}}).subscribe((function(t){e.employees=t}));var n="";switch((new Date).getDay()){case 0:n="sunday";break;case 1:n="monday";break;case 2:n="tuesday";break;case 3:n="wednesday";break;case 4:n="thursday";break;case 5:n="friday";break;case 6:n="saturday"}var a=0,c=0,o=function(){a++;var t=[];if(a==c){if(e.entity&&e.entity.details&&e.entity.details.length){var r,n=_createForOfIteratorHelper(e.entity.details);try{var o=function(){var e=r.value;t.find((function(t){return t.id==e.lotteryId}))||t.push(e.lottery)};for(n.s();!(r=n.n()).done;)o()}catch(b){n.e(b)}finally{n.f()}var l,s=e.entityForm.get("checkLotteries"),u=_createForOfIteratorHelper(t);try{var h=function(){var t=l.value,r=e.lotteries.find((function(e){return e.id==t.id}));r&&(r.check=!0,s.push(new i.d({id:r.id,isThreeFigures:r.isThreeFigures})))};for(u.s();!(l=u.n()).done;)h()}catch(b){u.e(b)}finally{u.f()}}e.entity.details.sort(e.compare),e.calculateTotal()}};c++,e.service.get(e.entityNumbers,{query:{table:"vw_forbiddenNumbers"},options:{where:{isActive:!0}}}).subscribe((function(t){e.forbiddenNumbers=t.rows,o()})),c++,e.service.get(e.entityApiLotteries,{options:{where:{play:{$like:"%"+n+"%"}},order:[["name","asc"]]}}).subscribe((function(t){for(var r=t,n=function(){var t,n=a[i],c=_createForOfIteratorHelper(r.filter((function(e){return e.temporality==n.value})));try{for(c.s();!(t=c.n()).done;){var o=t.value;o.color=n.color,e.lotteries.push(o)}}catch(l){c.e(l)}finally{c.f()}},i=0,a=[{value:"morning",color:"green"},{value:"afternoon",color:"crimson"},{value:"night",color:"blue"},{value:null,color:"Ninguna"}];i<a.length;i++)n();o()})),t&&t.betId?(c++,e.configFormGroup(t.betId),_get(_getPrototypeOf(r.prototype),"getEntity",e).call(e,t.betId,{options:{include:[{association:"details",include:[{association:"lottery"}]},{association:"employee"}]}}).subscribe((function(){o()}))):e.configFormGroup()}))}},{key:"iniEntity",value:function(){var e=null;this.entity&&this.entity.employeeId&&(e=this.entity.employeeId);var t=this.authService.getItem("currentUser");this.entity={employeeId:null,userId:t.id,price:null,firstThree:!1,firstThreePrice:null,lastThree:!1,lastThreePrice:null,chock:!1,chockFourFigurePrice:null,chockThreeFigurePrice:null,combined:!1,combinedFourFigurePrice:null,combinedThreeFigurePrice:null,total:null,details:[]},this.entity.employeeId=e}},{key:"compare",value:function(e,t){var r=e.lotteryId,n=t.lotteryId,i=0;return r>n?i=1:r<n&&(i=-1),i}},{key:"getName",value:function(e){var t=this.lotteries.find((function(t){return t.id==e}));return t?t.name:""}},{key:"numberOnly",value:function(e){var t=e.which?e.which:e.keyCode;return!(t>31&&(t<48||t>57))}},{key:"preventEnter",value:function(){}},{key:"lotteryChange",value:function(e){var t=this,r=this.entityForm.get("checkLotteries"),n=this.lotteries.find((function(t){return t.id==e.source.value})),a=!1,c=!1;if(e.checked){r.push(new i.d({id:e.source.value,isThreeFigures:n.isThreeFigures}));var o,l=0,s=_createForOfIteratorHelper(r.value);try{for(s.s();!(o=s.n()).done;)if(o.value.isThreeFigures&&(c=!0,(l+=1)>=2)){a=!0;break}}catch(D){s.e(D)}finally{s.f()}var u,h=[],b=function(e,t){var r=JSON.parse(JSON.stringify(e));return r.number=r.number.substring(1,e.number.length),r.lotteryId=t.id,r.isFourFigure=!1,r.isLastThree=!0,r},f=this.entity.details.filter((function(e){return e.lotteryId==t.entity.details[0].lotteryId||!e.lotteryId})),d=_createForOfIteratorHelper(this.entity.details);try{for(d.s();!(u=d.n()).done;)u.value.number.length}catch(D){d.e(D)}finally{d.f()}var g,m=_createForOfIteratorHelper(f);try{for(m.s();!(g=m.n()).done;){var y=g.value;if(3==y.number.length)if(y.isFirstThree||(y.isLastThree=!0),y.lotteryId){var p=JSON.parse(JSON.stringify(y));p.lotteryId=n.id,p.isFourFigure=!1,h.push(p)}else y.lotteryId=n.id;else if(y.lotteryId||n.isThreeFigures)if(!y.lotteryId&&n.isThreeFigures)h.push(b(y,n));else if(n.isThreeFigures){if(!a&&!this.entity.lastThree){var v,C=_createForOfIteratorHelper(r.value);try{for(C.s();!(v=C.n()).done;){var T=v.value;!T.isThreeFigures&&y.number.length>3&&h.push(b(y,T))}}catch(D){C.e(D)}finally{C.f()}h.push(b(y,n))}}else{var F=JSON.parse(JSON.stringify(y));F.lotteryId=n.id,F.isFourFigure=3!=F.number.length,h.push(F)}else{y.lotteryId=n.id;var k=this.lotteries.find((function(e){return e.id==t.entity.details[0].lotteryId}));c&&!k.isThreeFigures&&h.push(b(y,n))}}}catch(D){m.e(D)}finally{m.f()}this.entity.details=this.entity.details.concat(h)}else{var U,w=0,O=_createForOfIteratorHelper(r.value);try{for(O.s();!(U=O.n()).done;)if(U.value.isThreeFigures&&(c=!0,(w+=1)>=2)){a=!0;break}}catch(D){O.e(D)}finally{O.f()}var I=0;r.controls.forEach((function(t){t.value.id!=e.source.value?I++:r.removeAt(I)}));for(var P=[],M=0;M<this.entity.details.length;M++){var x=this.entity.details[M];x.lotteryId==n.id&&P.push(M),!n.isThreeFigures||this.entity.lastThree||a||x.lotteryId!=n.id&&x.isLastThree&&P.push(M)}this.onDeleteCustom(P)}this.entity.details.sort(this.compare),this.calculateTotal()}},{key:"add",value:function(){var e=this.entityForm.get("number");if(this.number&&this.number.toString().length>2&&e.valid){var t,r=this.entityForm.get("checkLotteries"),n=!1,i=!1,a=0,c=_createForOfIteratorHelper(r.value);try{for(c.s();!(t=c.n()).done&&!(t.value.isThreeFigures&&(n=!0,(a+=1)>=2)););}catch(C){c.e(C)}finally{c.f()}var o,l=_createForOfIteratorHelper(r.value);try{for(l.s();!(o=l.n()).done;)if(!o.value.isThreeFigures){i=!0;break}}catch(C){l.e(C)}finally{l.f()}var s=!1;if(4==this.number.toString().length&&(s=!0),!i&&n&&s&&this.entity.details.push({number:this.number,price:this.entity.price,accumulated:this.entity.price,isFourFigure:s}),r.value.length){var u,h=_createForOfIteratorHelper(r.value);try{for(h.s();!(u=h.n()).done;){var b=u.value,f={lotteryId:b.id,isFourFigure:s,price:this.entity.price,accumulated:this.entity.price};if(s||(f.isLastThree=!0),b.isThreeFigures)f.isLastThree=!0,this.number.length>3?(f.isFourFigure=!1,f.number=this.number.substring(1,this.number.length)):f.number=this.number;else if(f.number=this.number,n&&this.number.length>3){var d=JSON.parse(JSON.stringify(f));d.isFourFigure=!1,d.isLastThree=!0,d.number=this.number.substring(1,this.number.length),this.entity.lastThree&&(d.price=this.entity.lastThreePrice,d.accumulated=this.entity.lastThreePrice),this.entity.details.push(d)}if((3==f.number.length&&n||3==f.number.length&&this.entity.lastThree)&&(f.isLastThree=!0,this.entity.lastThree&&(f.price=this.entity.lastThreePrice,f.accumulated=this.entity.lastThreePrice)),this.entity.details.push(f),this.entity.firstThree&&this.number.toString().length>3){var g={lotteryId:b.id,number:this.number.substring(0,this.number.length-1),price:this.entity.firstThreePrice,accumulated:this.entity.firstThreePrice,isFourFigure:!1,isFirstThree:!0};this.entity.details.push(g)}if(this.entity.lastThree&&!n&&this.number.toString().length>3){var m={lotteryId:b.id,number:this.number.substring(1,this.number.length),price:this.entity.lastThreePrice,accumulated:this.entity.lastThreePrice,isFourFigure:!1,isLastThree:!0};this.entity.details.push(m)}}}catch(C){h.e(C)}finally{h.f()}}else{var y={number:this.number,price:this.entity.price,accumulated:this.entity.price,isFourFigure:s};if(s||(y.isLastThree=!0),3==this.number.length&&this.entity.lastThree&&(y.isLastThree=!0,this.entity.lastThree&&(y.price=this.entity.lastThreePrice,y.accumulated=this.entity.lastThreePrice)),this.entity.details.push(y),this.entity.firstThree&&this.number.toString().length>3){var p={number:this.number.substring(0,this.number.length-1),price:this.entity.firstThreePrice,accumulated:this.entity.firstThreePrice,isFourFigure:!1,isFirstThree:!0,isLastThree:!1};this.entity.details.push(p)}if(this.entity.lastThree&&this.number.toString().length>3){var v={number:this.number.substring(1,this.number.length),price:this.entity.lastThreePrice,accumulated:this.entity.lastThreePrice,isFourFigure:!1,isLastThree:!0,isFirstThree:!1};this.entity.details.push(v)}}}this.number=null,this.entity.details.sort(this.compare),this.calculateTotal()}},{key:"onDeleteCustomGrid",value:function(e){for(var t=this,r=[],n=[],i=function(i){var a=t.entity.details[i];a.number==e.number&&(n.find((function(e){return e.number==a.number&&e.lotteryId==a.lotteryId}))||(n.push(a),r.push(i)))},a=0;a<this.entity.details.length;a++)i(a);this.onDeleteCustom(r)}},{key:"onDeleteCustom",value:function(e){for(var t=this,r=[],n=e.length-1;n>=0;n--){var i=this.entity.details[e[n]];i.id&&r.push(i.id),this.entity.details.splice(e[n],1)}if(r.length)this.view.service.deleteOptions(this.entityDetailApi,{options:{where:{id:r}}}).subscribe((function(e){if(t.entity.details.sort(t.compare),t.calculateTotal(),!t.entity.details.length)for(var r=t.entityForm.get("checkNumbers"),n=r.controls.length,i=0;i<n;i++)r.removeAt(0);t.view.service.save(t.view.entityApi,{id:t.entity.id,employeeId:t.entity.employeeId,userId:t.entity.userId,price:t.entity.price,firstThree:t.entity.firstThree,firstThreePrice:t.entity.firstThreePrice,lastThree:t.entity.lastThree,lastThreePrice:t.entity.lastThreePrice,chock:t.entity.chock,chockFourFigurePrice:t.entity.chockFourFigurePrice,chockThreeFigurePrice:t.entity.chockThreeFigurePrice,combined:t.entity.combined,combinedFourFigurePrice:t.entity.combinedFourFigurePrice,combinedThreeFigurePrice:t.entity.combinedThreeFigurePrice,total:t.entity.total}).subscribe((function(e){t.entity=e||t.entity,t.view._snackBar&&t.view._snackBar.open("Salvo","Correctamente",{duration:2e3})}))}));else if(this.entity.details.sort(this.compare),this.calculateTotal(),!this.entity.details.length)for(var a=this.entityForm.get("checkNumbers"),c=a.controls.length,o=0;o<c;o++)a.removeAt(0)}},{key:"beforeSaved",value:function(){var e,t=this,r=!0,n=!0,i=_createForOfIteratorHelper(this.entityForm.get("checkLotteries").value);try{var a=function(){var r=e.value;if(!t.lotteries.find((function(e){return e.id==r.id})).isThreeFigures)return n=!1,"break"};for(i.s();!(e=i.n()).done&&"break"!==a(););}catch(h){i.e(h)}finally{i.f()}if(n){var c,o=_createForOfIteratorHelper(this.entity.details);try{for(o.s();!(c=o.n()).done;)c.value.number.length>3&&(alert("Solo 3 cifras en las loterias seleccionadas"),r=!1)}catch(h){o.e(h)}finally{o.f()}}var l,s=_createForOfIteratorHelper(this.entity.details);try{var u=function(){var e=l.value,n=t.forbiddenNumbers.find((function(t){return t.number==e.number&&t.lotteryId==e.lotteryId}));n&&(alert("El N\xfamero: "+n.number+"; prohibido en "+n.lotteryName),r=!1)};for(s.s();!(l=s.n()).done;)u()}catch(h){s.e(h)}finally{s.f()}return r}},{key:"changePrice",value:function(){var e,t=_createForOfIteratorHelper(this.entity.details);try{for(t.s();!(e=t.n()).done;){var r=e.value;this.entity.firstThree&&r.isFirstThree?(r.price=this.entity.firstThreePrice,r.accumulated=this.entity.firstThreePrice):this.entity.lastThree&&r.isLastThree?(r.price=this.entity.lastThreePrice,r.accumulated=this.entity.lastThreePrice):(r.price=this.entity.price,r.accumulated=this.entity.price)}}catch(n){t.e(n)}finally{t.f()}this.calculateTotal()}},{key:"calculateTotal",value:function(){if(this.entity.details.length){var e=this.entityForm.get("checkNumbers");e.value.length||e.push(new i.d({id:Object(K.a)()}))}this.entity.total=0;var t,r,n,a=0,c=0,o=!1,l=!1,s=_createForOfIteratorHelper(this.entity.details);try{for(s.s();!(n=s.n()).done;){var u=n.value;this.entity.total+=u.price,3==u.number.length?(a++,l||(l=!0,r=u.lotteryId)):(c++,o||(o=!0,t=u.lotteryId))}}catch(b){s.e(b)}finally{s.f()}this.entity.chock&&(a?(this.entity.total+=this.entity.chockFourFigurePrice*c,this.entity.total+=this.entity.chockThreeFigurePrice*a):this.entity.total+=this.entity.chockFourFigurePrice*c),this.entity.combined&&(a?(this.entity.total+=this.entity.combinedFourFigurePrice*c,this.entity.total+=this.entity.combinedThreeFigurePrice*a):this.entity.total+=this.entity.combinedFourFigurePrice*c);var h=[];this.entity.details.length&&(h=this.entity.details.filter(o?t?function(e){return e.lotteryId==t}:r?function(e){return e.lotteryId==r||e.lotteryId==t}:function(e){return e.lotteryId==t}:function(e){return e.lotteryId==r})),this.dataSource=new k.o(h)}},{key:"firstThreeChange",value:function(e){if(e.checked){this.entityForm.get("firstThreePrice").setValidators([i.s.required]);var t=this.entityForm.get("checkLotteries");this.entity.firstThreePrice=this.entity.price;var r,n=[],a=JSON.parse(JSON.stringify(this.entity.details)),c=null,o=_createForOfIteratorHelper(a);try{for(o.s();!(r=o.n()).done;){var l=r.value;if(4==l.number.length){var s=JSON.parse(JSON.stringify(l));s.isFourFigure=!1,s.isLastThree=!1,s.isFirstThree=!0,s.number=s.number.substring(0,s.number.length-1),n.push(s),c||(c=l.lotteryId)}}}catch(v){o.e(v)}finally{o.f()}if(c){var u,h=_createForOfIteratorHelper(this.entity.details.filter((function(e){return e.lotteryId==c&&e.number.length>3})));try{for(h.s();!(u=h.n()).done;){var b,f=u.value,d=_createForOfIteratorHelper(t.value);try{for(d.s();!(b=d.n()).done;){var g=b.value;if(g.isThreeFigures){var m=JSON.parse(JSON.stringify(f));m.isFourFigure=!1,m.isLastThree=!1,m.isFirstThree=!0,m.lotteryId=g.id,m.number=m.number.substring(0,m.number.length-1),n.push(m)}}}catch(v){d.e(v)}finally{d.f()}}}catch(v){h.e(v)}finally{h.f()}}this.entity.details=this.entity.details.concat(n)}else{this.entityForm.get("firstThreePrice").clearValidators();for(var y=[],p=0;p<this.entity.details.length;p++)this.entity.details[p].isFirstThree&&y.push(p);this.onDeleteCustom(y)}this.entityForm.get("firstThreePrice").updateValueAndValidity(),this.entity.details.sort(this.compare),this.calculateTotal()}},{key:"firstThreePriceChange",value:function(){var e,t=_createForOfIteratorHelper(this.entity.details);try{for(t.s();!(e=t.n()).done;){var r=e.value;3==r.number.length&&r.isFirstThree&&(r.price=this.entity.firstThreePrice,r.accumulated=this.entity.firstThreePrice)}}catch(n){t.e(n)}finally{t.f()}this.calculateTotal()}},{key:"lastThreeChange",value:function(e){var t,r=!1,n=0,a=_createForOfIteratorHelper(this.entityForm.get("checkLotteries").value);try{for(a.s();!(t=a.n()).done&&!(t.value.isThreeFigures&&(r=!0,(n+=1)>=2)););}catch(f){a.e(f)}finally{a.f()}if(e.checked){if(this.entity.lastThreePrice=this.entity.price,this.entityForm.get("lastThreePrice").setValidators([i.s.required]),!r){var c,o=[],l=_createForOfIteratorHelper(JSON.parse(JSON.stringify(this.entity.details)));try{for(l.s();!(c=l.n()).done;){var s=c.value;if(4==s.number.length){var u=JSON.parse(JSON.stringify(s));u.isFourFigure=!1,u.isLastThree=!0,u.isFirstThree=!1,u.number=u.number.substring(1,u.number.length),o.push(u)}}}catch(f){l.e(f)}finally{l.f()}this.entity.details=this.entity.details.concat(o)}}else if(this.entityForm.get("lastThreePrice").clearValidators(),!r){for(var h=[],b=0;b<this.entity.details.length;b++)this.entity.details[b].isLastThree&&h.push(b);this.onDeleteCustom(h)}this.entityForm.get("lastThreePrice").updateValueAndValidity(),this.entity.details.sort(this.compare),this.calculateTotal()}},{key:"lastThreePriceChange",value:function(){var e,t=_createForOfIteratorHelper(this.entity.details);try{for(t.s();!(e=t.n()).done;){var r=e.value;3==r.number.length&&r.isLastThree&&(r.price=this.entity.lastThreePrice,r.accumulated=this.entity.lastThreePrice)}}catch(n){t.e(n)}finally{t.f()}this.calculateTotal()}},{key:"chockChange",value:function(e){var t=this.entityForm.get("checkChock");if(e.checked)this.entityForm.get("checkChock").setValidators([i.s.required]),this.entity.price&&(this.entity.chockFourFigurePrice=this.entity.price,this.entity.chockThreeFigurePrice=this.entity.price,t.push(new i.d({id:Object(K.a)(),chockFourFigure:!0})),t.push(new i.d({id:Object(K.a)(),chockFourFigure:!1})));else{this.entity.chockFourFigurePrice=null,this.entity.chockThreeFigurePrice=null;var r=0;t.controls.forEach((function(e){t.removeAt(r),r++})),this.entityForm.get("checkChock").clearValidators()}this.entityForm.get("checkChock").updateValueAndValidity(),this.calculateTotal()}},{key:"chockFourFigurePriceChange",value:function(){var e=this.entityForm.get("checkChock");this.entity.chockFourFigurePrice?e.push(new i.d({id:Object(K.a)(),ChockFourFigure:!0})):e.controls.forEach((function(t){e.removeAt(0)})),this.calculateTotal()}},{key:"chockThreeFigurePriceChange",value:function(){var e=this.entityForm.get("checkChock");this.entity.chockThreeFigurePrice?e.push(new i.d({id:Object(K.a)(),ChockFourFigure:!1})):e.controls.forEach((function(t){e.removeAt(0)})),this.calculateTotal()}},{key:"combinedChange",value:function(e){var t=this.entityForm.get("checkCombined");if(e.checked)this.entityForm.get("checkCombined").setValidators([i.s.required]),this.entity.price&&(this.entity.combinedFourFigurePrice=this.entity.price,this.entity.combinedThreeFigurePrice=this.entity.price,t.push(new i.d({id:Object(K.a)(),combinedFourFigure:!0})),t.push(new i.d({id:Object(K.a)(),combinedFourFigure:!1})));else{this.entity.combinedFourFigurePrice=null,this.entity.combinedThreeFigurePrice=null;var r=0;t.controls.forEach((function(e){t.removeAt(r),r++})),this.entityForm.get("checkCombined").clearValidators()}this.entityForm.get("checkCombined").updateValueAndValidity(),this.calculateTotal()}},{key:"combinedFourFigurePriceChange",value:function(){var e=this.entityForm.get("checkCombined");this.entity.combinedFourFigurePrice?e.push(new i.d({id:Object(K.a)(),combinedFourFigure:!0})):e.controls.forEach((function(t){e.removeAt(0)})),this.calculateTotal()}},{key:"combinedThreeFigurePriceChange",value:function(){var e=this.entityForm.get("checkCombined");this.entity.combinedThreeFigurePrice?e.push(new i.d({id:Object(K.a)(),combinedFourFigure:!1})):e.controls.forEach((function(t){e.removeAt(0)})),this.calculateTotal()}},{key:"new",value:function(){this.iniEntity(),this.number=null;var e,t=_createForOfIteratorHelper(this.lotteries);try{for(t.s();!(e=t.n()).done;)e.value.check=!1}catch(o){t.e(o)}finally{t.f()}if(this.entityForm){for(var r=this.entityForm.get("checkNumbers"),n=r.controls.length,i=0;i<n;i++)r.removeAt(0);var a=this.entityForm.get("checkLotteries");n=a.controls.length;for(var c=0;c<n;c++)a.removeAt(0)}this.dataSource=new k.o([])}}]),r}(l.a)).\u0275fac=function(e){return new(e||zt)(s.Ob(u.a),s.Ob(h.a),s.Ob(c.a),s.Ob(i.c),s.Ob(c.f),s.Ob(s.h),s.Ob(b.a))},zt.\u0275cmp=s.Ib({type:zt,selectors:[["app-bet2"]],features:[s.zb],decls:72,vars:39,consts:[["fxLayout","row","fxLayoutWrap","wrap"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100"],[3,"formGroup"],["fxLayout","row","fxLayoutWrap","wrap",2,"overflow","hidden"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100",2,"float","left","width","50%"],[2,"width","95%"],["matNativeControl","","formControlName","employeeId","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matInput","","formControlName","total","type","number","placeholder","Total","onKeyPress","if(this.value.length==9) return false;","autocomplete","off",3,"ngModel","readonly","keypress","ngModelChange"],["style","margin-right: 25px;",3,"ngModel","ngModelOptions","value","ngStyle","ngModelChange","change",4,"ngFor","ngForOf"],["matInput","","placeholder","Entre number","formControlName","number","onKeyPress","if(this.value.length===4) return false;","autocomplete","off",3,"ngModel","keypress","ngModelChange","keyup.enter"],["matInput","","formControlName","price","type","number","placeholder","Entre Precio","onKeyPress","if(this.value.length==9) return false;","autocomplete","off","required","",3,"ngModel","keypress","ngModelChange","change"],["fxLayout","row","fxLayoutWrap","wrap",2,"margin-text-outline","10px","margin-top","10px","overflow","hidden"],[2,"margin-right","10px",3,"ngModel","ngModelOptions","ngModelChange","change"],["style","width: 77%;",4,"ngIf"],["style","width: 32%;margin-right: 10px;",4,"ngIf"],["style","width: 32%",4,"ngIf"],["fxLayout","row","fxLayoutWrap","wrap",2,"margin-top","10px"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-fab","","color","accent",3,"disabled","click"],["mat-fab","","color","primary",3,"click"],[3,"value"],[2,"margin-right","25px",3,"ngModel","ngModelOptions","value","ngStyle","ngModelChange","change"],[2,"width","77%"],["matInput","","formControlName","firstThreePrice","type","number","placeholder","Entre precio, tres primeras","onKeyPress","if(this.value.length==9) return false;","autocomplete","off","required","",3,"ngModel","keypress","ngModelChange","change"],[2,"width","32%","margin-right","10px"],["matInput","","type","number","placeholder","Cuatro cifras, cu\xf1a","onKeyPress","if(this.value.length==9) return false;","autocomplete","off",3,"ngModelOptions","ngModel","keypress","ngModelChange","change"],[2,"width","32%"],["matInput","","type","number","placeholder","Tres cifras, cu\xf1a","onKeyPress","if(this.value.length==9) return false;","autocomplete","off",3,"ngModelOptions","ngModel","keypress","ngModelChange","change"],["matInput","","formControlName","lastThreePrice","type","number","placeholder","Entre precio, tres ultimas","onKeyPress","if(this.value.length==9) return false;","autocomplete","off","required","",3,"ngModel","keypress","ngModelChange","change"],["matInput","","type","number","placeholder","Cuatro cifras, combinado","onKeyPress","if(this.value.length==9) return false;","autocomplete","off",3,"ngModelOptions","ngModel","keypress","ngModelChange","change"],["matInput","","type","number","placeholder","Tres cifras, combinado","onKeyPress","if(this.value.length==9) return false;","autocomplete","off",3,"ngModelOptions","ngModel","keypress","ngModelChange","change"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],["mat-button","",3,"click",4,"ngIf"],["mat-button","","color","warn",3,"click",4,"ngIf"],["mat-button","",3,"click"],["mat-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(s.Ub(0,"div",0),s.Ub(1,"div",1),s.Ub(2,"mat-card"),s.Ub(3,"mat-card-header"),s.Ub(4,"mat-card-title"),s.Ub(5,"div",0),s.Ub(6,"div",2),s.zc(7),s.Tb(),s.Tb(),s.Tb(),s.Ub(8,"mat-card-subtitle"),s.Ub(9,"div",0),s.Ub(10,"div",2),s.zc(11),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(12,"mat-card-content"),s.Ub(13,"form",3),s.Ub(14,"div",4),s.Ub(15,"div",5),s.Ub(16,"mat-form-field",6),s.Ub(17,"mat-label"),s.zc(18,"Seleccione C\xf3digo"),s.Tb(),s.Ub(19,"mat-select",7),s.cc("ngModelChange",(function(e){return t.entity.employeeId=e})),s.yc(20,ht,2,2,"mat-option",8),s.Tb(),s.yc(21,bt,2,1,"mat-error",9),s.Tb(),s.Tb(),s.Ub(22,"div",5),s.Ub(23,"mat-form-field"),s.Ub(24,"input",10),s.cc("keypress",(function(e){return t.numberOnly(e)}))("ngModelChange",(function(e){return t.entity.total=e})),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(25,"div",0),s.Ub(26,"div",2),s.yc(27,gt,2,8,"mat-checkbox",11),s.yc(28,mt,2,1,"mat-error",9),s.Tb(),s.Tb(),s.Ub(29,"div",0),s.Ub(30,"div",2),s.Ub(31,"mat-form-field"),s.Ub(32,"input",12),s.cc("keypress",(function(e){return t.numberOnly(e)}))("ngModelChange",(function(e){return t.number=e}))("keyup.enter",(function(){return t.add()})),s.Tb(),s.yc(33,yt,2,1,"mat-error",9),s.Tb(),s.Tb(),s.Tb(),s.Ub(34,"div",0),s.Ub(35,"div",2),s.Ub(36,"mat-form-field"),s.Ub(37,"input",13),s.cc("keypress",(function(e){return t.numberOnly(e)}))("ngModelChange",(function(e){return t.entity.price=e}))("change",(function(){return t.changePrice()})),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(38,"div",14),s.Ub(39,"div",5),s.Ub(40,"mat-checkbox",15),s.cc("ngModelChange",(function(e){return t.entity.firstThree=e}))("change",(function(e){return t.firstThreeChange(e)})),s.zc(41,"Tres primeras "),s.Tb(),s.yc(42,pt,2,1,"mat-form-field",16),s.Tb(),s.Ub(43,"div",5),s.Ub(44,"mat-checkbox",15),s.cc("ngModelChange",(function(e){return t.entity.chock=e}))("change",(function(e){return t.chockChange(e)})),s.zc(45,"Cu\xf1a "),s.Tb(),s.yc(46,vt,2,3,"mat-form-field",17),s.yc(47,Ct,2,3,"mat-form-field",18),s.yc(48,Tt,2,1,"mat-error",9),s.Tb(),s.Tb(),s.Ub(49,"div",14),s.Ub(50,"div",5),s.Ub(51,"mat-checkbox",15),s.cc("ngModelChange",(function(e){return t.entity.lastThree=e}))("change",(function(e){return t.lastThreeChange(e)})),s.zc(52,"Tres Ultimas "),s.Tb(),s.yc(53,Ft,2,1,"mat-form-field",16),s.Tb(),s.Ub(54,"div",5),s.Ub(55,"mat-checkbox",15),s.cc("ngModelChange",(function(e){return t.entity.combined=e}))("change",(function(e){return t.combinedChange(e)})),s.zc(56,"Combinado "),s.Tb(),s.yc(57,kt,2,3,"mat-form-field",17),s.yc(58,Ut,2,3,"mat-form-field",18),s.yc(59,wt,2,1,"mat-error",9),s.Tb(),s.Tb(),s.Ub(60,"div",19),s.Ub(61,"div",2),s.Ub(62,"table",20),s.yc(63,xt,3,1,"ng-container",21),s.yc(64,Dt,1,0,"tr",22),s.yc(65,_t,1,0,"tr",23),s.Tb(),s.yc(66,St,2,1,"mat-error",9),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(67,"mat-card-actions"),s.Ub(68,"button",24),s.cc("click",(function(){return t.save()})),s.zc(69,"Salvar"),s.Tb(),s.Ub(70,"button",25),s.cc("click",(function(){return t.new()})),s.zc(71,"Nuevo"),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb()),2&e&&(s.Cb(7),s.Bc(" ",t.title," "),s.Cb(4),s.Bc(" ",t.subtitle," "),s.Cb(2),s.lc("formGroup",t.entityForm),s.Cb(6),s.lc("ngModel",t.entity.employeeId),s.Cb(1),s.lc("ngForOf",t.employees),s.Cb(1),s.lc("ngIf",t.entityForm.invalid),s.Cb(3),s.lc("ngModel",t.entity.total)("readonly",!0),s.Cb(3),s.lc("ngForOf",t.lotteries),s.Cb(1),s.lc("ngIf",t.entityForm.invalid),s.Cb(4),s.lc("ngModel",t.number),s.Cb(1),s.lc("ngIf",t.entityForm.invalid),s.Cb(4),s.lc("ngModel",t.entity.price),s.Cb(3),s.lc("ngModel",t.entity.firstThree)("ngModelOptions",s.mc(35,ft)),s.Cb(2),s.lc("ngIf",t.entity.firstThree),s.Cb(2),s.lc("ngModel",t.entity.chock)("ngModelOptions",s.mc(36,ft)),s.Cb(2),s.lc("ngIf",t.entity.chock),s.Cb(1),s.lc("ngIf",t.entity.chock),s.Cb(1),s.lc("ngIf",t.entity.chock&&t.entityForm.invalid),s.Cb(3),s.lc("ngModel",t.entity.lastThree)("ngModelOptions",s.mc(37,ft)),s.Cb(2),s.lc("ngIf",t.entity.lastThree),s.Cb(2),s.lc("ngModel",t.entity.combined)("ngModelOptions",s.mc(38,ft)),s.Cb(2),s.lc("ngIf",t.entity.combined),s.Cb(1),s.lc("ngIf",t.entity.combined),s.Cb(1),s.lc("ngIf",t.entity.combined&&t.entityForm.invalid),s.Cb(3),s.lc("dataSource",t.dataSource),s.Cb(1),s.lc("ngForOf",t.displayedColumns),s.Cb(1),s.lc("matHeaderRowDef",t.displayedColumns),s.Cb(1),s.lc("matRowDefColumns",t.displayedColumns),s.Cb(1),s.lc("ngIf",t.entityForm.invalid),s.Cb(2),s.lc("disabled",!t.entityForm.valid))},directives:[f.a,f.e,f.h,f.g,f.c,i.t,i.m,i.g,d.c,d.f,m.a,i.l,i.e,i.r,n.j,n.k,g.b,i.b,i.p,y.a,i.o,k.n,U.a,k.k,k.m,f.b,p.a,C.n,d.b,n.l,k.c,k.i,k.b,k.h,k.a,T.a,k.j,k.l],encapsulation:2}),zt);function Lt(e,t){1&e&&(s.Ub(0,"th",19),s.zc(1," Id "),s.Tb())}function Nt(e,t){if(1&e&&(s.Ub(0,"td",20),s.zc(1),s.Tb()),2&e){var r=t.$implicit;s.Cb(1),s.Bc(" ",r.id," ")}}function Et(e,t){if(1&e&&(s.Ub(0,"th",19),s.zc(1),s.Tb()),2&e){var r=s.gc().$implicit;s.Cb(1),s.Bc(" ",r," ")}}function Ht(e,t){1&e&&(s.Ub(0,"span",23),s.zc(1,"notification_important"),s.Tb())}function Rt(e,t){if(1&e&&(s.Ub(0,"td",20),s.Ub(1,"span"),s.zc(2),s.Tb(),s.yc(3,Ht,2,0,"span",22),s.Tb()),2&e){var r=t.$implicit,n=s.gc().$implicit,i=s.gc();s.Cb(2),s.Ac(r[n]),s.Cb(1),s.lc("ngIf","actions"===n&&i.validateAlert(r))}}function $t(e,t){1&e&&(s.Sb(0,21),s.yc(1,Et,2,1,"th",13),s.yc(2,Rt,4,2,"td",14),s.Rb()),2&e&&s.lc("matColumnDef",t.$implicit)}function Vt(e,t){1&e&&s.Pb(0,"tr",24)}function Bt(e,t){1&e&&s.Pb(0,"tr",25)}function jt(e,t){1&e&&(s.Ub(0,"th",19),s.zc(1," Id "),s.Tb())}function qt(e,t){if(1&e&&(s.Ub(0,"td",20),s.zc(1),s.Tb()),2&e){var r=t.$implicit;s.Cb(1),s.Bc(" ",r.id," ")}}function Gt(e,t){if(1&e&&(s.Ub(0,"th",19),s.zc(1),s.Tb()),2&e){var r=s.gc().$implicit;s.Cb(1),s.Bc(" ",r," ")}}function Kt(e,t){1&e&&(s.Ub(0,"span",23),s.zc(1,"notification_important"),s.Tb())}function Jt(e,t){if(1&e&&(s.Ub(0,"td",20),s.Ub(1,"span"),s.zc(2),s.Tb(),s.yc(3,Kt,2,0,"span",22),s.Tb()),2&e){var r=t.$implicit,n=s.gc().$implicit,i=s.gc();s.Cb(2),s.Ac(r[n]),s.Cb(1),s.lc("ngIf","actions"===n&&i.validateAlert(r))}}function Wt(e,t){1&e&&(s.Sb(0,21),s.yc(1,Gt,2,1,"th",13),s.yc(2,Jt,4,2,"td",14),s.Rb()),2&e&&s.lc("matColumnDef",t.$implicit)}function Yt(e,t){1&e&&s.Pb(0,"tr",24)}function Zt(e,t){1&e&&s.Pb(0,"tr",25)}var Xt,Qt,er,tr,rr=[{path:"betalerts",canActivate:[o.a],component:Se},{path:"betfourfigure",canActivate:[o.a],component:(Qt=function(e){_inherits(r,e);var t=_createSuper(r);function r(e,n,i){var a;return _classCallCheck(this,r),(a=t.call(this)).service=e,a.authService=n,a.router=i,a.entityApi="bets",a.price=5e4,a.settings={query:{table:"vw_betAlerts"},options:{where:{isFourFigure:!0,accumulatedTotal:{$gte:a.price}},order:[["accumulated","desc"],["accumulatedTotal","desc"]]}},a.displayedColumns=["lottery","number","accumulated","createdDate","accumulatedTotal","actions"],a.filtersColumns=["lottery"],a.createdDate=new Date,a}return _createClass(r,[{key:"ngOnInit",value:function(){this.title="Apuestas Alertas Cuantro Cifras Mayores A",this.subtitle="Apuesta",_get(_getPrototypeOf(r.prototype),"init",this).call(this,this),_get(_getPrototypeOf(r.prototype),"onPageChange",this).call(this)}},{key:"ngOnChanges",value:function(e){this.loadChange&&_get(_getPrototypeOf(r.prototype),"onPageChange",this).call(this)}},{key:"onEdit",value:function(e){}},{key:"validateAlert",value:function(e){var t=!1;return e.accumulatedTotal>=this.price&&(t=!0),t}},{key:"numberOnly",value:function(e){var t=e.which?e.which:e.keyCode;return!(t>31&&(t<48||t>57))}},{key:"beforePageChange",value:function(){if(this.settings={query:{table:"vw_betAlerts"},options:{where:{isFourFigure:!0,accumulatedTotal:{$gte:this.price}},order:[["accumulated","desc"],["accumulatedTotal","desc"]]}},this.createdDate){var e=this.createdDate.getDate()+"/"+(this.createdDate.getMonth()+1)+"/"+this.createdDate.getFullYear();this.settings.options.where.createdDate=e}else delete this.settings.options.where.createdDate}}]),r}(F.a),Qt.\u0275fac=function(e){return new(e||Qt)(s.Ob(u.a),s.Ob(h.a),s.Ob(c.f))},Qt.\u0275cmp=s.Ib({type:Qt,selectors:[["app-bet-four-figure"]],inputs:{loadChange:"loadChange"},features:[s.zb,s.Ab],decls:36,vars:13,consts:[["fxLayout","row","fxLayoutWrap","wrap"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100"],[2,"float","left","width","30%","margin-right","10px"],["matInput","","type","number","placeholder","Entre precio","onKeyPress","if(this.value.length==9) return false;","autocomplete","off",3,"ngModel","keypress","ngModelChange"],[2,"width","30%","margin-right","10px"],["matInput","",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],["fxFlex.gt-sm","100","fxFlex.gt-xs","100",2,"overflow","hidden"],["mat-fab","","color","basic",2,"float","left",3,"click"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell",""],["mat-cell",""],[3,"matColumnDef"],["class","material-icons",4,"ngIf"],[1,"material-icons"],["mat-header-row",""],["mat-row",""]],template:function(e,t){if(1&e&&(s.Ub(0,"div",0),s.Ub(1,"div",1),s.Ub(2,"mat-card"),s.Ub(3,"mat-card-header"),s.Ub(4,"mat-card-title"),s.Ub(5,"div",0),s.Ub(6,"div",2),s.zc(7),s.Tb(),s.Tb(),s.Tb(),s.Ub(8,"mat-card-subtitle"),s.Ub(9,"div",0),s.Ub(10,"div",2),s.zc(11),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(12,"mat-card-content"),s.Ub(13,"div",0),s.Ub(14,"div",2),s.Ub(15,"mat-form-field",3),s.Ub(16,"input",4),s.cc("keypress",(function(e){return t.numberOnly(e)}))("ngModelChange",(function(e){return t.price=e})),s.Tb(),s.Tb(),s.Ub(17,"mat-form-field",5),s.Ub(18,"mat-label"),s.zc(19,"Seleccione fecha"),s.Tb(),s.Ub(20,"input",6),s.cc("ngModelChange",(function(e){return t.createdDate=e})),s.Tb(),s.Pb(21,"mat-datepicker-toggle",7),s.Pb(22,"mat-datepicker",null,8),s.Tb(),s.Tb(),s.Tb(),s.Ub(24,"div",0),s.Ub(25,"div",9),s.Ub(26,"button",10),s.cc("click",(function(){return t.onPageChange()})),s.zc(27,"Refrescar"),s.Tb(),s.Tb(),s.Tb(),s.Ub(28,"table",11),s.cc("matSortChange",(function(e){return t.onSortChange(e)})),s.Sb(29,12),s.yc(30,Lt,2,0,"th",13),s.yc(31,Nt,2,1,"td",14),s.Rb(),s.yc(32,$t,3,1,"ng-container",15),s.yc(33,Vt,1,0,"tr",16),s.yc(34,Bt,1,0,"tr",17),s.Tb(),s.Ub(35,"mat-paginator",18),s.cc("page",(function(e){return t.onPaginatorChange(e)})),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb()),2&e){var r=s.qc(23);s.Cb(7),s.Bc(" ",t.title," "),s.Cb(4),s.Bc(" ",t.subtitle," "),s.Cb(5),s.lc("ngModel",t.price),s.Cb(4),s.lc("matDatepicker",r)("ngModel",t.createdDate),s.Cb(1),s.lc("for",r),s.Cb(7),s.lc("dataSource",t.dataSource),s.Cb(4),s.lc("ngForOf",t.displayedColumns),s.Cb(1),s.lc("matHeaderRowDef",t.displayedColumns),s.Cb(1),s.lc("matRowDefColumns",t.displayedColumns),s.Cb(1),s.lc("length",t.length)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions)}},directives:[f.a,f.e,f.h,f.g,f.c,d.c,g.b,i.p,i.b,i.l,i.o,d.f,ve.b,ve.d,d.g,ve.a,p.a,k.n,U.a,k.c,k.i,k.b,n.j,k.k,k.m,w.a,k.h,k.a,n.k,k.j,k.l],encapsulation:2}),Qt)},{path:"betthreefigure",canActivate:[o.a],component:(Xt=function(e){_inherits(r,e);var t=_createSuper(r);function r(e,n,i){var a;return _classCallCheck(this,r),(a=t.call(this)).service=e,a.authService=n,a.router=i,a.entityApi="bets",a.price=7e4,a.settings={query:{table:"vw_betAlerts"},options:{where:{isFourFigure:!1,accumulatedTotal:{$gte:a.price}},order:[["accumulated","desc"],["accumulatedTotal","desc"]]}},a.displayedColumns=["lottery","number","accumulated","createdDate","accumulatedTotal","actions"],a.filtersColumns=["lottery"],a.createdDate=new Date,a}return _createClass(r,[{key:"ngOnInit",value:function(){this.title="Apuestas Alertas Tres Cifras Mayores A",this.subtitle="Apuesta",_get(_getPrototypeOf(r.prototype),"init",this).call(this,this),_get(_getPrototypeOf(r.prototype),"onPageChange",this).call(this)}},{key:"ngOnChanges",value:function(e){this.loadChange&&_get(_getPrototypeOf(r.prototype),"onPageChange",this).call(this)}},{key:"onEdit",value:function(e){}},{key:"validateAlert",value:function(e){var t=!1;return e.accumulatedTotal>=this.price&&(t=!0),t}},{key:"numberOnly",value:function(e){var t=e.which?e.which:e.keyCode;return!(t>31&&(t<48||t>57))}},{key:"beforePageChange",value:function(){if(this.settings={query:{table:"vw_betAlerts"},options:{where:{isFourFigure:!1,accumulatedTotal:{$gte:this.price}},order:[["accumulated","desc"],["accumulatedTotal","desc"]]}},this.createdDate){var e=this.createdDate.getDate()+"/"+(this.createdDate.getMonth()+1)+"/"+this.createdDate.getFullYear();this.settings.options.where.createdDate=e}else delete this.settings.options.where.createdDate}}]),r}(F.a),Xt.\u0275fac=function(e){return new(e||Xt)(s.Ob(u.a),s.Ob(h.a),s.Ob(c.f))},Xt.\u0275cmp=s.Ib({type:Xt,selectors:[["app-bet-three-figure"]],inputs:{loadChange:"loadChange"},features:[s.zb,s.Ab],decls:36,vars:13,consts:[["fxLayout","row","fxLayoutWrap","wrap"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100"],[2,"float","left","width","30%","margin-right","10px"],["matInput","","type","number","placeholder","Entre precio","onKeyPress","if(this.value.length==9) return false;","autocomplete","off",3,"ngModel","keypress","ngModelChange"],[2,"width","30%","margin-right","10px"],["matInput","",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],["fxFlex.gt-sm","100","fxFlex.gt-xs","100",2,"overflow","hidden"],["mat-fab","","color","basic",2,"float","left",3,"click"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell",""],["mat-cell",""],[3,"matColumnDef"],["class","material-icons",4,"ngIf"],[1,"material-icons"],["mat-header-row",""],["mat-row",""]],template:function(e,t){if(1&e&&(s.Ub(0,"div",0),s.Ub(1,"div",1),s.Ub(2,"mat-card"),s.Ub(3,"mat-card-header"),s.Ub(4,"mat-card-title"),s.Ub(5,"div",0),s.Ub(6,"div",2),s.zc(7),s.Tb(),s.Tb(),s.Tb(),s.Ub(8,"mat-card-subtitle"),s.Ub(9,"div",0),s.Ub(10,"div",2),s.zc(11),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(12,"mat-card-content"),s.Ub(13,"div",0),s.Ub(14,"div",2),s.Ub(15,"mat-form-field",3),s.Ub(16,"input",4),s.cc("keypress",(function(e){return t.numberOnly(e)}))("ngModelChange",(function(e){return t.price=e})),s.Tb(),s.Tb(),s.Ub(17,"mat-form-field",5),s.Ub(18,"mat-label"),s.zc(19,"Seleccione fecha"),s.Tb(),s.Ub(20,"input",6),s.cc("ngModelChange",(function(e){return t.createdDate=e})),s.Tb(),s.Pb(21,"mat-datepicker-toggle",7),s.Pb(22,"mat-datepicker",null,8),s.Tb(),s.Tb(),s.Tb(),s.Ub(24,"div",0),s.Ub(25,"div",9),s.Ub(26,"button",10),s.cc("click",(function(){return t.onPageChange()})),s.zc(27,"Refrescar"),s.Tb(),s.Tb(),s.Tb(),s.Ub(28,"table",11),s.cc("matSortChange",(function(e){return t.onSortChange(e)})),s.Sb(29,12),s.yc(30,jt,2,0,"th",13),s.yc(31,qt,2,1,"td",14),s.Rb(),s.yc(32,Wt,3,1,"ng-container",15),s.yc(33,Yt,1,0,"tr",16),s.yc(34,Zt,1,0,"tr",17),s.Tb(),s.Ub(35,"mat-paginator",18),s.cc("page",(function(e){return t.onPaginatorChange(e)})),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb()),2&e){var r=s.qc(23);s.Cb(7),s.Bc(" ",t.title," "),s.Cb(4),s.Bc(" ",t.subtitle," "),s.Cb(5),s.lc("ngModel",t.price),s.Cb(4),s.lc("matDatepicker",r)("ngModel",t.createdDate),s.Cb(1),s.lc("for",r),s.Cb(7),s.lc("dataSource",t.dataSource),s.Cb(4),s.lc("ngForOf",t.displayedColumns),s.Cb(1),s.lc("matHeaderRowDef",t.displayedColumns),s.Cb(1),s.lc("matRowDefColumns",t.displayedColumns),s.Cb(1),s.lc("length",t.length)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions)}},directives:[f.a,f.e,f.h,f.g,f.c,d.c,g.b,i.p,i.b,i.l,i.o,d.f,ve.b,ve.d,d.g,ve.a,p.a,k.n,U.a,k.c,k.i,k.b,n.j,k.k,k.m,w.a,k.h,k.a,n.k,k.j,k.l],encapsulation:2}),Xt)},{path:"lottery",canActivate:[o.a],component:G},{path:"bet",canActivate:[o.a],component:pe},{path:"bet2",canActivate:[o.a],component:At},{path:"bets",canActivate:[o.a],component:qe},{path:"forbidden",canActivate:[o.a],component:ut}],nr=((tr=function e(){_classCallCheck(this,e)}).\u0275mod=s.Mb({type:tr}),tr.\u0275inj=s.Lb({factory:function(e){return new(e||tr)},imports:[[c.h.forChild(rr)],c.h]}),tr),ir=((er=function e(){_classCallCheck(this,e)}).\u0275mod=s.Mb({type:er}),er.\u0275inj=s.Lb({factory:function(e){return new(e||er)},imports:[[n.c,nr,a.a,i.q,i.h]]}),er)}}]);